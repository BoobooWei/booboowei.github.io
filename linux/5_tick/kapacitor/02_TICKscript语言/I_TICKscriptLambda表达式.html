<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>02-TICKscript语言-I-Lambda表达式 | BoobooWei</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.toberoot.com/linux/5_tick/kapacitor/02_TICKscript%E8%AF%AD%E8%A8%80/I_TICKscriptLambda%E8%A1%A8%E8%BE%BE%E5%BC%8F">
  <!-- Alternate links -->
  
    
      
    
    <link rel="alternate" hreflang="x-default" href="http://www.toberoot.com/linux/5_tick/kapacitor/02_TICKscript%E8%AF%AD%E8%A8%80/I_TICKscriptLambda%E8%A1%A8%E8%BE%BE%E5%BC%8F" />
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="../../../../icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="../../../../icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="../../../../icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="../../../../icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="../../../../icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="../../../../icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="../../../../icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="../../../../icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="../../../../icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="../../../../icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="../../../../icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="../../../../icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="../../../../icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="../../../../icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="../../../../css/navy.css">

  <!-- endbuild -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-lato@0.0.75/index.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="../../../../atom.xml" title="BoobooWei" type="application/atom+xml">
  <!-- Open Graph -->
  <meta name="description" content="TICKscript Lambda表达式 概述 简介 内置函数   有状态函数 sigma可用于定义强大的告警 知识点-平均偏差     无状态函数 类型转换函数 判断存在的函数 时间函数 数学函数 字符串函数 人性化函数 条件函数        TICKscript Lambda表达式Lambda表达式官方帮助 函数帮助 概述TICKscript使用lambda表达式定义数据点的转换，并定">
<meta property="og:type" content="website">
<meta property="og:title" content="02-TICKscript语言-I-Lambda表达式">
<meta property="og:url" content="http://www.toberoot.com/linux/5_tick/kapacitor/02_TICKscript%E8%AF%AD%E8%A8%80/I_TICKscriptLambda%E8%A1%A8%E8%BE%BE%E5%BC%8F">
<meta property="og:site_name" content="BoobooWei">
<meta property="og:description" content="TICKscript Lambda表达式 概述 简介 内置函数   有状态函数 sigma可用于定义强大的告警 知识点-平均偏差     无状态函数 类型转换函数 判断存在的函数 时间函数 数学函数 字符串函数 人性化函数 条件函数        TICKscript Lambda表达式Lambda表达式官方帮助 函数帮助 概述TICKscript使用lambda表达式定义数据点的转换，并定">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://www.toberoot.com/icon/og-image-wide.png">
<meta property="article:published_time" content="2020-04-14T11:28:51.000Z">
<meta property="article:modified_time" content="2025-10-22T08:49:11.619Z">
<meta property="article:author" content="魏亚萍">
<meta property="article:tag" content="TICKscript语言">
<meta property="article:tag" content="TICK技术栈">
<meta property="article:tag" content="监控告警">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.toberoot.com/icon/twitter-summary.png">
<meta property="fb:admins" content="100000247608790">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48498357-3', 'auto');
  ga('send', 'pageview');
</script>

  <!-- Algolia -->
  <link rel="preconnect" href="https://-dsn.algolia.net" crossorigin />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
<meta name="generator" content="Hexo 8.0.0"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="../../../../" id="logo">Hexo</a>
    </h1>
    <nav id="main-nav">
      <a href="../../../../docs/" class="main-nav-link">Hexo</a><a href="../../../../news/" class="main-nav-link">News</a><a href="../../../../api/" class="main-nav-link">MySQL8.0</a><a href="../../../../database/" class="main-nav-link">Database</a><a href="../../../../linux/" class="main-nav-link">Linux</a><a href="../../../../cloud/" class="main-nav-link">Cloud</a><a href="../../../../singapore/" class="main-nav-link">Singapore</a><a href="../../../../amy/" class="main-nav-link">AMY</a><a href="../../../../about/" class="main-nav-link">About</a>
      <a target="_blank" rel="noopener" href="https://github.com/BoobooWei" class="main-nav-link"><i class="fa fa-github-alt"></i></a>

      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <div id="lang-select-wrap">
        <a href="/about/" class="main-nav-link"><label id="lang-select-label"><i class="fa fa-globe"></i><span>关于我</span></label></a>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">02-TICKscript语言-I-Lambda表达式</h1>
                <a target="_blank" rel="noopener" href="https://github.com/BoobooWei/site/edit/master/source/linux/5_tick/kapacitor/02_TICKscript语言/I_TICKscriptLambda表达式.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 --><html><head></head><body><ul>
<li><a href="#tickscript-lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F">TICKscript Lambda表达式</a><ul>
<li><a href="#%E6%A6%82%E8%BF%B0">概述</a><ul>
<li><a href="#%E7%AE%80%E4%BB%8B">简介</a></li>
<li><a href="#%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0">内置函数</a></li>
</ul>
</li>
<li><a href="#%E6%9C%89%E7%8A%B6%E6%80%81%E5%87%BD%E6%95%B0">有状态函数</a><ul>
<li><a href="#sigma%E5%8F%AF%E7%94%A8%E4%BA%8E%E5%AE%9A%E4%B9%89%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%91%8A%E8%AD%A6"><code>sigma</code>可用于定义强大的告警</a><ul>
<li><a href="#%E7%9F%A5%E8%AF%86%E7%82%B9-%E5%B9%B3%E5%9D%87%E5%81%8F%E5%B7%AE">知识点-平均偏差</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%97%A0%E7%8A%B6%E6%80%81%E5%87%BD%E6%95%B0">无状态函数</a><ul>
<li><a href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0">类型转换函数</a></li>
<li><a href="#%E5%88%A4%E6%96%AD%E5%AD%98%E5%9C%A8%E7%9A%84%E5%87%BD%E6%95%B0">判断存在的函数</a></li>
<li><a href="#%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0">时间函数</a></li>
<li><a href="#%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0">数学函数</a></li>
<li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0">字符串函数</a></li>
<li><a href="#%E4%BA%BA%E6%80%A7%E5%8C%96%E5%87%BD%E6%95%B0">人性化函数</a></li>
<li><a href="#%E6%9D%A1%E4%BB%B6%E5%87%BD%E6%95%B0">条件函数</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- /TOC -->

<h1 id="TICKscript-Lambda表达式" class="article-heading"><a href="#TICKscript-Lambda表达式" class="headerlink" title="TICKscript Lambda表达式"></a>TICKscript Lambda表达式<a class="article-anchor" href="#TICKscript-Lambda表达式" aria-hidden="true"></a></h1><p><a target="_blank" rel="noopener" href="https://docs.influxdata.com/kapacitor/v1.5/tick/expr/">Lambda表达式官方帮助</a></p>
<p><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/113126.html?spm=a2c4g.11174283.6.740.529f77a2ijwJ6I#Transformations">函数帮助</a></p>
<h2 id="概述" class="article-heading"><a href="#概述" class="headerlink" title="概述"></a>概述<a class="article-anchor" href="#概述" aria-hidden="true"></a></h2><p>TICKscript使用lambda表达式定义数据点的转换，并定义充当过滤器的布尔条件。</p>
<h3 id="简介" class="article-heading"><a href="#简介" class="headerlink" title="简介"></a>简介<a class="article-anchor" href="#简介" aria-hidden="true"></a></h3><p>Lambda表达式包含：</p>
<ul>
<li>数学运算</li>
<li>布尔运算</li>
<li>内部函数调用</li>
<li>或三者的组合</li>
</ul>
<p>TICKscript尝试类似于InfluxQL，因为您在InfluxQL WHERE子句中使用的大多数表达式将作为TICKscript中的表达式使用，但具有自己的语法：</p>
<ul>
<li>lambda表达式都以关键字<code>lambda:</code>开头。</li>
<li>所有<code>字段Field</code>或<code>标记Tag</code> 的标识符必须加双引号。</li>
<li>相等的比较运算符为<code>==</code>不是<code>=</code>。</li>
</ul>
<h3 id="内置函数" class="article-heading"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数<a class="article-anchor" href="#内置函数" aria-hidden="true"></a></h3><p>内置函数分为：</p>
<table>
<thead>
<tr>
<th>内置函数</th>
<th></th>
<th></th>
<th>数量</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://docs.influxdata.com/kapacitor/v1.5/tick/expr/#stateful-functions">Stateful functions</a></td>
<td>有状态函数</td>
<td></td>
<td><code>3</code></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://docs.influxdata.com/kapacitor/v1.5/tick/expr/#stateless-functions">Stateless functions</a></td>
<td>无状态函数</td>
<td></td>
<td><code>78</code></td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://docs.influxdata.com/kapacitor/v1.5/tick/expr/#type-conversion-functions">Type conversion functions</a></td>
<td>类型转换函数</td>
<td><code>5</code></td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://docs.influxdata.com/kapacitor/v1.5/tick/expr/#existence">Existence</a></td>
<td>存在函数</td>
<td><code>1</code></td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://docs.influxdata.com/kapacitor/v1.5/tick/expr/#time-functions">Time functions</a></td>
<td>时间函数</td>
<td><code>7</code></td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://docs.influxdata.com/kapacitor/v1.5/tick/expr/#math-functions">Math functions</a></td>
<td>数学函数</td>
<td><code>42</code></td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://docs.influxdata.com/kapacitor/v1.5/tick/expr/#string-functions">String functions</a></td>
<td>字符串函数</td>
<td><code>21</code></td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://docs.influxdata.com/kapacitor/v1.5/tick/expr/#human-string-functions">Human string functions</a></td>
<td>人性化函数</td>
<td><code>1</code></td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://docs.influxdata.com/kapacitor/v1.5/tick/expr/#conditional-functions">Conditional functions</a></td>
<td>条件函数</td>
<td><code>1</code></td>
</tr>
</tbody></table>
<h2 id="有状态函数" class="article-heading"><a href="#有状态函数" class="headerlink" title="有状态函数"></a>有状态函数<a class="article-anchor" href="#有状态函数" aria-hidden="true"></a></h2><table>
<thead>
<tr>
<th align="left">No.</th>
<th align="left">函数</th>
<th align="left">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><code>count()</code></td>
<td align="left"><code>int64</code></td>
<td align="left">返回表达式的计算次数</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><code>sigma(value )</code></td>
<td align="left"><code>float64</code></td>
<td align="left">计算给定值远离运行平均值的标准偏差数。每次评估表达式时，都会更新运行平均值和标准差。</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><code>spread(value )</code></td>
<td align="left"><code>float64</code></td>
<td align="left">计算传递给它的所有值的运行范围。范围是收到的最大值和最小值之间的差异。</td>
</tr>
</tbody></table>
<h3 id="sigma可用于定义强大的告警" class="article-heading"><a href="#sigma可用于定义强大的告警" class="headerlink" title="sigma可用于定义强大的告警"></a><code>sigma</code>可用于定义强大的告警<a class="article-anchor" href="#sigma可用于定义强大的告警" aria-hidden="true"></a></h3><p>每次计算表达式时，它都会更新正在运行的统计信息，然后返回偏差。</p>
<p><code>sigma("value") &gt; 3.0 </code>表示评估收到的数据点流的平均值的标准偏差：</p>
<ol>
<li>如果小于等于 3.0，则返回 <code>False</code>；</li>
<li>如果超过3.0，则返回<code>True</code>。</li>
</ol>
<p>这样的表达式可以在TICKscript内部使用来定义强大的警报。</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">stream</span><br><span class="line">    |<span class="title function_">from</span>()</span><br><span class="line">    ...</span><br><span class="line">    |<span class="title function_">alert</span>()</span><br><span class="line">        <span class="comment">// use an expression to define when an alert should go critical.</span></span><br><span class="line">        .<span class="title function_">crit</span>(<span class="attr">lambda</span>: <span class="title function_">sigma</span>(<span class="string">"value"</span>) &gt; <span class="number">3.0</span>)</span><br></pre></td></tr></tbody></table></figure>

<h4 id="知识点-平均偏差" class="article-heading"><a href="#知识点-平均偏差" class="headerlink" title="知识点-平均偏差"></a>知识点-平均偏差<a class="article-anchor" href="#知识点-平均偏差" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%B9%B3%E5%9D%87%E5%81%8F%E5%B7%AE/11042506">什么是平均偏差？</a></p>
<blockquote>
<p>平均偏差是数列中各项数值与其算术平均数的离差绝对值的算术平均数。平均偏差是用来测定数列中各项数值对其平均数离势程度的一种尺度。平均偏差可分为简单平均偏差和加权平均偏差。</p>
</blockquote>
<p><strong>定义</strong></p>
<p>在统计中，如果要反映出所有原数据间的差异，就要在各原数据之间进行差异比较，当原数据较多时，进行两两比较就很麻烦，因此需要找到一个共同的比较标准，取每个原数据值与标准值进行比较。这个标准值就是算数平均数。</p>
<p>平均偏差就是每个原数据值与算数平均数之差的绝对值的均值，用符号A.D.(average deviation)表示。平均偏差是一种平均离差。离差是总体各单位的标志值与算术平均数之差。因离差和为零，离差的平均数不能将离差和除以离差的个数求得，而必须将离差取绝对数来消除正负号。</p>
<p>平均偏差是反映各标志值与算术平均数之间的平均差异。平均偏差越大，表明各标志值与算术平均数的差异程度越大，该算术平均数的代表性就越小；平均偏差越小，表明各标志值与算术平均数的差异程度越小，该算术平均数的代表性就越大。</p>
<p>平均偏差又有简单平均偏差和加权平均偏差之分。</p>
<p><strong>计算</strong></p>
<ol>
<li>简单平均偏差<br>如果原数据未分组，则计算平均偏差的公式为：<br>$$<br>A.D. =<br>\frac{\sum\mid x-\overline x  \mid}{n}<br>$$<br>该式称为简单平均偏差。</li>
</ol>
<p>举例：计算cpu每个点的平均偏差值 <code>10 11 9 8 12 11</code></p>
<ul>
<li>第一个点的值为10，平均偏差为<code>0</code></li>
<li>第二个点的值为11，平均偏差为<code>0.5</code></li>
<li>第三个点的值为9，平均偏差为<code>0.82</code></li>
<li>第四个点的值为8，平均偏差为<code>1.12</code></li>
<li>第五个点的值为12，平均偏差为<code>1.41</code></li>
<li>第六个点的值为11，平均偏差为<code>1.34</code></li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">* 计算平均值</span><br><span class="line">* 计算每个点与平均值的差值的绝对值</span><br><span class="line">* 计算差值的和</span><br><span class="line">* 差值和除以总次数</span><br></pre></td></tr></tbody></table></figure>

<p><strong>python计算脚本</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cal_mean_std</span>(<span class="params">sum_list_in</span>):</span><br><span class="line">    <span class="comment"># type: (<span class="built_in">list</span>) -&gt; <span class="built_in">tuple</span></span></span><br><span class="line">    N = sum_list_in.__len__()</span><br><span class="line">    narray = numpy.array(sum_list_in)</span><br><span class="line">    <span class="built_in">sum</span> = narray.<span class="built_in">sum</span>()</span><br><span class="line">    mean = <span class="built_in">sum</span> / N</span><br><span class="line"></span><br><span class="line">    narray_dev = narray - mean</span><br><span class="line">    narray_dev = narray_dev * narray_dev</span><br><span class="line">    sum_dev = narray_dev.<span class="built_in">sum</span>()</span><br><span class="line">    DEV = <span class="built_in">float</span>(sum_dev) / <span class="built_in">float</span>(N)</span><br><span class="line">    STDEV = numpy.math.sqrt(DEV)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">round</span>(mean,<span class="number">2</span>), <span class="built_in">round</span>(DEV,<span class="number">2</span>), <span class="built_in">round</span>(STDEV,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sum_list_in = [<span class="number">10</span>,<span class="number">11</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">12</span>,<span class="number">11</span>]</span><br><span class="line">mean, DEV, STDEV=cal_mean_std(sum_list_in)</span><br><span class="line"><span class="built_in">print</span>(mean, DEV, STDEV)</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>mean 平均值</li>
<li>dev 方差</li>
<li>stdev 标准差</li>
</ul>
<ol start="2">
<li>加权平均偏差<br>在分组情况下，平均偏差的计算公式为：该式称为加权平均偏差。<br>$$<br>A.D. =<br>\frac{\sum\mid x-\overline x  \mid f}{n f}<br>$$</li>
</ol>
<h2 id="无状态函数" class="article-heading"><a href="#无状态函数" class="headerlink" title="无状态函数"></a>无状态函数<a class="article-anchor" href="#无状态函数" aria-hidden="true"></a></h2><h3 id="类型转换函数" class="article-heading"><a href="#类型转换函数" class="headerlink" title="类型转换函数"></a>类型转换函数<a class="article-anchor" href="#类型转换函数" aria-hidden="true"></a></h3><table>
<thead>
<tr>
<th align="left">No.</th>
<th align="left">函数</th>
<th align="left">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><code>bool(value)</code></td>
<td align="left"><code>True/False</code></td>
<td align="left">将字符串和数字转换为布尔值</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><code>int(value)</code></td>
<td align="left"><code>int64</code></td>
<td align="left">强制将字符串或float64转换为int64</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><code>float(value)</code></td>
<td align="left"><code>float64</code></td>
<td align="left">制将字符串或int64转换为float64</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><code>string(value)</code></td>
<td align="left"><code>string</code></td>
<td align="left">将bool，int64或float64转换为字符串</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><code>duration(value int64|float64, unit duration)</code></td>
<td align="left"><code>duration</code></td>
<td align="left">将int64或float64转换为持续时间</td>
</tr>
</tbody></table>
<h3 id="判断存在的函数" class="article-heading"><a href="#判断存在的函数" class="headerlink" title="判断存在的函数"></a>判断存在的函数<a class="article-anchor" href="#判断存在的函数" aria-hidden="true"></a></h3><table>
<thead>
<tr>
<th align="left">No.</th>
<th align="left">函数</th>
<th align="left">返回值</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><code>|where(lambda: isPresent("myfield"))</code></td>
<td align="left"><code>True/False</code></td>
<td align="left">判断<code>myfield</code>是否存在</td>
</tr>
</tbody></table>
<p>该函数在<code>where</code>节点中使用，根据指定的字段或标记键是否存在返回布尔值。用于过滤数据这是缺少指定的字段或标记。</p>
<h3 id="时间函数" class="article-heading"><a href="#时间函数" class="headerlink" title="时间函数"></a>时间函数<a class="article-anchor" href="#时间函数" aria-hidden="true"></a></h3><table>
<thead>
<tr>
<th>No.</th>
<th>函数</th>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><code>unixNano(t time) </code></td>
<td><code>int64</code></td>
<td>Unix时间</td>
</tr>
<tr>
<td>2</td>
<td><code>minute(t time) </code></td>
<td><code>int64</code></td>
<td>分钟</td>
</tr>
<tr>
<td>3</td>
<td><code>hour(t time) </code></td>
<td><code>int64</code></td>
<td>小时</td>
</tr>
<tr>
<td>4</td>
<td><code>weekday(t time) </code></td>
<td><code>int64</code></td>
<td>周 <code> [0,6], 0 is Sunday</code></td>
</tr>
<tr>
<td>5</td>
<td><code>day(t time) </code></td>
<td><code>int64</code></td>
<td>the day within the month: range [1,31]</td>
</tr>
<tr>
<td>6</td>
<td><code>month(t time) </code></td>
<td><code>int64</code></td>
<td>the month within the year: range [1,12]</td>
</tr>
<tr>
<td>7</td>
<td><code>year(t time) </code></td>
<td><code>int64</code></td>
<td>年</td>
</tr>
</tbody></table>
<p>例如</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">lambda</span>: <span class="title function_">hour</span>(<span class="string">"time"</span>) &gt;= <span class="number">9</span> <span class="variable constant_">AND</span> <span class="title function_">hour</span>(<span class="string">"time"</span>) &lt; <span class="number">19</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="数学函数" class="article-heading"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数<a class="article-anchor" href="#数学函数" aria-hidden="true"></a></h3><table>
<thead>
<tr>
<th>No.</th>
<th>函数</th>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Abs">abs(x)</a></td>
<td><code>float64</code></td>
<td>Abs返回<code>x</code>的绝对值。</td>
</tr>
<tr>
<td>2</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Acos">acos(x)</a></td>
<td><code>float64</code></td>
<td>Acos以弧度为单位返回<code>x</code>的反余弦。</td>
</tr>
<tr>
<td>3</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Acosh">acosh(x)</a></td>
<td><code>float64</code></td>
<td>Acosh返回x`的反双曲余弦值。</td>
</tr>
<tr>
<td>4</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Asin">asin(x)</a></td>
<td><code>float64</code></td>
<td>Asin以弧度为单位返回<code>x</code>的反正弦值。</td>
</tr>
<tr>
<td>5</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Asinh">asinh(x)</a></td>
<td><code>float64</code></td>
<td>Asinh返回<code>x</code>的反双曲正弦值。</td>
</tr>
<tr>
<td>6</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Atan">atan(x)</a></td>
<td><code>float64</code></td>
<td>Atan以弧度为单位返回<code>x</code>的反正切值。</td>
</tr>
<tr>
<td>7</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Atan2">atan2(y,x)</a></td>
<td><code>float64</code></td>
<td>Atan2返回<code>y / x</code>的反正切，使用二者的符号确定返回值的象限。</td>
</tr>
<tr>
<td>8</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Atanh">atanh(x)</a></td>
<td><code>float64</code></td>
<td>Atanh返回<code>x</code>的反双曲正切。</td>
</tr>
<tr>
<td>9</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Cbrt">cbrt(x)</a></td>
<td><code>float64</code></td>
<td>Cbrt返回<code>x</code>的立方根。</td>
</tr>
<tr>
<td>10</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Ceil">ceil(x)</a></td>
<td><code>float64</code></td>
<td>Ceil返回大于或等于<code>x</code>的最小整数值。</td>
</tr>
<tr>
<td>11</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Cos">cos(x)</a></td>
<td><code>float64</code></td>
<td>Cos返回弧度参数<code>x</code>的余弦值。</td>
</tr>
<tr>
<td>12</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Cosh">cosh(x)</a></td>
<td><code>float64</code></td>
<td>Cosh返回<code>x</code>的双曲余弦值。</td>
</tr>
<tr>
<td>13</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Erf">erf(x)</a></td>
<td><code>float64</code></td>
<td>Erf返回<code>x</code>的错误函数。</td>
</tr>
<tr>
<td>14</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Erfc">erfc(x)</a></td>
<td><code>float64</code></td>
<td>Erfc返回<code>x</code>的互补误差函数。</td>
</tr>
<tr>
<td>15</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Exp">exp(x)</a></td>
<td><code>float64</code></td>
<td>Exp返回<code>e ** x</code>，<code>x</code>的<code>base-e</code>指数。</td>
</tr>
<tr>
<td>16</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Exp2">exp2(x)</a></td>
<td><code>float64</code></td>
<td>Exp2返回<code>2 ** x</code>，<code>x</code>的基数为<code>2</code>的指数。</td>
</tr>
<tr>
<td>17</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Expm1">expm1(x)</a></td>
<td><code>float64</code></td>
<td>Expm1返回<code>e ** x - 1</code>，<code>x</code>的基数为<code>e</code>的指数减<code>1</code>.当<code>x</code>接近零时，它比<code>Exp(x）-1</code>更准确。</td>
</tr>
<tr>
<td>18</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Floor">floor(x)</a></td>
<td><code>float64</code></td>
<td>Floor返回小于或等于<code>x</code>的最大整数值。</td>
</tr>
<tr>
<td>19</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Gamma">gamma(x)</a></td>
<td><code>float64</code></td>
<td>Gamma返回<code>x</code>的<code>Gamma</code>函数。</td>
</tr>
<tr>
<td>20</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Hypot">hypot(p,q)</a></td>
<td><code>float64</code></td>
<td>Hypot返回<code>Sqrt(p * p + q * q）</code>，注意避免不必要的溢出和下溢。</td>
</tr>
<tr>
<td>21</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#J0">j0(x)</a></td>
<td><code>float64</code></td>
<td>J0返回第一类的零阶贝塞尔函数。</td>
</tr>
<tr>
<td>22</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#J1">j1(x)</a></td>
<td><code>float64</code></td>
<td>J1返回第一类的一阶贝塞尔函数。</td>
</tr>
<tr>
<td>23</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Jn">jn（n int64，x)</a></td>
<td><code>float64</code></td>
<td>Jn返回第一种order-n Bessel函数。</td>
</tr>
<tr>
<td>24</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Log">log(x)</a></td>
<td><code>float64</code></td>
<td>Log返回<code>x</code>的自然对数。</td>
</tr>
<tr>
<td>25</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Log10">log10(x)</a></td>
<td><code>float64</code></td>
<td>Log10返回<code>x</code>的十进制对数。</td>
</tr>
<tr>
<td>26</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Log1p">log1p(x)</a></td>
<td><code>float64</code></td>
<td>Log1p返回<code>1</code>的自然对数加上其参数<code>x</code>。当<code>x</code>接近零时，它比<code>Log(1 + x）</code>更准确。</td>
</tr>
<tr>
<td>27</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Log2">log2(x)</a></td>
<td><code>float64</code></td>
<td>Log2返回<code>x</code>的二进制对数。</td>
</tr>
<tr>
<td>28</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Logb">logb(x)</a></td>
<td><code>float64</code></td>
<td>Logb返回<code>x</code>的二进制指数。</td>
</tr>
<tr>
<td>29</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Max">max(x,y)</a></td>
<td><code>float64</code></td>
<td>Max返回<code>x</code>或<code>y</code>中较大的一个。</td>
</tr>
<tr>
<td>30</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Min">min(x,y)</a></td>
<td><code>float64</code></td>
<td>Min返回<code>x</code>或<code>y</code>中较小的一个。</td>
</tr>
<tr>
<td>31</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Mod">mod(x,y)</a></td>
<td><code>float64</code></td>
<td>Mod返回<code>x / y</code>的浮点余数。结果的大小小于y，其符号与x的符号一致。</td>
</tr>
<tr>
<td>32</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Pow">pow(x,y)</a></td>
<td><code>float64</code></td>
<td>Pow返回<code>x ** y</code>，y的base-x指数。</td>
</tr>
<tr>
<td>33</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Pow10">pow10(x int64</a></td>
<td><code>float64</code></td>
<td>Pow10返回<code>10 ** e</code>，<code>e</code>的基数为<code>10</code>的指数。</td>
</tr>
<tr>
<td>34</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Sin">sin(x)</a></td>
<td><code>float64</code></td>
<td>Sin返回弧度参数<code>x</code>的正弦值。</td>
</tr>
<tr>
<td>35</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Sinh">sinh(x)</a></td>
<td><code>float64</code></td>
<td>Sinh返回<code>x</code>的双曲正弦值。</td>
</tr>
<tr>
<td>36</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Sqrt">sqrt(x)</a></td>
<td><code>float64</code></td>
<td>Sqrt返回<code>x</code>的平方根。</td>
</tr>
<tr>
<td>37</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Tan">tan(x)</a></td>
<td><code>float64</code></td>
<td>Tan返回弧度参数<code>x</code>的正切值。</td>
</tr>
<tr>
<td>38</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Tanh">tanh(x)</a></td>
<td><code>float64</code></td>
<td>Tanh返回<code>x</code>的双曲正切。</td>
</tr>
<tr>
<td>39</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Trunc">trunc(x)</a></td>
<td><code>float64</code></td>
<td>Trunc返回<code>x</code>的整数值。</td>
</tr>
<tr>
<td>40</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Y0">y0(x)</a></td>
<td><code>float64</code></td>
<td>Y0返回第二种零阶贝塞尔函数。</td>
</tr>
<tr>
<td>41</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Y1">y1(x)</a></td>
<td><code>float64</code></td>
<td>Y1返回第二种顺序一贝塞尔函数。</td>
</tr>
<tr>
<td>42</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/math/#Yn">yn(n int64,x)</a></td>
<td><code>float64</code></td>
<td>Yn返回第二种order-n 贝塞尔函数。</td>
</tr>
</tbody></table>
<h3 id="字符串函数" class="article-heading"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数<a class="article-anchor" href="#字符串函数" aria-hidden="true"></a></h3><table>
<thead>
<tr>
<th>No.</th>
<th>函数</th>
<th>返回值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#Contains">strContains(s, substr)</a></td>
<td><code>bool</code></td>
<td>StrContains报告<code>substr</code>是否在<code>s</code>内。</td>
</tr>
<tr>
<td>2</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#ContainsAny">strContainsAny(s, chars)</a></td>
<td><code>bool</code></td>
<td>StrContainsAny报告字符中的任何<code>Unicode</code>代码点是否在<code>s</code>内。</td>
</tr>
<tr>
<td>3</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#Count">strCount(s, sep)</a></td>
<td><code>int64</code></td>
<td>StrCount计算<code>s</code>中非重叠<code>sep</code>实例的数量。如果<code>sep</code>是空字符串，则<code>Count</code>返回<code>1 + s</code>中的<code>Unicode</code>代码点数。</td>
</tr>
<tr>
<td>4</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#HasPrefix">strHasPrefix(s, prefix)</a></td>
<td><code>bool</code></td>
<td>StrHasPrefix测试字符串<code>s</code>是否以<code>prefix</code>开头。</td>
</tr>
<tr>
<td>5</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#HasSuffix">strHasSuffix(s, suffix)</a></td>
<td><code>bool</code></td>
<td>StrHasSuffix测试字符串<code>s</code>是否以后<code>suffix</code>缀结尾。</td>
</tr>
<tr>
<td>6</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#Index">strIndex(s, sep)</a></td>
<td><code>int64</code></td>
<td>StrIndex返回<code>s</code>中第一个<code>sep</code>实例的索引，如果<code>s</code>中不存在<code>sep</code>，则返回<code>-1</code>。</td>
</tr>
<tr>
<td>7</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#IndexAny">strIndexAny(s, chars)</a></td>
<td><code>int64</code></td>
<td>StrIndexAny从<code>1</code>中的字符返回任何<code>Unicode</code>代码点的第一个实例的索引，如果<code>s</code>中没有来自<code>chars</code>的<code>Unicode</code>代码点，则返回<code>-1</code>。</td>
</tr>
<tr>
<td>8</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#LastIndex">strLastIndex(s, sep)</a></td>
<td><code>int64</code></td>
<td>StrLastIndex返回<code>s</code>中最后一个<code>sep</code>实例的索引，如果<code>s</code>中不存在<code>sep</code>，则返回<code>-1</code>。</td>
</tr>
<tr>
<td>9</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#LastIndexAny">strLastIndexAny(s, chars)</a></td>
<td><code>int64</code></td>
<td>StrLastIndexAny从<code>s</code>中的字符返回任何<code>Unicode</code>代码点的最后一个实例的索引，如果s中没有来自<code>chars</code>的<code>Unicode</code>代码点，则返回<code>-1</code>。</td>
</tr>
<tr>
<td>10</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/ref/spec#Length_and_capacity">strLength(s)</a></td>
<td><code>int64</code></td>
<td>StrLength返回字符串的长度。</td>
</tr>
<tr>
<td>11</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#Replace">strReplace(s, old, new), n int64</a></td>
<td><code>string</code></td>
<td>StrReplace返回字符串<code>s</code>的副本，其中前n个非重叠实例由<code>new</code>替换。</td>
</tr>
<tr>
<td>12</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/ref/spec#Index_expressions">strSubstring(s), start, stop int64</a></td>
<td><code>string</code></td>
<td>StrSubstring根据给定的索引返回一个子字符串，<code>strSubstring(str,start,stop)</code>相当于Go中的<code>str [start：stop]</code>。</td>
</tr>
<tr>
<td>13</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#ToLower">strToLower(s)</a></td>
<td><code>string</code></td>
<td>StrToLower返回字符串s的副本，其中所有<code>Unicode</code>字母都映射到它们的小写字母。</td>
</tr>
<tr>
<td>14</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#ToUpper">strToUpper(s)</a></td>
<td><code>string</code></td>
<td>StrToUpper返回字符串s的副本，其中所有<code>Unicode</code>字母都映射到它们的大写字母。</td>
</tr>
<tr>
<td>15</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#Trim">strTrim(s, cutset)</a></td>
<td><code>string</code></td>
<td>StrTrim返回字符串s的一个片段，其中包含<code>cutset</code>中包含的所有前导和尾随<code>Unicode</code>代码点。</td>
</tr>
<tr>
<td>16</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#TrimLeft">strTrimLeft(s, cutset)</a></td>
<td><code>string</code></td>
<td>StrTrimLeft返回字符串<code>s</code>的一个片段，其中包含<code>cutset</code>中包含的所有前导<code>Unicode</code>代码点。</td>
</tr>
<tr>
<td>17</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#TrimPrefix">strTrimPrefix(s, prefix)</a></td>
<td><code>string</code></td>
<td>StrTrimPrefix返回<code>s</code>而没有提供的前导前缀字符串。如果<code>s</code>不以<code>prefix</code>开头，则返回s不变。</td>
</tr>
<tr>
<td>18</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#TrimRight">strTrimRight(s, cutset)</a></td>
<td><code>string</code></td>
<td>StrTrimRight返回字符串<code>s</code>的一个切片，并删除了<code>cutset</code>中包含的所有尾随<code>Unicode</code>代码点。</td>
</tr>
<tr>
<td>19</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#TrimSpace">strTrimSpace(s)</a></td>
<td><code>string</code></td>
<td>StrTrimSpace返回字符串<code>s</code>的一部分，删除所有前导和尾随空格，如<code>Unicode</code>所定义。</td>
</tr>
<tr>
<td>20</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/strings/#TrimSuffix">strTrimSuffix(s, suffix)</a></td>
<td><code>string</code></td>
<td>StrTrimSuffix返回<code>s</code>而没有提供的尾随后缀字符串。如果<code>s</code>不以后缀结尾，则<code>s</code>保持不变。</td>
</tr>
<tr>
<td>21</td>
<td><a target="_blank" rel="noopener" href="https://golang.org/pkg/regexp/#Regexp.ReplaceAllString">regexReplace(r regex, s, pattern)</a></td>
<td><code>string</code></td>
<td>RegexReplace将输入字符串中正则表达式的匹配替换为输出字符串。例如<code>regexReplace(/a(b*)c/, ‘abbbc’, ‘group is $1’) -&gt; ‘group is bbb’</code>。如果未找到匹配项，则返回原始字符串。</td>
</tr>
</tbody></table>
<h3 id="人性化函数" class="article-heading"><a href="#人性化函数" class="headerlink" title="人性化函数"></a>人性化函数<a class="article-anchor" href="#人性化函数" aria-hidden="true"></a></h3><table>
<thead>
<tr>
<th align="left">No.</th>
<th align="left">函数</th>
<th align="left">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><code>humanBytes(value)</code></td>
<td align="left"><code>string</code></td>
<td align="left">将具有单位字节的<code>int64</code>或<code>float64</code>转换为表示字节数的人类可读字符串。</td>
</tr>
</tbody></table>
<h3 id="条件函数" class="article-heading"><a href="#条件函数" class="headerlink" title="条件函数"></a>条件函数<a class="article-anchor" href="#条件函数" aria-hidden="true"></a></h3><table>
<thead>
<tr>
<th align="left">No.</th>
<th align="left">函数</th>
<th align="left">返回值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><code>if(condition, true expression, false expression)</code></td>
<td align="left"><code>True/False</code></td>
<td align="left">根据第一个参数的值返回其操作数的结果。第二个和第三个参数必须返回相同的类型。</td>
</tr>
</tbody></table>
<p>例：</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">|<span class="built_in">eval</span>(<span class="attr">lambda</span>: <span class="keyword">if</span>(<span class="string">"field"</span> &gt; threshold <span class="variable constant_">AND</span> <span class="string">"field"</span> != <span class="number">0</span>, <span class="string">'true'</span>, <span class="string">'false'</span>))</span><br><span class="line">    .<span class="title function_">as</span>(<span class="string">'value'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p><code>value</code>上例中字段的值将是字符串，<code>true</code>或者<code>false</code>取决于作为第一个参数传递的条件。</p>
<p>该<code>if</code>函数的返回类型相同类型作为其第二个和第三个参数。</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(condition, <span class="literal">true</span> expression, <span class="literal">false</span> expression)</span><br></pre></td></tr></tbody></table></figure>
</body></html>
              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2025-10-22T08:49:11.619Z" itemprop="dateModified">Last updated: 2025-10-22</time>
                <a href="/linux/0_linux_base/index.html" class="article-footer-next" title="概览"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <div id="carbonads" class="carbonads" style="text-align:center;font-family:'Noto Sans SC',sans-serif;">
  <span class="carbon-wrap">
    <a href="https://github.com/booboowei"
       class="carbon-img"
       target="_blank"
       rel="noopener sponsored">
      <img
        src="https://avatars2.githubusercontent.com/u/21328020?s=460&u=88cf6127c32932188f936d05636b7b0d36783ee1&v=4"
        alt="ads via Carbon"
        border="0"
        style="width:80px;height:80px;border-radius:50%;max-width:130px;"
      />
    </a>
    <a href="/about/"
       class="carbon-text"
       target="_blank"
       rel="noopener sponsored"
       style="display:block;margin-top:4px;">
      欢迎光临
    </a>
  </span>

  <!-- 日期显示 -->
  <div id="today-date" style="margin-top:12px;background:#f5f5f5;border-radius:12px;padding:10px 0;">
    <div id="weekday" style="font-size:14px;color:#555;"></div>
    <div id="day" style="font-size:36px;font-weight:bold;color:#000;"></div>
    <div id="ym" style="font-size:14px;color:#555;"></div>
    <div id="lunar" style="font-size:13px;color:#888;margin-top:4px;"></div>
  </div>

<script>
(function(){
  const now = new Date();
  const weekdays = ["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];
  const year = now.getFullYear();
  const month = now.getMonth() + 1;
  const day = now.getDate();

  function toChineseNumber(num) {
    const map = {0:'〇',1:'一',2:'二',3:'三',4:'四',5:'五',6:'六',7:'七',8:'八',9:'九'};
    return String(num).split('').map(n=>map[n]).join('');
  }

  // 优先使用 Intl (现代浏览器支持农历/中国传统历)
  function getLunarByIntl(date) {
    try {
      // 获取农历的月（长格式，如 "九月" 或 "闰八月"），和日（数字）
      const monthFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { month: 'long' });
      const dayFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { day: 'numeric' });
      const lunarMonthText = monthFormatter.format(date); // 例如 "九月" 或 "闰八月"
      const lunarDayText = dayFormatter.format(date);     // 例如 "三十" 或 "初一"
      // 有的浏览器返回的 month 会包含 "闰" 字样，也可能返回汉字月份，需要适配
      return `农历${lunarMonthText}${lunarDayText}`;
    } catch (e) {
      return null; // 表示不支持 Intl 农历
    }
  }

  // 回退：简易本地农历算法（仅作兼容，适用于1900-2049范围）
  const lunarInfo = [0x04bd8,0x04ae0,0x0a570,0x054d5,0x0d260,0x0d950,0x16554,0x056a0,0x09ad0,0x055d2,
                     0x04ae0,0x0a5b6,0x0a4d0,0x0d250,0x1d255,0x0b540,0x0d6a0,0x0ada2,0x095b0,0x14977,
                     0x04970,0x0a4b0,0x0b4b5,0x06a50,0x06d40,0x1ab54,0x02b60,0x09570,0x052f2,0x04970,
                     0x06566,0x0d4a0,0x0ea50,0x06e95,0x05ad0,0x02b60,0x186e3,0x092e0,0x1c8d7,0x0c950,
                     0x0d4a0,0x1d8a6,0x0b550,0x056a0,0x1a5b4,0x025d0,0x092d0,0x0d2b2,0x0a950,0x0b557,
                     0x06ca0,0x0b550,0x15355,0x04da0,0x0a5b0,0x14573,0x052b0,0x0a9a8,0x0e950,0x06aa0,
                     0x0aea6,0x0ab50,0x04b60,0x0aae4,0x0a570,0x05260,0x0f263,0x0d950,0x05b57,0x056a0,
                     0x096d0,0x04dd5,0x04ad0,0x0a4d0,0x0d4d4,0x0d250,0x0d558,0x0b540,0x0b5a0,0x195a6,
                     0x095b0,0x049b0,0x0a974,0x0a4b0,0x0b27a,0x06a50,0x06d40,0x0af46,0x0ab60,0x09570,
                     0x04af5,0x04970,0x064b0,0x074a3,0x0ea50,0x06b58,0x05ac0,0x0ab60,0x096d5,0x092e0];

  function lYearDays(y){let i,sum=348;for(i=0x8000;i>0x8;i>>=1)sum+=(lunarInfo[y-1900]&i)?1:0;return sum+leapDays(y);}
  function leapDays(y){if(leapMonth(y))return(lunarInfo[y-1900]&0x10000)?30:29;else return 0;}
  function leapMonth(y){return lunarInfo[y-1900]&0xf;}
  function monthDays(y,m){return(lunarInfo[y-1900]&(0x10000>>m))?30:29;}

  function LunarFallback(objDate){
    let i, leap=0, temp=0;
    const baseDate = new Date(1900,0,31);
    let offset = Math.floor((objDate - baseDate) / 86400000);
    let year = 1900;
    // 年循环
    for (i = 1900; i < 2050 && offset > 0; i++) {
      temp = lYearDays(i);
      offset -= temp;
      year = i;
    }
    if (offset < 0) { offset += temp; year--; }
    leap = leapMonth(year);
    let isLeap = false;
    let month = 1;
    // 月循环
    for (i = 1; i <= 12 && offset > 0; i++) {
      if (leap > 0 && i === (leap + 1) && !isLeap) {
        // 进入闰月
        temp = leapDays(year);
        isLeap = true;
        i--; // stay on same month number but mark leap
      } else {
        temp = monthDays(year, i);
      }
      offset -= temp;
      if (isLeap && i === leap) { isLeap = false; }
      if (!isLeap) month++; // 非闰月时才推进月份计数
    }
    if (offset === 0 && leap > 0 && month === leap + 1) {
      // 特殊：当正好落在闰月第一天
      // month 保持，isLeap = true
    }
    if (offset < 0) { offset += temp; month--; }
    const day = offset + 1;
    // 修正 month 边界
    if (month <= 0) month = 1;
    return { year, month, day, isLeap: !!isLeap };
  }

  function getLunarDateStringFallback(y,m,d){
    const cDay=["","初一","初二","初三","初四","初五","初六","初七","初八","初九","初十",
                "十一","十二","十三","十四","十五","十六","十七","十八","十九","二十",
                "廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"];
    const cMon=["","正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","冬月","腊月"];
    const lunar = LunarFallback(new Date(y, m-1, d));
    return `农历${lunar.isLeap ? '闰' : ''}${cMon[lunar.month]}${cDay[lunar.day]}`;
  }

  // 先尝试 Intl 方法
  let lunarText = getLunarByIntl(now);
  if (!lunarText) {
    // 回退本地算法
    lunarText = getLunarDateStringFallback(year, month, day);
  }

  // 输出到页面（公历 + 农历）
  document.getElementById("weekday").textContent = weekdays[now.getDay()];
  document.getElementById("day").textContent = day;
  document.getElementById("ym").textContent = `${toChineseNumber(year)}年${toChineseNumber(month)}月`;
  document.getElementById("lunar").textContent = lunarText;
})();
</script>


              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#TICKscript-Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">TICKscript Lambda表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0"><span class="toc-text">内置函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%89%E7%8A%B6%E6%80%81%E5%87%BD%E6%95%B0"><span class="toc-text">有状态函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sigma%E5%8F%AF%E7%94%A8%E4%BA%8E%E5%AE%9A%E4%B9%89%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%91%8A%E8%AD%A6"><span class="toc-text">sigma可用于定义强大的告警</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9-%E5%B9%B3%E5%9D%87%E5%81%8F%E5%B7%AE"><span class="toc-text">知识点-平均偏差</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0%E7%8A%B6%E6%80%81%E5%87%BD%E6%95%B0"><span class="toc-text">无状态函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0"><span class="toc-text">类型转换函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E5%AD%98%E5%9C%A8%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-text">判断存在的函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0"><span class="toc-text">时间函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0"><span class="toc-text">数学函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-text">字符串函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%BA%E6%80%A7%E5%8C%96%E5%87%BD%E6%95%B0"><span class="toc-text">人性化函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E5%87%BD%E6%95%B0"><span class="toc-text">条件函数</span></a></li></ol></li></ol></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">Linux 中级</strong><a href="/linux/0_linux_base/index.html" class="sidebar-link">概览</a><a href="/linux/0_linux_base/booboo_linux_base/index.html" class="sidebar-link">Linux 基础</a><a href="/linux/0_linux_base/booboo_easy_service/index.html" class="sidebar-link">Linux 简易服务</a><a href="/linux/0_linux_base/booboo_bash_shell_scripts/index.html" class="sidebar-link">Linux 脚本编程</a><a href="/linux/0_linux_base/booboo_middle_service/index.html" class="sidebar-link">Linux 进阶</a><strong class="sidebar-title">Linux 日常</strong><a href="/linux/1_linux_dayday/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">Ex-Tools</strong><a href="/linux/2_excellent_tools/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">LAMP</strong><a href="/linux/3_lamp/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">Docker</strong><a href="/linux/4_docker/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">TICK</strong><a href="/linux/5_tick/index.html" class="sidebar-link">概览</a><a href="/linux/5_tick/kapacitor/index.html" class="sidebar-link">Kapacitor</a><strong class="sidebar-title">Devops</strong><a href="/linux/6_devops/index.html" class="sidebar-link">概览</a><a href="/linux/6_devops/bootstrap/index.html" class="sidebar-link">Bootstrap</a><a href="/linux/6_devops/booboo_python/index.html" class="sidebar-link">Python 基础</a><a href="/linux/6_devops/00_python_base/index.html" class="sidebar-link">Python 进阶</a><a href="/linux/6_devops/01_python_net/index.html" class="sidebar-link">Python 网络开发</a><a href="/linux/6_devops/02_python_threads/index.html" class="sidebar-link">Python 并发编程</a><a href="/linux/6_devops/11_flask_admin/index.html" class="sidebar-link">Flask_admin</a><a href="/linux/6_devops/12_mini_project/index.html" class="sidebar-link">迷你小项目</a><strong class="sidebar-title">Git</strong><a href="/linux/7_git/index.html" class="sidebar-link">概览</a><a href="/linux/7_git/Chapter01/index.html" class="sidebar-link">Git 基础</a><a href="/linux/7_git/Chapter02/index.html" class="sidebar-link">Git 常见场景</a><a href="/linux/7_git/Chapter04/index.html" class="sidebar-link">Git 多人协作</a><a href="/linux/7_git/Chapter05/index.html" class="sidebar-link">Git 集成使用禁忌</a><a href="/linux/7_git/Chapter06/index.html" class="sidebar-link">GitHub 初识</a><a href="/linux/7_git/Chapter07/index.html" class="sidebar-link">GitHub 使用</a><a href="/linux/7_git/Chapter03/index.html" class="sidebar-link">Github 同步</a><a href="/linux/7_git/Chapter08/index.html" class="sidebar-link">GitLab 实践</a>
  </div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2025 <a href="https://github.com/BoobooWei" target="_blank">魏亚萍</a><br>
      Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>.<br>
      备案号：沪ICP备2020026043号
    </div>
    <div id="footer-links">
      <a href="https://www.youtube.com/@amyreading2023" class="footer-link" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" 
            alt="YouTube"
            style="height:24px; margin-bottom:-6px;">
      </a>
      <a href="https://github.com/BoobooWei" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="../../../../docs/" class="mobile-nav-link">Hexo</a><a href="../../../../news/" class="mobile-nav-link">News</a><a href="../../../../api/" class="mobile-nav-link">MySQL8.0</a><a href="../../../../database/" class="mobile-nav-link">Database</a><a href="../../../../linux/" class="mobile-nav-link">Linux</a><a href="../../../../cloud/" class="mobile-nav-link">Cloud</a><a href="../../../../singapore/" class="mobile-nav-link">Singapore</a><a href="../../../../amy/" class="mobile-nav-link">AMY</a><a href="../../../../about/" class="mobile-nav-link">About</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/BoobooWei" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">Linux 中级</strong><a href="/linux/0_linux_base/index.html" class="mobile-nav-link">概览</a><a href="/linux/0_linux_base/booboo_linux_base/index.html" class="mobile-nav-link">Linux 基础</a><a href="/linux/0_linux_base/booboo_easy_service/index.html" class="mobile-nav-link">Linux 简易服务</a><a href="/linux/0_linux_base/booboo_bash_shell_scripts/index.html" class="mobile-nav-link">Linux 脚本编程</a><a href="/linux/0_linux_base/booboo_middle_service/index.html" class="mobile-nav-link">Linux 进阶</a><strong class="mobile-nav-title">Linux 日常</strong><a href="/linux/1_linux_dayday/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">Ex-Tools</strong><a href="/linux/2_excellent_tools/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">LAMP</strong><a href="/linux/3_lamp/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">Docker</strong><a href="/linux/4_docker/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">TICK</strong><a href="/linux/5_tick/index.html" class="mobile-nav-link">概览</a><a href="/linux/5_tick/kapacitor/index.html" class="mobile-nav-link">Kapacitor</a><strong class="mobile-nav-title">Devops</strong><a href="/linux/6_devops/index.html" class="mobile-nav-link">概览</a><a href="/linux/6_devops/bootstrap/index.html" class="mobile-nav-link">Bootstrap</a><a href="/linux/6_devops/booboo_python/index.html" class="mobile-nav-link">Python 基础</a><a href="/linux/6_devops/00_python_base/index.html" class="mobile-nav-link">Python 进阶</a><a href="/linux/6_devops/01_python_net/index.html" class="mobile-nav-link">Python 网络开发</a><a href="/linux/6_devops/02_python_threads/index.html" class="mobile-nav-link">Python 并发编程</a><a href="/linux/6_devops/11_flask_admin/index.html" class="mobile-nav-link">Flask_admin</a><a href="/linux/6_devops/12_mini_project/index.html" class="mobile-nav-link">迷你小项目</a><strong class="mobile-nav-title">Git</strong><a href="/linux/7_git/index.html" class="mobile-nav-link">概览</a><a href="/linux/7_git/Chapter01/index.html" class="mobile-nav-link">Git 基础</a><a href="/linux/7_git/Chapter02/index.html" class="mobile-nav-link">Git 常见场景</a><a href="/linux/7_git/Chapter04/index.html" class="mobile-nav-link">Git 多人协作</a><a href="/linux/7_git/Chapter05/index.html" class="mobile-nav-link">Git 集成使用禁忌</a><a href="/linux/7_git/Chapter06/index.html" class="mobile-nav-link">GitHub 初识</a><a href="/linux/7_git/Chapter07/index.html" class="mobile-nav-link">GitHub 使用</a><a href="/linux/7_git/Chapter03/index.html" class="mobile-nav-link">Github 同步</a><a href="/linux/7_git/Chapter08/index.html" class="mobile-nav-link">GitLab 实践</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- Cookie -->
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<!-- build:js build/js/main.js -->

<script src="../../../../js/lang_select.js"></script>


<script src="../../../../js/mobile_nav.js"></script>

<!-- endbuild -->

<!-- Algolia -->
<!--   backup
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript">
docsearch({
  appId: '',
  apiKey: '',
  indexName: '',
  insights: true,
  container: '#docsearch',
  debug: false,
  searchParameters: {
    facetFilters: ['lang:en']
  }
});
</script>
-->

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
document.getElementById('search-input-wrap').classList.add('on');
docsearch({
    apiKey: '',
    indexName: '',
    inputSelector: '#search-input'
});
</script>
</body>
</html>