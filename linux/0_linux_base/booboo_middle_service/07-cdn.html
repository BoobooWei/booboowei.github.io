<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>CDN | BoobooWei</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.toberoot.com/linux/0_linux_base/booboo_middle_service/07-cdn">
  <!-- Alternate links -->
  
    
      
    
    <link rel="alternate" hreflang="x-default" href="http://www.toberoot.com/linux/0_linux_base/booboo_middle_service/07-cdn" />
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="../../../icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="../../../icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="../../../icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="../../../icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="../../../icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="../../../icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="../../../icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="../../../icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="../../../icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="../../../icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="../../../icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="../../../icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="../../../icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="../../../icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="../../../css/navy.css">

  <!-- endbuild -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-lato@0.0.75/index.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="../../../atom.xml" title="BoobooWei" type="application/atom+xml">
  <!-- Open Graph -->
  <meta name="description" content="什么是 CDN随着互联网的高速发展，用户在使用网络的时，对于页面浏览的速度和效果越发的重视。一般而言，让一个用户等待的时间太过漫长，可能会导致实际访问我们站点的用户数量急剧降低，这是任何一家企业公司都不希望看到的事情。 特别是当用户与网站之间的链路被突发的大流量数据拥塞时，对于异地互联网用户急速增加的地区来说，访问质量不良更是一个急待解决的问题。如何才能让各地的用户都能够进行高质量的访问，并尽量减">
<meta property="og:type" content="website">
<meta property="og:title" content="CDN">
<meta property="og:url" content="http://www.toberoot.com/linux/0_linux_base/booboo_middle_service/07-cdn">
<meta property="og:site_name" content="BoobooWei">
<meta property="og:description" content="什么是 CDN随着互联网的高速发展，用户在使用网络的时，对于页面浏览的速度和效果越发的重视。一般而言，让一个用户等待的时间太过漫长，可能会导致实际访问我们站点的用户数量急剧降低，这是任何一家企业公司都不希望看到的事情。 特别是当用户与网站之间的链路被突发的大流量数据拥塞时，对于异地互联网用户急速增加的地区来说，访问质量不良更是一个急待解决的问题。如何才能让各地的用户都能够进行高质量的访问，并尽量减">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://www.toberoot.com/icon/og-image-wide.png">
<meta property="article:published_time" content="2025-10-22T08:53:55.997Z">
<meta property="article:modified_time" content="2025-10-22T08:49:02.149Z">
<meta property="article:author" content="魏亚萍">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.toberoot.com/icon/twitter-summary.png">
<meta property="fb:admins" content="100000247608790">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48498357-3', 'auto');
  ga('send', 'pageview');
</script>

  <!-- Algolia -->
  <link rel="preconnect" href="https://-dsn.algolia.net" crossorigin />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
<meta name="generator" content="Hexo 8.0.0"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="../../../" id="logo">Hexo</a>
    </h1>
    <nav id="main-nav">
      <a href="../../../docs/" class="main-nav-link">Hexo</a><a href="../../../news/" class="main-nav-link">News</a><a href="../../../api/" class="main-nav-link">MySQL8.0</a><a href="../../../database/" class="main-nav-link">Database</a><a href="../../../linux/" class="main-nav-link">Linux</a><a href="../../../cloud/" class="main-nav-link">Cloud</a><a href="../../../singapore/" class="main-nav-link">Singapore</a><a href="../../../amy/" class="main-nav-link">AMY</a><a href="../../../about/" class="main-nav-link">About</a>
      <a target="_blank" rel="noopener" href="https://github.com/BoobooWei" class="main-nav-link"><i class="fa fa-github-alt"></i></a>

      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <div id="lang-select-wrap">
        <a href="/about/" class="main-nav-link"><label id="lang-select-label"><i class="fa fa-globe"></i><span>关于我</span></label></a>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">CDN</h1>
                <a target="_blank" rel="noopener" href="https://github.com/BoobooWei/site/edit/master/source/linux/0_linux_base/booboo_middle_service/07-cdn.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <html><head></head><body><h2 id="什么是-CDN" class="article-heading"><a href="#什么是-CDN" class="headerlink" title="什么是 CDN"></a>什么是 CDN<a class="article-anchor" href="#什么是-CDN" aria-hidden="true"></a></h2><p>随着互联网的高速发展，用户在使用网络的时，对于页面浏览的速度和效果越发的重视。一般而言，让一个用户等待的时间太过漫长，可能会导致实际访问我们站点的用户数量急剧降低，这是任何一家企业公司都不希望看到的事情。</p>
<p>特别是当用户与网站之间的链路被突发的大流量数据拥塞时，对于异地互联网用户急速增加的地区来说，访问质量不良更是一个急待解决的问题。如何才能让各地的用户都能够进行高质量的访问，并尽量减少由此而产生的费用和网站管理压力呢？内容发布网络（ContentDelivery Network，CDN）正是应此要求而设计。</p>
<p>CDN的全称是内容分发网络（Content Delivery Network),其设计目的是通过在现有的Internet中增加一层新的网络架构，将网站的内容发布到最接近用户的网络“边缘”，使用户可以就近取得所需的内容，提高用户访问网站的响应速度。 CDN有别于镜像，因为它比镜像更智能，或者可以做这样一个比喻：CDN=更智能的镜像+缓存+流量导流。因而，CDN可以明显提高Internet网络中信息流动的效率。从技术上全面解决由于网络带宽小、用户访问量大、网点分布不均等问题，提高用户访问网站的响应速度。</p>
<h2 id="CDN-的分类" class="article-heading"><a href="#CDN-的分类" class="headerlink" title="CDN 的分类"></a>CDN 的分类<a class="article-anchor" href="#CDN-的分类" aria-hidden="true"></a></h2><p>CDN的实现分为三类：镜像、高速缓存、专线。</p>
<ul>
<li><p>镜像站点：是最常见的，它让内容直接发布，适用于静态和准动态的数据同步。但是购买和维护新服务器的费用较高，还必须在各个地区设置镜像服务器，配备专业技术人员进行管理与维护。对于大型网站来说，更新所用的带宽成本也大大提高了。</p>
</li>
<li><p>高速缓存：成本较低，适用于静态内容。Internet的统计表明，超过80%的用户经常访问的是20%的网站的内容，在这个规律下，缓存服务器可以处理大部分客户 的静态请求，而原始的服务器只需处理约20%左右的非缓存请求和动态请求，于是大大加快了客户请求的响应时间，并降低了原始服务器的负载。</p>
</li>
<li><p>专线：让用户直接访问数据源，可以实现数据的动态同步。</p>
</li>
</ul>
<h2 id="CDN-的结构" class="article-heading"><a href="#CDN-的结构" class="headerlink" title="CDN 的结构"></a>CDN 的结构<a class="article-anchor" href="#CDN-的结构" aria-hidden="true"></a></h2><p>CDN网络架构主要由两大部分，分为中心和边缘两部分，中心指CDN网管中心和DNS重定向解析中心，负责全局负载均衡，设备系统安装在管理中心机房，边缘主要指异地节点，CDN分发的载体，主要由Cache Server和负载均衡器等组成。</p>
<p>狭义地讲，内容分发布网络(CDN)是一种新型的网络构建方式，它是为能在传统的IP网发布宽带丰富媒体而特别优化的网络覆盖层；而从广义的角度，CDN代表了一种基于质量与秩序的网络服务模式。简单地说，内容发布网(CDN)是一个经策略性部署的整体，包括分布式存储、负载均衡、网络请求的重定向和内容管理４个要件，而内容管理和全局<br>的网络流量管理(Traffic Management)是CDN的核心所在。通过用户就近性和服务器负载判断，CDN确保内容以一种极为高效的方式为用户的请求提供服务。总的来说，内容服务基于缓存服务器，也称作代理缓存(Surrogate)，它位于网络的边缘，距用户仅有”一跳”(Single Hop)之遥。同时代理缓存是内容提供商源服务器（通常位于CDN服务提供商的<br>数据中心）的一个透明镜像。这样的架构使得CDN服务提供商能够代表他们客户，即内容供应商，向最终用户提供尽可能好的体验，而这些用户是不能容忍请求响应时间有任何延迟的。据统计采用CDN技术，能处理整个网站页面的70%～95％的内容访问量，减轻服务器的压力，提升了网站的性能和可扩展性。<br>当用户访问加入CDN服务的网站时， 域名解析请求将最终交给全局负载均衡DNS进行处理。全局负载均衡DNS通过一组预先定义好的策略，将当时最接近用户的节点地址提供给用户，使用户能够得到快速的服务。同时，它还与分布在世界各地的所有CDN节点保持通信，搜集各节点的通信状态，确保不将用户的请求分配到不可用的CDN节点上。从技术实现上看CDN实际上是通过DNS做全局负载均衡的。</p>
<p>对于普通的Internet用户来讲，每个CDN节点就相当于一个放置在它周围的WEB。通过全局负载均衡DNS的控制，用户的请求被透明地指向离他最近的节点，节点中CDN服务器会像网站的原始服务器一样，响应用户的请求。由于它离用户更近，因而响应时间必然更快。</p>
<p>每个CDN节点至少由两部分组成：负载均衡设备和高速缓存服务器负载均衡设备负责每个节点中各个Cache的负载均衡，保证节点的工作效率；同时，负载均衡设备还负责收集节点与周围环境的信息，保持与全局负载DNS的通信，实现整个系统的负载均衡。</p>
<p>高速缓存服务器（Cache）负责存储客户网站的大量信息，就像一个靠近用户的网络服务器一样响应本地用户的访问请求。</p>
<p>CDN的管理系统是整个系统能够正常运转的保证。它不仅能对系统中的各个子系统和设备进行实时监控，对各种故障产生相应的告警，还可以实时监测到系统中总的流量和各节点的流量，并保存在系统的数据库中，使网管人员能够方便地进行进一步分析。通过完善的网管系统，用户可以对系统配置进行修改。</p>
<p>理论上，最简单的CDN网络有一个负责全局负载均衡的DNS和各节点一台CacheServer，即可运行。DNS支持根据用户源IP地址解析不同的IP，实现就近访问。为了保证高可用性等，需要监视各节点的流量、健康状况等。一个节点的单台Cache Server承载数量不够时，才需要多台Cache Server，多台Cache Server同时工作，才需要负载均衡器，使Cache Server群协同工作。</p>
<p>与目前现有的内容发布模式相比较，CDN强调了网络在内容发布中的重要性。通过引入主动的内容管理层的和全局负载均衡，CDN从根本上区别于传统的内容发布模式。在传统的内容发布模式中，内容的发布由内容提供商的应用服务器完成，而网络只表现为一个透明的数据传输通道，这种透明性表现在网络的质量保证仅仅停留在数据包的层面，而不能根据内容对象的不同区分服务质量。此外由于IP网的”尽力而为”的特性使得其质量证是依靠在用户和应用服务器之间端到端地提供充分的、远大于实际所需的带宽通量来实现的。在这样的内容发布模式下，不仅大量宝贵的骨干带宽被占用，同时内容提供商的应用服务器的负载也变得非常重，而且不可预计。</p>
<p>当发生一些热点事件和出现浪涌流量时，会产生局部热点效应，从而使应用服务器过载。这种基于中心的应用服务器的内容发布模式的另外一个缺陷在于个性化服务的缺失和对宽带服务价值链的扭曲。</p>
<p><img src="cdn/1.png"></p>
<p>由上图可见，用户访问未使用CDN缓冲网站的过程为:</p>
<p>1)、用户向浏览器提供要访问的域名；</p>
<p>2)、浏览器调用域名解析函数库对域名进行解析，以得到此域名对应的IP地址；</p>
<p>3)、浏览器使用所得到的IP地址，域名的服务主机发出数据访问请求；</p>
<p>4)、浏览器根据域名主机返回的数据显示网页的内容。</p>
<p><img src="cdn/2.png"></p>
<p>通过上图，我们可以了解到，使用了CDN缓存后网站的访问过程变为：1)、用户向浏览器提供要访问的域名；</p>
<p>2)、浏览器调用域名解析库对域名进行解析，由于CDN对域名解析过程进行了调整，所以解析函数库一般得到的是该域名对应的CNAME记录，为了得到实际IP地址，浏览器需要再次对获得的CNAME域名进行解析以得到实际的IP地址；在此过程中，使用的全局负载均衡DNS解析，如根据地理位置信息解析对应的IP地址，使得用户能就近访问。</p>
<p>3)、此次解析得到CDN缓存服务器的IP地址，浏览器在得到实际的IP地址以后，向缓存服务器发出访问请求；</p>
<p>4)、缓存服务器根据浏览器提供的要访问的域名，通过Cache Server内部专用DNS解析得到此域名的实际IP地址，再由缓存服务器向此实际IP地址提交访问请求；</p>
<p>5)、缓存服务器从实际IP地址得得到内容以后，一方面在本地进行保存，以备以后使用，二方面把获取的数据返回给客户端，完成数据服务过程；</p>
<p>6)、客户端得到由缓存服务器返回的数据以后显示出来并完成整个浏览的数据请求过程。</p>
<p>通过以上的分析我们可以得到，为了实现既要对普通用户透明(即加入缓存以后用户客户端无需进行任何设置，直接使用被加速原有的域名即可访问)，又要在为指定的网站提供加速服务的同时降低对内容提供商的影响，只要修改整个访问过程中的域名解析部分，以实现透明的加速服务，下面是CDN网络实现的具体操作过程。</p>
<p>1)、作为内容提供商，只需要把域名解释权交给CDN运营商，其他方面不需要进行任何的修改；操作时，ICP修改自己域名的解析记录，一般用cname方式指向CDN网络Cache服务器的地址。</p>
<p>2)、作为CDN运营商，首先需要为ICP的域名提供公开的解析，为了实现sortlist，一般是把内容提供商的域名解释结果指向一个CNAME记录；</p>
<p>3)、当需要进行sorlist时，CDN运营商可以利用DNS对CNAME指向的域名解析过程进行特殊处理，使DNS服务器在接收到客户端请求时可以根据客户端的IP地址，返回相同域名的不同IP地址；</p>
<p>4)、由于从cname获得的IP地址，并且带有hostname信息，请求到达Cache Server之后，Cache Server必须知道源服务器的IP地址，所以在CDN运营商内部维护一个内部DNS服务器，用于解释用户所访问的域名的真实IP地址；</p>
<p>5)、在维护内部DNS服务器时，还需要维护一台授权服务器，控制哪些域名可以进行缓存，而哪些又不进行缓存，以免发生开放代理的情况。</p>
<h1 id="DNS-VIEW" class="article-heading"><a href="#DNS-VIEW" class="headerlink" title="# DNS-VIEW"></a># DNS-VIEW<a class="article-anchor" href="#DNS-VIEW" aria-hidden="true"></a></h1><h3 id="DNS系统简介" class="article-heading"><a href="#DNS系统简介" class="headerlink" title="DNS系统简介"></a>DNS系统简介<a class="article-anchor" href="#DNS系统简介" aria-hidden="true"></a></h3><p>DNS系统是个多级别的、分布的数据库系统。它保存互连网主机名和IP地址的对应关系，也保存IP地址和主机名的对应关系，邮件路由信息,和其他一些互连网程式用到的信息。</p>
<p>DNS中客户程序查找的信息叫解析库（resolver library)，他发送一个查询到一个或多个服务器并等待回应，BIND 9包含了域名服务和解析库。DNS中的数据是按树型结构存储的，或者说是按树型管理的。树的每个节点，称为一个域，由一个库文件标示。表示节点的域名相互串联直到根域（root node）。他从右到左写成字符串，中间用“点”（.）分隔。一个域名只需要在他的父域中名字唯一就可以了。</p>
<p>例如在Uplooking公司中 一个主机的名字是mail.uplooking.com,这里com 是最高级的域名，mail.uplooking.com 属于这个域，uplooking是com的的子域，mail 是主机的名字。</p>
<p>为了管理方便，名址空间被分隔成一些区，这些区叫做区域（zones）。每一个从一个节点开始，并且延伸至一个叶子节点，或延伸到另一个区域的开始。每一个区域的数据都存在DNS中，他通过DNS协议应答本区域的DNS查询。相关的域名数据存储在资源记录中（resource records (RRs)）。正确的操作域名服务器，很重要的一点是理解区域（zones）和域（domain）的区别。</p>
<p>区域（ zone）是DNS树中一个节点的代表。一个区域（zone）包含一个域树（domain tree）相邻近的部分，对他来说，一个域名服务器拥有他完整的信息，并拥有管理权。他包含从某一节点以下任何的域名，除了那些连接到其他区的部分（那些部分可能由其他更低级的服务器管理）。一个节点会被一个或多个父区域的NS 记录（NS records ）标注，他会被从根区域开始逐层匹配。</p>
<p>例如，uplooking.com 域中有host1.stu1.uplooking.com 和host2.stu2.uplooking.com两台主机，但uplooking.com 区域中只有stu1.example.com 和 stu2.example.com 两个区域。一个区域（zone）能够精确的映射一个域（domain），也能够只包含一个域的部分，其他部分由另一个域名服务器解释。DNS中每一个名字都是个域，即使他是个终点（terminal），没有子域（subdomains）。每一个子域都是个域，除了根域外任何的域也都是子域。这些术语的意义都不但是字面能够理解的，建议阅读RFCs 1033，1034 and 1035来完整理解这些难点和细节。</p>
<p>虽然BIND 叫作 “域名服务软件”，他主要处理“区域”。named.conf 中使用“主”（master）或从（slave）声明区域，而不是域，假如请求一个域的从服务器，实际是请求这个区域信息的一种“收集”（collection ofzones）。每个区都至少有一个主域名服务器（authoritative nameserver），他包含了本区域完整的数据， 为了使DNS服务更稳定，很多区域有两个或两个以上的主域名服务器。</p>
<p>主域名服务器的应答含有”authoritative answer” (AA) 位，这使对DNS配置进行排错时更容易。排错工具能够如dig。主域名服务器是区域数据保存的地方，这个服务器也叫“管理服务器”（primary master server）, 或简称“管理服器”（primary），他从本地文档中读入数据，这些数据可能是手工输入的，也可能是由某些本地文档生成的，然后再由人来编辑的，这些文档叫“区域数据文档”（ zone file）或“主数据文档” （master file ）。其他的主服务器，从属服务器，也叫第二服务器，从其他服务器中获取区域数据信息，这个过程叫“区域数据传送”（ zone transfer）。典型的传送是从管理服务器传送到从属服务器，但也可能是从另外一个从属服务器中获得数据。也就是说，一个从属服务器对另外一个从属服务器来说，也可能是管理服务器角色。</p>
<p>通常区域任何的主域名服务器都监听父区域的NS记录，这些NS记录包含父区域的一个授权，主域名服务器也会把自己列在区域文档中，作为最高层或叫顶层。能够在区域的顶层服务器的NS记录中列出不在父NS记录的其他服务器, 但是不能列出不在顶级区域文档中而只在父域中的服务器。</p>
<p>一个秘密的服务器（stealth server ）是个主服务器，但没有列在区域的NS记录中。他能够用于保存一个区域的本地文档，他能够加速区域记录的存取，即使任何官方的DNS都失效。</p>
<p>一个管理服务器配置成秘密服务器经常会在配置文档中有”hiddenprimary” ，使用这个配置常常是因为管理服务器在防火墙后，因此不能直接和外网通讯。</p>
<p>由大多数操作系统提供的解析库（resolver libraries）是很少的，意味着他们不能通过和管理DNS服务器通讯就完成完整的DNS解析，相反的，他们依靠的是本地DNS解析。这个服务器叫递归查询服务器（ recursivename server），他为本地客户执行递归查询。 为了提高性能，递归查询服务器会存下查询到的结果，递归查询服务器和缓存服务器通常都是个意思。 缓存中保存一个DNS记录的时间由(TTL)字段规定。</p>
<p>即使一个缓存服务器无需执行完整的递归查询，假如他对自己的缓存不满意，他也能够转发部分或任何的查询，通常这时服务器叫转发器（forwarder）。 可能有一个或多个转发器，查询在转发器中查找，直到任何的转发器都找遍了，或找到了答案。转发器典型的应用是，不希望任何的服务器和其他的互连网服务器相互作用。典型环境包括一组互连网服务器和防火墙，服务器不能通过防火墙传递数据包，而转发器则能够，那个服务器将会使用内网服务器行为查询互连网服务器，另一个好处是，使用转发器特性本地电脑将会有一个很完整的缓存信息。</p>
<p>BIND域名服务器能够作为区域的管理服务器，从属服务器或缓存服务器。然而，虽然主服务器服务和缓存/递归服务器从逻辑上是不同的，也经常在不同的服务器上运行，一个主服务器能够禁止递归 (an authoritativeonlyserver)，来提高可靠性和安全性。不作为任何区域的主服务器，只为本地客户提供递归查询 (a cachingonlyserver) 则无需暴露在互连网上，因而能够放在防火墙后面。</p>
<h2 id="Bind-软件简介" class="article-heading"><a href="#Bind-软件简介" class="headerlink" title="Bind 软件简介"></a>Bind 软件简介<a class="article-anchor" href="#Bind-软件简介" aria-hidden="true"></a></h2><p>最新的Bind源代码软件包可以在官方网站<a target="_blank" rel="noopener" href="http://www.bind.com/%E4%B8%8B%E8%BD%BD%E3%80%82%E5%8F%A6%E5%A4%96http://www.isc.org/index.pl/sw/bind/%E4%B9%9F%E6%98%AF%E4%B8%80%E4%B8%AA%E4%B8%8D%E9%94%99%E7%9A%84%E5%9C%B0%E6%96%B9%E3%80%82%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3%E4%BD%A0%E5%8F%AF%E4%BB%A5%E5%9C%A8http://www.isc.org/index.pl/sw/bind/%E6%89%BE%E5%88%B0%EF%BC%8C%E6%AD%A4%E7%AB%99%E7%82%B9%E7%9A%84%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3%E5%BE%88%E8%AF%A6%E7%BB%86%E4%B8%94%E6%AF%94%E8%BE%83%E5%85%A8%E9%9D%A2%E3%80%82%E5%8F%A6%E5%A4%96http://www.isc.org/index.pl/sw/bind/%E4%B9%9F%E5%9B%9E%E7%AD%94%E4%BA%86bind%E7%9A%84%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E3%80%82http://www.bind.com/bind.html">http://www.bind.com/下载。另外http://www.isc.org/index.pl/sw/bind/也是一个不错的地方。帮助文档你可以在http://www.isc.org/index.pl/sw/bind/找到，此站点的帮助文档很详细且比较全面。另外http://www.isc.org/index.pl/sw/bind/也回答了bind的常见问题。http://www.bind.com/bind.html</a> 里有很多bind配置的配置文件示例。</p>
<p>RHEL7自带的是bind 9.9.4的包，我们可以直接通过yum工具来安装它。安装软件的时候装两个包，一个bind，一个bind-chroot。有chroot环境之后，可以将所有bind 程序和配置都在/var/named/chroot目录下。</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@servera ~]# yum -y install bind bind-chroot</span><br><span class="line">Loaded plugins: langpacks</span><br><span class="line">Resolving Dependencies</span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Running transaction check</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package bind.x86_64 32:9.9.4-18.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package bind-chroot.x86_64 32:9.9.4-18.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Finished Dependency Resolution</span></span><br><span class="line"></span><br><span class="line">Dependencies Resolved</span><br><span class="line"></span><br><span class="line">================================================================================</span><br><span class="line"> Package            Arch          Version                 Repository       Size</span><br><span class="line">================================================================================</span><br><span class="line">Installing:</span><br><span class="line"> bind               x86_64        32:9.9.4-18.el7         rhel_dvd        1.8 M</span><br><span class="line"> bind-chroot        x86_64        32:9.9.4-18.el7         rhel_dvd         82 k</span><br><span class="line"></span><br><span class="line">Transaction Summary</span><br><span class="line">================================================================================</span><br><span class="line">Install  2 Packages</span><br><span class="line"></span><br><span class="line">Total download size: 1.8 M</span><br><span class="line">Installed size: 4.3 M</span><br><span class="line">Downloading packages:</span><br><span class="line">(1/2): bind-chroot-9.9.4-18.el7.x86_64.rpm                 |  82 kB   00:00</span><br><span class="line">(2/2): bind-9.9.4-18.el7.x86_64.rpm                        | 1.8 MB   00:00</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">Total                                              5.6 MB/s | 1.8 MB  00:00</span><br><span class="line">Running transaction check</span><br><span class="line">Running transaction test</span><br><span class="line">Transaction test succeeded</span><br><span class="line">Running transaction</span><br><span class="line">  Installing : 32:bind-9.9.4-18.el7.x86_64                                  1/2</span><br><span class="line">  Installing : 32:bind-chroot-9.9.4-18.el7.x86_64                           2/2</span><br><span class="line">  Verifying  : 32:bind-chroot-9.9.4-18.el7.x86_64                           1/2</span><br><span class="line">  Verifying  : 32:bind-9.9.4-18.el7.x86_64                                  2/2</span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  bind.x86_64 32:9.9.4-18.el7         bind-chroot.x86_64 32:9.9.4-18.el7</span><br><span class="line"></span><br><span class="line">Complete!</span><br></pre></td></tr></tbody></table></figure>

<h2 id="3-bind9的view视图" class="article-heading"><a href="#3-bind9的view视图" class="headerlink" title="3.bind9的view视图##"></a>3.bind9的view视图##<a class="article-anchor" href="#3-bind9的view视图" aria-hidden="true"></a></h2><p>从Bind 9开始，bind支持视图功能。什么是视图呢？就是以某种特殊的方式根据用户来源的不同而返回不同的查询结果。这个技术在CDN中应用相当多，也是解决目前区域间带宽小和延迟大问题的一种方法。</p>
<p>view的配置写法如下：</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">view “名称” {  # 名称可以自拟，但必须唯一</span><br><span class="line">	match-clients { ip/netmask; }; # 通过match-clients字段来区分不同区域</span><br><span class="line">	zone "domain" IN {  # 当有了view字段之后，所有的zone定义字段必须出现在view字段当中</span><br><span class="line">	type master;</span><br><span class="line">	file "domain.zone";</span><br><span class="line">	};</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>举例：</p>
<p>由于中国网络目前分为两个区域—南电信北联通，2个网络上的用户，访问互相网络上的主机效率很低，所以现在一般的服务提供商都提供2个网络的相同服务，就如<a target="_blank" rel="noopener" href="http://www.abc.com这个网站,为了提高电信和网通2个网络上的客户体验,使用户体验最快速的访问速度.决定为电信和网通分别架设2台服务器,其中一台接入电信专线,一台接入网通专线.但是要让用户透明的访问此网站,不需要让用户进行人工的网站选择.我们可以采用dns服务器中的view功能,让不同的ip指向在不同网络上的主机.比如,让浏览www.abc.com这个网站上的网通用户浏览架设在网通线路上的主机./">www.abc.com这个网站，为了提高电信和网通2个网络上的客户体验，使用户体验最快速的访问速度。决定为电信和网通分别架设2台服务器，其中一台接入电信专线，一台接入网通专线。但是要让用户透明的访问此网站，不需要让用户进行人工的网站选择。我们可以采用DNS服务器中的view功能，让不同的IP指向在不同网络上的主机。比如，让浏览www.abc.com这个网站上的网通用户浏览架设在网通线路上的主机。</a></p>
<p>实验环境如下：</p>
<p>解析的主机名称：<a target="_blank" rel="noopener" href="http://www.abc.com/">www.abc.com</a></p>
<p>电信客户端ip：172.25.0.11 希望其解析到结果为192.168.11.1</p>
<p>网通客户端ip：172.25.0.12 希望其解析到结果为22.21.1.1</p>
<p>其余剩下其他运营商的客户端解析的结果皆为1.1.1.1</p>
<p>配置如下：<br>1）定义view字段</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@servera ~]# vim /etc/named.conf</span><br><span class="line"></span><br><span class="line">//</span><br><span class="line">// named.conf</span><br><span class="line">//</span><br><span class="line">// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS</span><br><span class="line">// server as a caching only nameserver (as a localhost DNS resolver only).</span><br><span class="line">//</span><br><span class="line">// See /usr/share/doc/bind*/sample/ for example named configuration files.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">options {</span><br><span class="line">        listen-on port 53 { any; };</span><br><span class="line">        listen-on-v6 port 53 { ::1; };</span><br><span class="line">        directory       "/var/named";</span><br><span class="line">        dump-file       "/var/named/data/cache_dump.db";</span><br><span class="line">        statistics-file "/var/named/data/named_stats.txt";</span><br><span class="line">        memstatistics-file "/var/named/data/named_mem_stats.txt";</span><br><span class="line">        allow-query     { any; };</span><br><span class="line"></span><br><span class="line">        /*</span><br><span class="line">         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.</span><br><span class="line">         - If you are building a RECURSIVE (caching) DNS server, you need to enable</span><br><span class="line">recursion.</span><br><span class="line">         - If your recursive DNS server has a public IP address, you MUST enable access</span><br><span class="line">           control to limit queries to your legitimate users. Failing to do so will</span><br><span class="line">           cause your server to become part of large scale DNS amplification</span><br><span class="line">           attacks. Implementing BCP38 within your network would greatly</span><br><span class="line">           reduce such attack surface</span><br><span class="line">        */</span><br><span class="line">        recursion yes;</span><br><span class="line"></span><br><span class="line">        dnssec-enable yes;</span><br><span class="line">		dnssec-validation yes;</span><br><span class="line">        dnssec-lookaside auto;</span><br><span class="line"></span><br><span class="line">        /* Path to ISC DLV key */</span><br><span class="line">        bindkeys-file "/etc/named.iscdlv.key";</span><br><span class="line"></span><br><span class="line">        managed-keys-directory "/var/named/dynamic";</span><br><span class="line"></span><br><span class="line">        pid-file "/run/named/named.pid";</span><br><span class="line">        session-keyfile "/run/named/session.key";</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">logging {</span><br><span class="line">        channel default_debug {</span><br><span class="line">                file "data/named.run";</span><br><span class="line">                severity dynamic;</span><br><span class="line">        };</span><br><span class="line">};</span><br><span class="line">view "dxclient" {</span><br><span class="line">        match-clients { 172.25.0.11; };</span><br><span class="line">        zone "." IN {</span><br><span class="line">                type hint;</span><br><span class="line">                file "named.ca";</span><br><span class="line">        };</span><br><span class="line">        zone "abc.com" IN {</span><br><span class="line">                type master;</span><br><span class="line">                file "dx.abc.com.zone";</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">include "/etc/named.rfc1912.zones";</span><br><span class="line">};</span><br><span class="line">view "wtclient" {</span><br><span class="line">        match-clients { 172.25.0.12; };</span><br><span class="line">        zone "." IN {</span><br><span class="line">                type hint;</span><br><span class="line">                file "named.ca";</span><br><span class="line">        };</span><br><span class="line">        zone "abc.com" IN {</span><br><span class="line">                type master;</span><br><span class="line">                file "wt.abc.com.zone";</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">include "/etc/named.rfc1912.zones";</span><br><span class="line">};</span><br><span class="line">view "other" {</span><br><span class="line">        match-clients { any;};</span><br><span class="line">         zone "." IN {</span><br><span class="line">                type hint;</span><br><span class="line">                file "named.ca";</span><br><span class="line">        };</span><br><span class="line">        zone "abc.com" IN {</span><br><span class="line">                type master;</span><br><span class="line">                file "other.abc.com.zone";</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">include "/etc/named.rfc1912.zones";</span><br><span class="line"></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">include "/etc/named.root.key";</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2）生成数据文件</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@servera named]# cp -p named.localhost dx.abc.com.zone</span><br><span class="line">[root@servera named]# cp -p dx.abc.com.zone wt.abc.com.zone</span><br><span class="line">[root@servera named]# cp -p dx.abc.com.zone other.abc.com.zone</span><br><span class="line">[root@servera named]# vim dx.abc.com.zone</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 1D</span></span><br><span class="line">@       IN SOA  @ rname.invalid. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      @</span><br><span class="line">        A       172.25.0.10</span><br><span class="line">www     A       192.168.11.1</span><br><span class="line"></span><br><span class="line">[root@servera named]# vim wt.abc.com.zone</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 1D</span></span><br><span class="line">@       IN SOA  @ rname.invalid. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      @</span><br><span class="line">        A       172.25.0.10</span><br><span class="line">www     A       22.21.1.1</span><br><span class="line">[root@servera named]# vim other.abc.com.zone</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">TTL 1D</span></span><br><span class="line">@       IN SOA  @ rname.invalid. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      @</span><br><span class="line">        A       172.25.0.10</span><br><span class="line">www     A       1.1.1.1</span><br></pre></td></tr></tbody></table></figure>

<p>3）重启服务</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@servera named]# systemctl restart named-chroot</span><br></pre></td></tr></tbody></table></figure>

<p>4）测试</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@serverb ~]# nslookup</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">server 172.25.0.10</span></span><br><span class="line">Default server: 172.25.0.10</span><br><span class="line">Address: 172.25.0.10#53</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">www.abc.com</span></span><br><span class="line">Server:		172.25.0.10</span><br><span class="line">Address:	172.25.0.10#53</span><br><span class="line"></span><br><span class="line">Name:	www.abc.com</span><br><span class="line">Address: 192.168.11.1</span><br><span class="line">----</span><br><span class="line">[root@serverc ~]# nslookup</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">server 172.25.0.10</span></span><br><span class="line">Default server: 172.25.0.10</span><br><span class="line">Address: 172.25.0.10#53</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">www.abc.com</span></span><br><span class="line">Server:		172.25.0.10</span><br><span class="line">Address:	172.25.0.10#53</span><br><span class="line"></span><br><span class="line">Name:	www.abc.com</span><br><span class="line">Address: 22.21.1.1</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>可以看到，解析<a target="_blank" rel="noopener" href="http://www.abc.com的请求同时交给172.25.0.10这台服务器,然而不同的客户端解析到的结果不一致,这就是dns-view的作用./">www.abc.com的请求同时交给172.25.0.10这台服务器，然而不同的客户端解析到的结果不一致，这就是dns-view的作用。</a></p>
<p>如果请求不来自第一个视图规定的区域，那么请求就会向下选取其他视图比对，所以可以看出视图比对是自上而下的，如果请求的区域在上一个视图中，就不会向下一个视图请求，即使你在下一个视图中放入了这个区域。</p>
<h2 id="4-ACL参数的配置" class="article-heading"><a href="#4-ACL参数的配置" class="headerlink" title="4.ACL参数的配置##"></a>4.ACL参数的配置##<a class="article-anchor" href="#4-ACL参数的配置" aria-hidden="true"></a></h2><p>有些时候，我们可能匹配的IP地址范围比较广，由于matchclients可能需要定义非常多的网段，bind引入acl关键字定义变量替换，以使matchclients中仅出现最少的符号，而网段的增添可以在外部文件中进行。</p>
<p>可以通过以下方式去完成：</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">acl "foosubnet" { 192.168.1/24;192.168.2/24; };</span><br></pre></td></tr></tbody></table></figure>

<p>举例：</p>
<p>目前电信的客户端为172.25.0.11和172.25.0.12这两台服务器</p>
<p>目前网通的客户端为172.25.0.13和172.25.0.14这两台服务器</p>
<p>通过acl的方式完成相应配置，就可以通过以下写法来实现。</p>
<p>1）在主配置文件里定义外部文件的读取配置参数</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@servera named]# vim /etc/named.conf</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">变更如下参数，其余参数不变</span></span><br><span class="line">include "/etc/dx.cfg";</span><br><span class="line">include "/etc/wt.cfg";</span><br><span class="line">view "dxclient" {</span><br><span class="line">        match-clients { "dx"; };</span><br><span class="line">        zone "." IN {</span><br><span class="line">                type hint;</span><br><span class="line">                file "named.ca";</span><br><span class="line">        };</span><br><span class="line">        zone "abc.com" IN {</span><br><span class="line">                type master;</span><br><span class="line">                file "dx.abc.com.zone";</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">include "/etc/named.rfc1912.zones";</span><br><span class="line">};</span><br><span class="line">view "wtclient" {</span><br><span class="line">        match-clients { "wt"; };</span><br><span class="line">        zone "." IN {</span><br><span class="line">                type hint;</span><br><span class="line">                file "named.ca";</span><br><span class="line">        };</span><br><span class="line">        zone "abc.com" IN {</span><br><span class="line">                type master;</span><br><span class="line">                file "wt.abc.com.zone";</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">include "/etc/named.rfc1912.zones";</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">view "other" {</span><br><span class="line">        match-clients { any;};</span><br><span class="line">         zone "." IN {</span><br><span class="line">                type hint;</span><br><span class="line">                file "named.ca";</span><br><span class="line">        };</span><br><span class="line">        zone "abc.com" IN {</span><br><span class="line">                type master;</span><br><span class="line">                file "other.abc.com.zone";</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">include "/etc/named.rfc1912.zones";</span><br><span class="line"></span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>2）生成外部文件</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@servera named]# cd /var/named/chroot/</span><br><span class="line">[root@servera chroot]# ls</span><br><span class="line">dev  etc  run  usr  var</span><br><span class="line">[root@servera chroot]# cd etc/</span><br><span class="line">[root@servera etc]# ls</span><br><span class="line">localtime  named.conf        named.rfc1912.zones  pki</span><br><span class="line">named      named.iscdlv.key  named.root.key       rndc.key</span><br><span class="line">[root@servera etc]# pwd</span><br><span class="line">/var/named/chroot/etc</span><br><span class="line">[root@servera etc]# vim dx.cfg</span><br><span class="line">acl "dx" {</span><br><span class="line">        172.25.0.11;</span><br><span class="line">        172.25.0.12;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">[root@servera etc]# vim wt.cfg</span><br><span class="line">acl "wt" {</span><br><span class="line">        172.25.0.13;</span><br><span class="line">        172.25.0.14;</span><br><span class="line">};</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>3）重启服务</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@servera etc]# systemctl restart named-chroot</span><br></pre></td></tr></tbody></table></figure>

<p>4）访问测试略</p>
<hr>
<h2 id="基于dns-view的主辅同步" class="article-heading"><a href="#基于dns-view的主辅同步" class="headerlink" title="基于dns-view的主辅同步"></a>基于dns-view的主辅同步<a class="article-anchor" href="#基于dns-view的主辅同步" aria-hidden="true"></a></h2><p>由于一个IP地址只能读取一个view字段的配置，那想要同步多个view字段的内容就需要有不同的ip地址。</p>
<p>实验环境里，我们以serverj作为我们的dns从服务器，servera作为我们的dns主服务器</p>
<p>ip地址对应关系如下：</p>
<table>
<thead>
<tr>
<th>servera</th>
<th>serverj</th>
</tr>
</thead>
<tbody><tr>
<td>eth0:172.25.0.10</td>
<td>eth0:172.25.0.19</td>
</tr>
<tr>
<td>eth1:192.168.0.10</td>
<td>eth1:192.168.0.19</td>
</tr>
<tr>
<td>eth2:192.168.1.10</td>
<td>eth2:192.168.1.19</td>
</tr>
</tbody></table>
<p>1）配置主服务器，将从属服务器的ip地址放入相应的视图区域配置中。</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@servera named]# vim /etc/named.conf</span><br><span class="line">include "/etc/dx.cfg";</span><br><span class="line">include "/etc/wt.cfg";</span><br><span class="line">view "dxclient" {</span><br><span class="line">        match-clients { "dx"; 172.25.0.19; !192.168.0.19; !192.168.1.19;};</span><br><span class="line">        zone "." IN {</span><br><span class="line">                type hint;</span><br><span class="line">                file "named.ca";</span><br><span class="line">        };</span><br><span class="line">        zone "abc.com" IN {</span><br><span class="line">                type master;</span><br><span class="line">                file "dx.abc.com.zone";</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">include "/etc/named.rfc1912.zones";</span><br><span class="line">};</span><br><span class="line">view "wtclient" {</span><br><span class="line">        match-clients { "wt"; !172.25.0.19; 192.168.0.19; !192.168.1.19; };</span><br><span class="line">        zone "." IN {</span><br><span class="line">                type hint;</span><br><span class="line">                file "named.ca";</span><br><span class="line">        };</span><br><span class="line">        zone "abc.com" IN {</span><br><span class="line">                type master;</span><br><span class="line">                file "wt.abc.com.zone";</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">include "/etc/named.rfc1912.zones";</span><br><span class="line">};</span><br><span class="line">view "other" {</span><br><span class="line">        match-clients { any; !172.25.0.19; !192.168.0.19; 192.168.1.19; };</span><br><span class="line">         zone "." IN {</span><br><span class="line">                type hint;</span><br><span class="line">                file "named.ca";</span><br><span class="line">        };</span><br><span class="line">        zone "abc.com" IN {</span><br><span class="line">                type master;</span><br><span class="line">                file "other.abc.com.zone";</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">include "/etc/named.rfc1912.zones";</span><br><span class="line"></span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>2）配置从服务器</p>
<p>先安装bind和bind-chroot软件</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@serverj ~]# yum -y install bind bind-chroot</span><br></pre></td></tr></tbody></table></figure>

<p>将配置文件从servera迁移至serverj：</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@servera ~]# tar -czf /tmp/conf.tgz /etc/named.conf /var/named/chroot/etc/dx.cfg /var/named/chroot/etc/wt.cfg</span><br><span class="line">[root@servera ~]# scp /tmp/conf.tgz 172.25.0.19:/tmp</span><br><span class="line">[root@serverj ~]# tar -xf /tmp/conf.tgz  -C /</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>修改配置文件如下：</p>
<p>重点关注transfer-source参数，指定的是通过本地哪个ip来获取数据文件</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">//</span><br><span class="line">// named.conf</span><br><span class="line">//</span><br><span class="line">// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS</span><br><span class="line">// server as a caching only nameserver (as a localhost DNS resolver only).</span><br><span class="line">//</span><br><span class="line">// See /usr/share/doc/bind*/sample/ for example named configuration files.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">options {</span><br><span class="line">        listen-on port 53 { any; };</span><br><span class="line">        listen-on-v6 port 53 { ::1; };</span><br><span class="line">        directory       "/var/named";</span><br><span class="line">        dump-file       "/var/named/data/cache_dump.db";</span><br><span class="line">        statistics-file "/var/named/data/named_stats.txt";</span><br><span class="line">        memstatistics-file "/var/named/data/named_mem_stats.txt";</span><br><span class="line">        allow-query     { any; };</span><br><span class="line"></span><br><span class="line">        /*</span><br><span class="line">         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.</span><br><span class="line">         - If you are building a RECURSIVE (caching) DNS server, you need to enable</span><br><span class="line"> recursion.</span><br><span class="line">         - If your recursive DNS server has a public IP address, you MUST enable access</span><br><span class="line">           control to limit queries to your legitimate users. Failing to do so will</span><br><span class="line">           cause your server to become part of large scale DNS amplification</span><br><span class="line">           attacks. Implementing BCP38 within your network would greatly</span><br><span class="line">           reduce such attack surface</span><br><span class="line">        */</span><br><span class="line">        recursion yes;</span><br><span class="line"></span><br><span class="line">        dnssec-enable yes;</span><br><span class="line">        dnssec-validation yes;</span><br><span class="line">        dnssec-lookaside auto;</span><br><span class="line"></span><br><span class="line">        /* Path to ISC DLV key */</span><br><span class="line">        bindkeys-file "/etc/named.iscdlv.key";</span><br><span class="line"></span><br><span class="line">        managed-keys-directory "/var/named/dynamic";</span><br><span class="line"></span><br><span class="line">        pid-file "/run/named/named.pid";</span><br><span class="line">	    session-keyfile "/run/named/session.key";</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">logging {</span><br><span class="line">        channel default_debug {</span><br><span class="line">                file "data/named.run";</span><br><span class="line">                severity dynamic;</span><br><span class="line">        };</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">include "/etc/dx.cfg";</span><br><span class="line">include "/etc/wt.cfg";</span><br><span class="line">view "dxclient" {</span><br><span class="line">        match-clients { "dx"; 172.25.0.19; !192.168.0.19; !192.168.1.19;};</span><br><span class="line">        transfer-source 172.25.0.19;</span><br><span class="line">        zone "." IN {</span><br><span class="line">                type hint;</span><br><span class="line">                file "named.ca";</span><br><span class="line">        };</span><br><span class="line">        zone "abc.com" IN {</span><br><span class="line">                type slave;</span><br><span class="line">                masters { 172.25.0.10; };</span><br><span class="line">                file "slaves/dx.abc.com.zone";</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">include "/etc/named.rfc1912.zones";</span><br><span class="line">};</span><br><span class="line">view "wtclient" {</span><br><span class="line">        transfer-source 192.168.0.19;</span><br><span class="line">        match-clients { "wt"; !172.25.0.19; 192.168.0.19; !192.168.1.19; };</span><br><span class="line">        zone "." IN {</span><br><span class="line">                type hint;</span><br><span class="line">                file "named.ca";</span><br><span class="line">        };</span><br><span class="line">        zone "abc.com" IN {</span><br><span class="line">                type slave;</span><br><span class="line">                masters { 192.168.0.10; };</span><br><span class="line">                file "slaves/wt.abc.com.zone";</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">include "/etc/named.rfc1912.zones";</span><br><span class="line">};</span><br><span class="line">view "other" {</span><br><span class="line">        match-clients { any; !172.25.0.19; !192.168.0.19; 192.168.1.19; };</span><br><span class="line">        transfer-source 192.168.1.19;</span><br><span class="line">         zone "." IN {</span><br><span class="line">                type hint;</span><br><span class="line">                file "named.ca";</span><br><span class="line">        };</span><br><span class="line">        zone "abc.com" IN {</span><br><span class="line">                masters { 192.168.1.10; };</span><br><span class="line">                type slave;</span><br><span class="line">                file "slaves/other.abc.com.zone";</span><br><span class="line">        };</span><br><span class="line"></span><br><span class="line">include "/etc/named.rfc1912.zones";</span><br><span class="line"></span><br><span class="line">};</span><br><span class="line">include "/etc/named.root.key";</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>3）重启服务</p>
<p>重启服务的时候，先重启主服务器的named-chroot，后重启从服务器的named-chroot</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@servera ~]# systemctl restart named-chroot</span><br><span class="line">[root@serverj ~]# systemctl start named-chroot</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>4）测试结果如下：</p>
<p>在serverj上，我们可以在/var/named/slaves目录下找到相应的数据文件</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@serverj slaves]# ls</span><br><span class="line">dx.abc.com.zone  other.abc.com.zone  wt.abc.com.zone</span><br><span class="line">[root@serverj slaves]# pwd</span><br><span class="line">/var/named/slaves</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
</body></html>
              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2025-10-22T08:49:02.149Z" itemprop="dateModified">Last updated: 2025-10-22</time>
                <a href="/linux/0_linux_base/index.html" class="article-footer-next" title="概览"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <div id="carbonads" class="carbonads" style="text-align:center;font-family:'Noto Sans SC',sans-serif;">
  <span class="carbon-wrap">
    <a href="https://github.com/booboowei"
       class="carbon-img"
       target="_blank"
       rel="noopener sponsored">
      <img
        src="https://avatars2.githubusercontent.com/u/21328020?s=460&u=88cf6127c32932188f936d05636b7b0d36783ee1&v=4"
        alt="ads via Carbon"
        border="0"
        style="width:80px;height:80px;border-radius:50%;max-width:130px;"
      />
    </a>
    <a href="/about/"
       class="carbon-text"
       target="_blank"
       rel="noopener sponsored"
       style="display:block;margin-top:4px;">
      欢迎光临
    </a>
  </span>

  <!-- 日期显示 -->
  <div id="today-date" style="margin-top:12px;background:#f5f5f5;border-radius:12px;padding:10px 0;">
    <div id="weekday" style="font-size:14px;color:#555;"></div>
    <div id="day" style="font-size:36px;font-weight:bold;color:#000;"></div>
    <div id="ym" style="font-size:14px;color:#555;"></div>
    <div id="lunar" style="font-size:13px;color:#888;margin-top:4px;"></div>
  </div>

<script>
(function(){
  const now = new Date();
  const weekdays = ["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];
  const year = now.getFullYear();
  const month = now.getMonth() + 1;
  const day = now.getDate();

  function toChineseNumber(num) {
    const map = {0:'〇',1:'一',2:'二',3:'三',4:'四',5:'五',6:'六',7:'七',8:'八',9:'九'};
    return String(num).split('').map(n=>map[n]).join('');
  }

  // 优先使用 Intl (现代浏览器支持农历/中国传统历)
  function getLunarByIntl(date) {
    try {
      // 获取农历的月（长格式，如 "九月" 或 "闰八月"），和日（数字）
      const monthFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { month: 'long' });
      const dayFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { day: 'numeric' });
      const lunarMonthText = monthFormatter.format(date); // 例如 "九月" 或 "闰八月"
      const lunarDayText = dayFormatter.format(date);     // 例如 "三十" 或 "初一"
      // 有的浏览器返回的 month 会包含 "闰" 字样，也可能返回汉字月份，需要适配
      return `农历${lunarMonthText}${lunarDayText}`;
    } catch (e) {
      return null; // 表示不支持 Intl 农历
    }
  }

  // 回退：简易本地农历算法（仅作兼容，适用于1900-2049范围）
  const lunarInfo = [0x04bd8,0x04ae0,0x0a570,0x054d5,0x0d260,0x0d950,0x16554,0x056a0,0x09ad0,0x055d2,
                     0x04ae0,0x0a5b6,0x0a4d0,0x0d250,0x1d255,0x0b540,0x0d6a0,0x0ada2,0x095b0,0x14977,
                     0x04970,0x0a4b0,0x0b4b5,0x06a50,0x06d40,0x1ab54,0x02b60,0x09570,0x052f2,0x04970,
                     0x06566,0x0d4a0,0x0ea50,0x06e95,0x05ad0,0x02b60,0x186e3,0x092e0,0x1c8d7,0x0c950,
                     0x0d4a0,0x1d8a6,0x0b550,0x056a0,0x1a5b4,0x025d0,0x092d0,0x0d2b2,0x0a950,0x0b557,
                     0x06ca0,0x0b550,0x15355,0x04da0,0x0a5b0,0x14573,0x052b0,0x0a9a8,0x0e950,0x06aa0,
                     0x0aea6,0x0ab50,0x04b60,0x0aae4,0x0a570,0x05260,0x0f263,0x0d950,0x05b57,0x056a0,
                     0x096d0,0x04dd5,0x04ad0,0x0a4d0,0x0d4d4,0x0d250,0x0d558,0x0b540,0x0b5a0,0x195a6,
                     0x095b0,0x049b0,0x0a974,0x0a4b0,0x0b27a,0x06a50,0x06d40,0x0af46,0x0ab60,0x09570,
                     0x04af5,0x04970,0x064b0,0x074a3,0x0ea50,0x06b58,0x05ac0,0x0ab60,0x096d5,0x092e0];

  function lYearDays(y){let i,sum=348;for(i=0x8000;i>0x8;i>>=1)sum+=(lunarInfo[y-1900]&i)?1:0;return sum+leapDays(y);}
  function leapDays(y){if(leapMonth(y))return(lunarInfo[y-1900]&0x10000)?30:29;else return 0;}
  function leapMonth(y){return lunarInfo[y-1900]&0xf;}
  function monthDays(y,m){return(lunarInfo[y-1900]&(0x10000>>m))?30:29;}

  function LunarFallback(objDate){
    let i, leap=0, temp=0;
    const baseDate = new Date(1900,0,31);
    let offset = Math.floor((objDate - baseDate) / 86400000);
    let year = 1900;
    // 年循环
    for (i = 1900; i < 2050 && offset > 0; i++) {
      temp = lYearDays(i);
      offset -= temp;
      year = i;
    }
    if (offset < 0) { offset += temp; year--; }
    leap = leapMonth(year);
    let isLeap = false;
    let month = 1;
    // 月循环
    for (i = 1; i <= 12 && offset > 0; i++) {
      if (leap > 0 && i === (leap + 1) && !isLeap) {
        // 进入闰月
        temp = leapDays(year);
        isLeap = true;
        i--; // stay on same month number but mark leap
      } else {
        temp = monthDays(year, i);
      }
      offset -= temp;
      if (isLeap && i === leap) { isLeap = false; }
      if (!isLeap) month++; // 非闰月时才推进月份计数
    }
    if (offset === 0 && leap > 0 && month === leap + 1) {
      // 特殊：当正好落在闰月第一天
      // month 保持，isLeap = true
    }
    if (offset < 0) { offset += temp; month--; }
    const day = offset + 1;
    // 修正 month 边界
    if (month <= 0) month = 1;
    return { year, month, day, isLeap: !!isLeap };
  }

  function getLunarDateStringFallback(y,m,d){
    const cDay=["","初一","初二","初三","初四","初五","初六","初七","初八","初九","初十",
                "十一","十二","十三","十四","十五","十六","十七","十八","十九","二十",
                "廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"];
    const cMon=["","正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","冬月","腊月"];
    const lunar = LunarFallback(new Date(y, m-1, d));
    return `农历${lunar.isLeap ? '闰' : ''}${cMon[lunar.month]}${cDay[lunar.day]}`;
  }

  // 先尝试 Intl 方法
  let lunarText = getLunarByIntl(now);
  if (!lunarText) {
    // 回退本地算法
    lunarText = getLunarDateStringFallback(year, month, day);
  }

  // 输出到页面（公历 + 农历）
  document.getElementById("weekday").textContent = weekdays[now.getDay()];
  document.getElementById("day").textContent = day;
  document.getElementById("ym").textContent = `${toChineseNumber(year)}年${toChineseNumber(month)}月`;
  document.getElementById("lunar").textContent = lunarText;
})();
</script>


              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-CDN"><span class="toc-text">什么是 CDN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CDN-%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">CDN 的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CDN-%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">CDN 的结构</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DNS-VIEW"><span class="toc-text"># DNS-VIEW</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DNS%E7%B3%BB%E7%BB%9F%E7%AE%80%E4%BB%8B"><span class="toc-text">DNS系统简介</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bind-%E8%BD%AF%E4%BB%B6%E7%AE%80%E4%BB%8B"><span class="toc-text">Bind 软件简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-bind9%E7%9A%84view%E8%A7%86%E5%9B%BE"><span class="toc-text">3.bind9的view视图##</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-ACL%E5%8F%82%E6%95%B0%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-text">4.ACL参数的配置##</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Edns-view%E7%9A%84%E4%B8%BB%E8%BE%85%E5%90%8C%E6%AD%A5"><span class="toc-text">基于dns-view的主辅同步</span></a></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">Linux 中级</strong><a href="/linux/0_linux_base/index.html" class="sidebar-link">概览</a><a href="/linux/0_linux_base/booboo_linux_base/index.html" class="sidebar-link">Linux 基础</a><a href="/linux/0_linux_base/booboo_easy_service/index.html" class="sidebar-link">Linux 简易服务</a><a href="/linux/0_linux_base/booboo_bash_shell_scripts/index.html" class="sidebar-link">Linux 脚本编程</a><a href="/linux/0_linux_base/booboo_middle_service/index.html" class="sidebar-link">Linux 进阶</a><strong class="sidebar-title">Linux 日常</strong><a href="/linux/1_linux_dayday/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">Ex-Tools</strong><a href="/linux/2_excellent_tools/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">LAMP</strong><a href="/linux/3_lamp/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">Docker</strong><a href="/linux/4_docker/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">TICK</strong><a href="/linux/5_tick/index.html" class="sidebar-link">概览</a><a href="/linux/5_tick/kapacitor/index.html" class="sidebar-link">Kapacitor</a><strong class="sidebar-title">Devops</strong><a href="/linux/6_devops/index.html" class="sidebar-link">概览</a><a href="/linux/6_devops/bootstrap/index.html" class="sidebar-link">Bootstrap</a><a href="/linux/6_devops/booboo_python/index.html" class="sidebar-link">Python 基础</a><a href="/linux/6_devops/00_python_base/index.html" class="sidebar-link">Python 进阶</a><a href="/linux/6_devops/01_python_net/index.html" class="sidebar-link">Python 网络开发</a><a href="/linux/6_devops/02_python_threads/index.html" class="sidebar-link">Python 并发编程</a><a href="/linux/6_devops/11_flask_admin/index.html" class="sidebar-link">Flask_admin</a><a href="/linux/6_devops/12_mini_project/index.html" class="sidebar-link">迷你小项目</a><strong class="sidebar-title">Git</strong><a href="/linux/7_git/index.html" class="sidebar-link">概览</a><a href="/linux/7_git/Chapter01/index.html" class="sidebar-link">Git 基础</a><a href="/linux/7_git/Chapter02/index.html" class="sidebar-link">Git 常见场景</a><a href="/linux/7_git/Chapter04/index.html" class="sidebar-link">Git 多人协作</a><a href="/linux/7_git/Chapter05/index.html" class="sidebar-link">Git 集成使用禁忌</a><a href="/linux/7_git/Chapter06/index.html" class="sidebar-link">GitHub 初识</a><a href="/linux/7_git/Chapter07/index.html" class="sidebar-link">GitHub 使用</a><a href="/linux/7_git/Chapter03/index.html" class="sidebar-link">Github 同步</a><a href="/linux/7_git/Chapter08/index.html" class="sidebar-link">GitLab 实践</a>
  </div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2025 <a href="https://github.com/BoobooWei" target="_blank">魏亚萍</a><br>
      Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>.<br>
      备案号：沪ICP备2020026043号
    </div>
    <div id="footer-links">
      <a href="https://www.youtube.com/@amyreading2023" class="footer-link" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" 
            alt="YouTube"
            style="height:24px; margin-bottom:-6px;">
      </a>
      <a href="https://github.com/BoobooWei" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="../../../docs/" class="mobile-nav-link">Hexo</a><a href="../../../news/" class="mobile-nav-link">News</a><a href="../../../api/" class="mobile-nav-link">MySQL8.0</a><a href="../../../database/" class="mobile-nav-link">Database</a><a href="../../../linux/" class="mobile-nav-link">Linux</a><a href="../../../cloud/" class="mobile-nav-link">Cloud</a><a href="../../../singapore/" class="mobile-nav-link">Singapore</a><a href="../../../amy/" class="mobile-nav-link">AMY</a><a href="../../../about/" class="mobile-nav-link">About</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/BoobooWei" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">Linux 中级</strong><a href="/linux/0_linux_base/index.html" class="mobile-nav-link">概览</a><a href="/linux/0_linux_base/booboo_linux_base/index.html" class="mobile-nav-link">Linux 基础</a><a href="/linux/0_linux_base/booboo_easy_service/index.html" class="mobile-nav-link">Linux 简易服务</a><a href="/linux/0_linux_base/booboo_bash_shell_scripts/index.html" class="mobile-nav-link">Linux 脚本编程</a><a href="/linux/0_linux_base/booboo_middle_service/index.html" class="mobile-nav-link">Linux 进阶</a><strong class="mobile-nav-title">Linux 日常</strong><a href="/linux/1_linux_dayday/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">Ex-Tools</strong><a href="/linux/2_excellent_tools/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">LAMP</strong><a href="/linux/3_lamp/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">Docker</strong><a href="/linux/4_docker/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">TICK</strong><a href="/linux/5_tick/index.html" class="mobile-nav-link">概览</a><a href="/linux/5_tick/kapacitor/index.html" class="mobile-nav-link">Kapacitor</a><strong class="mobile-nav-title">Devops</strong><a href="/linux/6_devops/index.html" class="mobile-nav-link">概览</a><a href="/linux/6_devops/bootstrap/index.html" class="mobile-nav-link">Bootstrap</a><a href="/linux/6_devops/booboo_python/index.html" class="mobile-nav-link">Python 基础</a><a href="/linux/6_devops/00_python_base/index.html" class="mobile-nav-link">Python 进阶</a><a href="/linux/6_devops/01_python_net/index.html" class="mobile-nav-link">Python 网络开发</a><a href="/linux/6_devops/02_python_threads/index.html" class="mobile-nav-link">Python 并发编程</a><a href="/linux/6_devops/11_flask_admin/index.html" class="mobile-nav-link">Flask_admin</a><a href="/linux/6_devops/12_mini_project/index.html" class="mobile-nav-link">迷你小项目</a><strong class="mobile-nav-title">Git</strong><a href="/linux/7_git/index.html" class="mobile-nav-link">概览</a><a href="/linux/7_git/Chapter01/index.html" class="mobile-nav-link">Git 基础</a><a href="/linux/7_git/Chapter02/index.html" class="mobile-nav-link">Git 常见场景</a><a href="/linux/7_git/Chapter04/index.html" class="mobile-nav-link">Git 多人协作</a><a href="/linux/7_git/Chapter05/index.html" class="mobile-nav-link">Git 集成使用禁忌</a><a href="/linux/7_git/Chapter06/index.html" class="mobile-nav-link">GitHub 初识</a><a href="/linux/7_git/Chapter07/index.html" class="mobile-nav-link">GitHub 使用</a><a href="/linux/7_git/Chapter03/index.html" class="mobile-nav-link">Github 同步</a><a href="/linux/7_git/Chapter08/index.html" class="mobile-nav-link">GitLab 实践</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- Cookie -->
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<!-- build:js build/js/main.js -->

<script src="../../../js/lang_select.js"></script>


<script src="../../../js/mobile_nav.js"></script>

<!-- endbuild -->

<!-- Algolia -->
<!--   backup
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript">
docsearch({
  appId: '',
  apiKey: '',
  indexName: '',
  insights: true,
  container: '#docsearch',
  debug: false,
  searchParameters: {
    facetFilters: ['lang:en']
  }
});
</script>
-->

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
document.getElementById('search-input-wrap').classList.add('on');
docsearch({
    apiKey: '',
    indexName: '',
    inputSelector: '#search-input'
});
</script>
</body>
</html>