<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>Linux 文件和目录 | BoobooWei</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.toberoot.com/linux/0_linux_base/booboo_linux_base/03-Linux%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95">
  <!-- Alternate links -->
  
    
      
    
    <link rel="alternate" hreflang="x-default" href="http://www.toberoot.com/linux/0_linux_base/booboo_linux_base/03-Linux%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95" />
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="../../../icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="../../../icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="../../../icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="../../../icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="../../../icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="../../../icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="../../../icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="../../../icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="../../../icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="../../../icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="../../../icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="../../../icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="../../../icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="../../../icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="../../../css/navy.css">

  <!-- endbuild -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-lato@0.0.75/index.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="../../../atom.xml" title="BoobooWei" type="application/atom+xml">
  <!-- Open Graph -->
  <meta name="description" content="Linux 目录Linux 目录配置的依据 –FHS因为利用 Linux 来开发产品或 distributions 的社区 &#x2F; 公司或个人实在太多了 , 如果每个人都用自己的想法来配置文件放置的目录 , 那将可能造成很多管理上的困扰。 你能想象 , 你进入一个企业之后 , 所 接触到的 Linux 目录配置方法竟然跟你以前学的完全不同吗 ? 很难想象吧 ~ 所以 , 后来就有所谓的Fil">
<meta property="og:type" content="website">
<meta property="og:title" content="Linux 文件和目录">
<meta property="og:url" content="http://www.toberoot.com/linux/0_linux_base/booboo_linux_base/03-Linux%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95">
<meta property="og:site_name" content="BoobooWei">
<meta property="og:description" content="Linux 目录Linux 目录配置的依据 –FHS因为利用 Linux 来开发产品或 distributions 的社区 &#x2F; 公司或个人实在太多了 , 如果每个人都用自己的想法来配置文件放置的目录 , 那将可能造成很多管理上的困扰。 你能想象 , 你进入一个企业之后 , 所 接触到的 Linux 目录配置方法竟然跟你以前学的完全不同吗 ? 很难想象吧 ~ 所以 , 后来就有所谓的Fil">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://www.toberoot.com/icon/og-image-wide.png">
<meta property="article:published_time" content="2025-10-22T08:53:56.017Z">
<meta property="article:modified_time" content="2025-10-22T08:48:46.490Z">
<meta property="article:author" content="魏亚萍">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.toberoot.com/icon/twitter-summary.png">
<meta property="fb:admins" content="100000247608790">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48498357-3', 'auto');
  ga('send', 'pageview');
</script>

  <!-- Algolia -->
  <link rel="preconnect" href="https://-dsn.algolia.net" crossorigin />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
<meta name="generator" content="Hexo 8.0.0"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="../../../" id="logo">Hexo</a>
    </h1>
    <nav id="main-nav">
      <a href="../../../docs/" class="main-nav-link">Hexo</a><a href="../../../news/" class="main-nav-link">News</a><a href="../../../api/" class="main-nav-link">MySQL8.0</a><a href="../../../database/" class="main-nav-link">Database</a><a href="../../../linux/" class="main-nav-link">Linux</a><a href="../../../cloud/" class="main-nav-link">Cloud</a><a href="../../../singapore/" class="main-nav-link">Singapore</a><a href="../../../amy/" class="main-nav-link">AMY</a><a href="../../../about/" class="main-nav-link">About</a>
      <a target="_blank" rel="noopener" href="https://github.com/BoobooWei" class="main-nav-link"><i class="fa fa-github-alt"></i></a>

      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <div id="lang-select-wrap">
        <a href="/about/" class="main-nav-link"><label id="lang-select-label"><i class="fa fa-globe"></i><span>关于我</span></label></a>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">Linux 文件和目录</h1>
                <a target="_blank" rel="noopener" href="https://github.com/BoobooWei/site/edit/master/source/linux/0_linux_base/booboo_linux_base/03-Linux文件和目录.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <html><head></head><body><h2 id="Linux-目录" class="article-heading"><a href="#Linux-目录" class="headerlink" title="Linux 目录"></a>Linux 目录<a class="article-anchor" href="#Linux-目录" aria-hidden="true"></a></h2><h3 id="Linux-目录配置的依据-–FHS" class="article-heading"><a href="#Linux-目录配置的依据-–FHS" class="headerlink" title="Linux 目录配置的依据 –FHS"></a>Linux 目录配置的依据 –FHS<a class="article-anchor" href="#Linux-目录配置的依据-–FHS" aria-hidden="true"></a></h3><p>因为利用 Linux 来开发产品或 distributions 的社区 / 公司或个人实在太多了 , 如果每个人都用自己的想法来配置文件放置的目录 , 那将可能造成很多管理上的困扰。 你能想象 , 你进入一个企业之后 , 所 接触到的 Linux 目录配置方法竟然跟你以前学的完全不同吗 ? 很难想象吧 ~ 所以 , 后来就有所谓的Filesystem Hierarchy Standard (FHS) 标准的出炉了 !</p>
<p>根据 FHS(<a target="_blank" rel="noopener" href="http://www.pathname.com/fhs/">http://www.pathname.com/fhs/</a>) 的官方文件指出 , 他们的主要目的是希望让使用者可以了解到已安装软件通常放置在哪个目录下 , 所以他们希望独立的软件开发商、操作系统制作者、以及想要维护系统的用户 , 都能够遵循 FHS 的标准。 也就是说 ,FHS 的重点在于规范每个特定的目录下应该存放什么样子的数据而已。</p>
<p>亊实上 ,FHS 是根据过去的经验一直再持续的改版的 ,FHS 依据文件系统使用的频繁与否允许使用者随意更动 , 而将目录定义成为四种交互作用的形态 , 用表格来说有点像底下这样 ：</p>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left">可分享的 (shareable)</th>
<th align="left">不可分享的 (unshareable)</th>
</tr>
</thead>
<tbody><tr>
<td align="left">不变的 (static)</td>
<td align="left">/usr ( 软件放置处 )</td>
<td align="left">/etc ( 配置文件 )</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">/opt ( 第三方协力软件 )</td>
<td align="left">/boot ( 开机不核心档 )</td>
</tr>
<tr>
<td align="left">可变动的 (variable)</td>
<td align="left">/var/mail ( 使用者邮件信箱 )</td>
<td align="left">/var/run ( 程序相关 )</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">/var/spool/news ( 新闻组 )</td>
<td align="left">/var/lock ( 程序相关 )</td>
</tr>
</tbody></table>
<p><img src="pic/02.png" alt="02"></p>
<h3 id="目录树" class="article-heading"><a href="#目录树" class="headerlink" title="目录树"></a>目录树<a class="article-anchor" href="#目录树" aria-hidden="true"></a></h3><p>在类 Unix 系统中并不存在 C/D/E/F 盘符,一切的文件都是从 “ 根 (/)” 目录开始的并按照文件系统目录标准 FHS 采用树形结构来存放文件并定义了每个区域的用途。</p>
<p>目录名称严格的区分大小写,例如 root 、 rOOt 、 Root 、 rooT 等等均代表是不同的独立目录,并且名称中不得包含反斜杠 (/) 。</p>
<p><img src="pic/04.png" alt="04"></p>
<p>主要常见的目录定义:</p>
<table>
<thead>
<tr>
<th align="left">目录名称</th>
<th align="left">应放置文件的内容</th>
</tr>
</thead>
<tbody><tr>
<td align="left">/boot</td>
<td align="left">开机所需文件 —— 内核,开机菜单及所需配置文件等</td>
</tr>
<tr>
<td align="left">/dev</td>
<td align="left">任何设备与接口都以文件形式存放在此目录</td>
</tr>
<tr>
<td align="left">/etc</td>
<td align="left">配置文件</td>
</tr>
<tr>
<td align="left">/home</td>
<td align="left">用户主目录</td>
</tr>
<tr>
<td align="left">/bin</td>
<td align="left">单用户维护模式下还能够被操作的命令</td>
</tr>
<tr>
<td align="left">/lib</td>
<td align="left">开机时用到的函数库及/bin 与/sbin 下面命令要调用的函数</td>
</tr>
<tr>
<td align="left">/sbin</td>
<td align="left">开机过程中需要的</td>
</tr>
<tr>
<td align="left">/media</td>
<td align="left">一般挂载或删除的设备</td>
</tr>
<tr>
<td align="left">/opt</td>
<td align="left">放置第三方的软件</td>
</tr>
<tr>
<td align="left">/root</td>
<td align="left">系统管理员的主文件夹</td>
</tr>
<tr>
<td align="left">/srv</td>
<td align="left">一些网络服务的数据目录</td>
</tr>
<tr>
<td align="left">/tmp</td>
<td align="left">任何人均可使用的 “ 共享 ” 临时目录</td>
</tr>
<tr>
<td align="left">/proc</td>
<td align="left">虚拟文件系统,例如系统内核,进程,外部设备及网络状态等</td>
</tr>
<tr>
<td align="left">/usr/local</td>
<td align="left">用户自行安装的软件</td>
</tr>
<tr>
<td align="left">/usr/sbin</td>
<td align="left">非系统开机时需要的软件/命令/脚本</td>
</tr>
<tr>
<td align="left">/usr/share</td>
<td align="left">帮助与说明文件,也可放置共享文件。</td>
</tr>
<tr>
<td align="left">/var</td>
<td align="left">主要存放经常变化的文件,如日志。</td>
</tr>
<tr>
<td align="left">/lost+found</td>
<td align="left">当文件系统发生错误时,将一些丢失的文件片段存放在这里1.3 路径</td>
</tr>
</tbody></table>
<p>另外一个重要的概念 “ 路径 ” ,这个路径指的是如何找到某个文件,分为 “ 绝对路径 ” 与 “ 相对路径 ” :</p>
<ul>
<li>绝对路径 (absolute): 由根目录 (/) 开始写起的目录或文件名</li>
<li>相对路径 (relative): 相对于当前路径的写法</li>
</ul>
<p>举例来说一个客人想找下厕所,你有两种回答的方法。</p>
<ul>
<li>绝对路径:首先坐车来到你家,到了你家后，右手边第一个房间就是厕所。</li>
<li>相对路径:前面右拐第一个房间。</li>
</ul>
<p>如果你说的是绝对路径,那么任何客人都可以按照这个提示找到你家的厕所,但缺点是过于繁琐,如果说的是相对路径,那么这个人并不是在每个路口右转都能找到厕所,缺点是不具备普遍性。</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@rhel7 ~]# cd /etc/sysconfig/network-scripts/</span><br><span class="line">[root@rhel7 network-scripts]# pwd</span><br><span class="line">/etc/sysconfig/network-scripts</span><br><span class="line">[root@rhel7 network-scripts]# cd ../modules</span><br><span class="line">[root@rhel7 modules]# pwd</span><br><span class="line">/etc/sysconfig/modules</span><br></pre></td></tr></tbody></table></figure>

<h2 id="文件属性" class="article-heading"><a href="#文件属性" class="headerlink" title="文件属性"></a>文件属性<a class="article-anchor" href="#文件属性" aria-hidden="true"></a></h2><p>类 Unix 系统的设计初衷就是为让多用户同时工作,所以也迫使 Linux 系统有了极强的安全性。接下来我们一起来看看 linux 系统示如何实现安全性的。</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@rhel7 tmp]# ll /</span><br><span class="line">total 4148</span><br><span class="line">lrwxrwxrwx.   1 root root        7 May  5 17:28 bin -&gt; usr/bin</span><br><span class="line">dr-xr-xr-x.   4 root root     4096 May  5 17:40 boot</span><br><span class="line">drwxr-xr-x.  15 root root     4096 Aug 19 13:19 content</span><br><span class="line">-rw-------    1 root root  2166784 Aug  8 05:24 core.2052</span><br><span class="line">-rw-------    1 root root 19017728 Aug  8 05:27 core.2488</span><br><span class="line">drwxr-xr-x   19 root root     3380 Oct 26 12:22 dev</span><br><span class="line">drwxr-xr-x. 138 root root    12288 Oct 26 12:22 etc</span><br><span class="line">drwxr-xr-x.   4 root root       31 Aug 23 17:32 home</span><br><span class="line">lrwxrwxrwx.   1 root root        7 May  5 17:28 lib -&gt; usr/lib</span><br><span class="line">lrwxrwxrwx.   1 root root        9 May  5 17:28 lib64 -&gt; usr/lib64</span><br><span class="line">drwxr-xr-x.   2 root root        6 May 25  2015 media</span><br><span class="line">drwxr-xr-x.   2 root root        6 May 25  2015 mnt</span><br><span class="line">drwxr-xr-x.   4 root root       36 May  6 13:19 opt</span><br><span class="line">dr-xr-xr-x  229 root root        0 Oct 26  2016 proc</span><br><span class="line">dr-xr-x---.  26 root root     4096 Oct 12 14:11 root</span><br><span class="line">drwxr-xr-x   39 root root     1200 Oct 26 12:24 run</span><br><span class="line">lrwxrwxrwx.   1 root root        8 May  5 17:28 sbin -&gt; usr/sbin</span><br><span class="line">drwxr-xr-x.   2 root root        6 May 25  2015 srv</span><br><span class="line">dr-xr-xr-x   13 root root        0 Oct 26  2016 sys</span><br><span class="line">drwxrwxrwt.  31 root root     4096 Oct 26 12:42 tmp</span><br><span class="line">drwxr-xr-x.  13 root root     4096 May  5 17:28 usr</span><br><span class="line">drwxr-xr-x.  23 root root     4096 Oct 26  2016 var</span><br></pre></td></tr></tbody></table></figure>

<p>第二字段,文件硬链接数或目录子目录数</p>
<h3 id="文件的分类" class="article-heading"><a href="#文件的分类" class="headerlink" title="文件的分类"></a>文件的分类<a class="article-anchor" href="#文件的分类" aria-hidden="true"></a></h3><table>
<thead>
<tr>
<th align="left">文件</th>
<th align="left"></th>
<th align="left">操作</th>
</tr>
</thead>
<tbody><tr>
<td align="left">普通文件</td>
<td align="left">纯文本档 (ASCII)</td>
<td align="left">touch file</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">二进制文件 (binary)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left">数据格式文件 (data)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">目录</td>
<td align="left">(directory)</td>
<td align="left">mkdir dire</td>
</tr>
<tr>
<td align="left">连结档</td>
<td align="left">(link)</td>
<td align="left">ln file hfile</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">ln -s file sfile</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">ln -s ‘pwd’/file ssfile 绝对路径的软链接文件</td>
</tr>
<tr>
<td align="left">设备与装置文件</td>
<td align="left">(device)</td>
<td align="left">mknod bfile b 252 0 块设备</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">mknod cfile c 4 2 字符设备</td>
</tr>
<tr>
<td align="left">数据输送文件</td>
<td align="left">(FIFO, pipe)</td>
<td align="left">mkfifo pfile 管道文件</td>
</tr>
<tr>
<td align="left">资料接口文件</td>
<td align="left">(sockets)</td>
<td align="left">mksock sfile sock 文件</td>
</tr>
</tbody></table>
<p>-: 普通文件, d: 目录文件, l: 链接文件, b: 块设备文件, c: 字符设备文件, p: 管道文件</p>
<h3 id="一般权限-UGO" class="article-heading"><a href="#一般权限-UGO" class="headerlink" title="一般权限 UGO"></a>一般权限 UGO<a class="article-anchor" href="#一般权限-UGO" aria-hidden="true"></a></h3><p>Linux 系统中一切都是文件,文件和目录的所属与权限 —— 来分别规定所有者、所有组、其余人的读,写,执行权限。</p>
<p>读 (read) ,写 (write) ,执行 (execute )简写即为 (r,w,x) ,亦可用数字 (4,2,1) 表示</p>
<table>
<thead>
<tr>
<th align="left">权限</th>
<th align="left">读</th>
<th align="left">写</th>
<th align="left">执行</th>
<th align="left">读</th>
<th align="left">写</th>
<th align="left">执行</th>
<th align="left">读</th>
<th align="left">写</th>
<th align="left">执行</th>
</tr>
</thead>
<tbody><tr>
<td align="left">字符表示</td>
<td align="left">r</td>
<td align="left">w</td>
<td align="left">x</td>
<td align="left">r</td>
<td align="left">w</td>
<td align="left">x</td>
<td align="left">r</td>
<td align="left">w</td>
<td align="left">x</td>
</tr>
<tr>
<td align="left">数字表示</td>
<td align="left">4</td>
<td align="left">2</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">2</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">2</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">权限分配</td>
<td align="left">文件所有者</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">文件所属组</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">其他用户</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<p>举例 : 如果某文件权限为 7 则代表可读,可写,可执行 (4+2+1) 。若权限为 6(4+2) 则代表可读,可写。那么权限为 5 与 3 时分别代表了什么?</p>
<p>答案:权限为 5 代表可读 (4) 和可执行 (1) 。而权限为 3 代表可写 (2) 和可执行 (1) 。</p>
<hr>
<p>文件的权限为 rw-r–r– 也就是分别表示所有者 ( 属主 ) 有读写权限,所有组 ( 属组 ) 有读权限,其余人也仅有读权限。</p>
<p>这个时候发现问题了吗?对于目录文件的读和写权限我们还可以理解,目录要能执行操作?</p>
<p>普通文件即实际保存数据的地方,其并不具备删除自身的权限:</p>
<ul>
<li>r: 可读取文件的实际内容</li>
<li>w: 可编辑 / 新增 / 修改该文件的实际内容</li>
<li>x: 可被执行</li>
</ul>
<p>目录文件即保存有目录结构和文件权限:</p>
<ul>
<li>r: 可读取目录结构和权限</li>
<li>w: 可更改目录结构列表、新建 / 删除 / 重命名 / 转移子文件 / 目录。</li>
<li>x: 表示用户可进入到该目录中</li>
</ul>
<h3 id="特殊权限-suid-sgid-sticky" class="article-heading"><a href="#特殊权限-suid-sgid-sticky" class="headerlink" title="特殊权限 suid\sgid\sticky"></a>特殊权限 suid\sgid\sticky<a class="article-anchor" href="#特殊权限-suid-sgid-sticky" aria-hidden="true"></a></h3><p>单纯对文件位置的 rwx 权限肯定不能满足我们对安全、便捷工作的需求,所以便有了 SUID 与 SGID 的特殊权限机制。</p>
<p>SUID</p>
<ul>
<li>范围 : 二进制的可执行的文件</li>
<li>作用 : 临时拥有所有者的权限</li>
</ul>
<p>SGID</p>
<ul>
<li>范围 : 目录或者拥有可执行权限的文件</li>
<li>作用 : 继承目录所属组</li>
</ul>
<p>SBIT ( STICKY )</p>
<ul>
<li>范围 : 目录</li>
<li>作用 : 只有 root 用户和文件拥有者有权删除目录中的文件。</li>
</ul>
<p>SUID</p>
<p>比如:<br><code>-rwsr-xr-x. 1 root root 27832 Jan 30 2014 /usr/bin/passwd</code></p>
<p>所有用户都可以执行用于修改用户密码的 passwd 命令,但用户密码保存在 /etc/shadow 文件中,默认权限是 000 即除了超级用户 root 外的所有用户都没有查看或编辑该文件的权限,所以对 passwd 命令加上SUID 权限位,则可让普通用户临时获得程序所有者的身份,即以 root 用户的身份将变更的密码信息写入到 shadow 文件中。</p>
<p><code>---s--x--x. 1 root root 130712 Sep 1 2015 sudo</code></p>
<p>SGID:</p>
<p>功能一:让执行者临时拥有属组的权限(对拥有执行权限的二进制程序设置)</p>
<p>举例:</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">-r-xr-sr-x. 1 root tty</span><br><span class="line">-rwxr-sr-x. 1 root tty</span><br><span class="line">15344 Jan 27 2014 wall</span><br><span class="line">19536 Aug 21 2015 write</span><br></pre></td></tr></tbody></table></figure>

<p>功能二:在该目录中创建的文件自动继承此目录的用户组(只可以对目录设置)</p>
<p>比如:我们将某个部门的工作目录给予了 SGID 权限,这样所有人创建的文件都归相同的工作组,这样方便以后的管理。</p>
<p>SBIT(Sticky Bit):</p>
<p>比如:<br><code>drwxrwxrwt. 7 root root 4096 Jun 22 13:20 /tmp</code></p>
<p>一般老师希望学生可以将作业上传到某个特定目录 —— 但为了避免某些小破坏份子,想限制删除其他人文件的话,那就要设置 SBIT 位了,当然也可以叫做特殊权限位之粘滞位。</p>
<h3 id="隐藏属性-ATTR" class="article-heading"><a href="#隐藏属性-ATTR" class="headerlink" title="隐藏属性 ATTR"></a>隐藏属性 ATTR<a class="article-anchor" href="#隐藏属性-ATTR" aria-hidden="true"></a></h3><p>文件权限除了 UGO 读写执行与 SUID 、 SGID 、 SBIT 外还有一种隐藏权限,例如明明有权限删除某个文件却报错了,或者仅能为某个文件追加内容而不能减少内容,遇到这种很 “ 奇怪 ” 的文件,就要怀疑是文件被设置隐藏权限了。</p>
<p>chattr 命令用于设置文件的隐藏权限,格式为: “ chattr [ 参数 ] 文件 ” 。</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">i</td>
<td align="left">将无法对文件进行修改,若对目录设置后则仅能修改子文件而不能新建或删除。</td>
</tr>
<tr>
<td align="left">a</td>
<td align="left">仅允许补充(追加)内容.无法覆盖/删除(Append Only)。</td>
</tr>
<tr>
<td align="left">S</td>
<td align="left">文件内容变更后立即同步到硬盘(sync)。</td>
</tr>
<tr>
<td align="left">s</td>
<td align="left">彻底从硬盘中删除,不可恢复(用 0 填充原文件所在硬盘区域)。</td>
</tr>
<tr>
<td align="left">A</td>
<td align="left">不再修改这个文件的最后访问时间(atime)。</td>
</tr>
<tr>
<td align="left">b</td>
<td align="left">不再修改文件或目录的存取时间。</td>
</tr>
<tr>
<td align="left">D</td>
<td align="left">检查压缩文件中的错误。</td>
</tr>
<tr>
<td align="left">d</td>
<td align="left">当使用 dump 命令备份时忽略本文件/目录。</td>
</tr>
<tr>
<td align="left">c</td>
<td align="left">默认将文件或目录进行压缩。</td>
</tr>
<tr>
<td align="left">u</td>
<td align="left">当删除此文件后依然保留其在硬盘中的数据,方便日后恢复。</td>
</tr>
<tr>
<td align="left">t</td>
<td align="left">让文件系统支持尾部合并(tail-merging)。</td>
</tr>
<tr>
<td align="left">X</td>
<td align="left">可以直接访问压缩文件的内容。</td>
</tr>
</tbody></table>
<p>lsattr 命令用于显示文件的隐藏权限,格式为: “ lsattr [ 参数 ] 文件 ” 。</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">a</td>
<td align="left">显示所有文件和目录。</td>
</tr>
<tr>
<td align="left">l</td>
<td align="left">显示隐藏属性的全称(默认简写成一个字母)。</td>
</tr>
<tr>
<td align="left">R</td>
<td align="left">递归处理,将指定目录下的所有文件及子目录一并处理。</td>
</tr>
<tr>
<td align="left">d</td>
<td align="left">若目标文件为目录,请加此参数。</td>
</tr>
</tbody></table>
<p>具体用法见第三章节</p>
<h3 id="文件访问控制列表-ACL" class="article-heading"><a href="#文件访问控制列表-ACL" class="headerlink" title="文件访问控制列表 ACL"></a>文件访问控制列表 ACL<a class="article-anchor" href="#文件访问控制列表-ACL" aria-hidden="true"></a></h3><p>不知大家有没有发现其实上面讲解的 rwx 权限、特殊权限、隐藏权限都是对某一类用户设置的,而如果希望对某个指定的用户进行单独的权限设置,那么就需要用文件的访问控制列表来实现啦。</p>
<p>我们可以基于普通文件或目录设置进行设置 ACL ,通俗来说 ACL 就是设置指定的特定用户或用户组对某个文件的操作权限。并且如果对某个目录设置了访问控制策略,那么子文件则继承其访问策略,而若对文件设置了访问控制策略则不再继承上级目录的控制策略。</p>
<p>ACL:Access Control List 缩写 ,UGO 的 rwx 权限以外的细部权限设置。</p>
<ul>
<li>setfacl 命令用于增加或者修改 ACL 规则,格式为: ” setfacl [ 参数 ] 文件 ” 。</li>
<li>getfacl 命令用于显示文件的 ACL 规则,格式为: ” getfacl 文件 ” 。</li>
</ul>
<p>详细命令用法请看第三章节。</p>
<h2 id="文件相关的命令" class="article-heading"><a href="#文件相关的命令" class="headerlink" title="文件相关的命令"></a>文件相关的命令<a class="article-anchor" href="#文件相关的命令" aria-hidden="true"></a></h2><table>
<thead>
<tr>
<th align="left">文件</th>
<th align="left">命令</th>
<th align="left">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="left">文件的管理</td>
<td align="left">ls ,cd, pwd, touch,mkdir, rmdir</td>
<td align="left">新建、删除</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">cp, rm, mv</td>
<td align="left">复制、删除、移动</td>
</tr>
<tr>
<td align="left">文件内容的查看</td>
<td align="left">cat, tac, nl</td>
<td align="left">直接查看内容</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">more, less</td>
<td align="left">可翻页查看</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">head, tail</td>
<td align="left">资料撷取</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">od</td>
<td align="left">非纯文本档</td>
</tr>
<tr>
<td align="left">文件的权限</td>
<td align="left">chmod chown</td>
<td align="left">文件的拥有者和所属组 ugo 权限</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">umask</td>
<td align="left">文件预设</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">chattr, lsattr</td>
<td align="left">文件隐藏属性</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">SUID, SGID, SBIT</td>
<td align="left">文件特殊权限</td>
</tr>
<tr>
<td align="left">文件类型</td>
<td align="left">file</td>
<td align="left">文件类型查看</td>
</tr>
<tr>
<td align="left">文件的搜索</td>
<td align="left">which</td>
<td align="left">指令文件的搜索</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">whereis, locate, find</td>
<td align="left">文件的搜索</td>
</tr>
</tbody></table>
<h3 id="权限的修改-chmod-chown-chgrp-umask" class="article-heading"><a href="#权限的修改-chmod-chown-chgrp-umask" class="headerlink" title="权限的修改 chmod chown chgrp umask"></a>权限的修改 chmod chown chgrp umask<a class="article-anchor" href="#权限的修改-chmod-chown-chgrp-umask" aria-hidden="true"></a></h3><h4 id="chmod" class="article-heading"><a href="#chmod" class="headerlink" title="chmod"></a>chmod<a class="article-anchor" href="#chmod" aria-hidden="true"></a></h4><p>chmod [ u g o a 所有用户 ] [ + - = ] [ rwx] /[ 777]</p>
<ul>
<li>w 结合 x 权限可以对目录下的文件进行以下操作 : cd rm touch cp</li>
<li>r 结合 x 权限可以对目录下的文件进行 ls 操作</li>
<li>x 决定了能否进入目录</li>
</ul>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[ root@www tmp]# ll dabao</span><br><span class="line">-rw-r--r--. 1 root root 0 Mar 21 06:09 dabao</span><br><span class="line">[ root@www tmp]# chmod 777 dabao</span><br><span class="line">[ root@www tmp]# ll dabao</span><br><span class="line">-rwxrwxrwx. 1 root root 0 Mar 21 06:09 dabao3.1.2 chown</span><br></pre></td></tr></tbody></table></figure>

<p>chown user:group 目录 / 文件</p>
<p>-R 针对目录递归修改拥有者</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[ root@www tmp]# chown dabao. dabao</span><br><span class="line">[ root@www tmp]# ll dabao</span><br><span class="line">-rwxrwxrwx. 1 dabao dabao 0 Mar 21 06:09 dabao</span><br><span class="line">[ root@www tmp]# chown -R dabao dabao1</span><br><span class="line">[ root@www tmp]# ll -R dabao1</span><br><span class="line">dabao1:</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x. 3 dabao root 4096 Mar 21 06:11 1</span><br><span class="line">dabao1/1:</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x. 2 dabao root 4096 Mar 21 06:11 2</span><br><span class="line">dabao1/1/2:</span><br><span class="line">total 0</span><br></pre></td></tr></tbody></table></figure>

<h4 id="chgrp" class="article-heading"><a href="#chgrp" class="headerlink" title="chgrp"></a>chgrp<a class="article-anchor" href="#chgrp" aria-hidden="true"></a></h4><p>修改文件目录的所属组</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[ root@www tmp]# chgrp -R dabao dabao1</span><br><span class="line">[ root@www tmp]# ll -R dabao1</span><br><span class="line">dabao1:</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x. 3 dabao dabao 4096 Mar 21 06:11 1</span><br><span class="line">dabao1/1:</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x. 2 dabao dabao 4096 Mar 21 06:11 2</span><br><span class="line">dabao1/1/2:</span><br><span class="line">total 0</span><br></pre></td></tr></tbody></table></figure>

<h4 id="umask" class="article-heading"><a href="#umask" class="headerlink" title="umask"></a>umask<a class="article-anchor" href="#umask" aria-hidden="true"></a></h4><p>umask 创建文件 / 目录的默认权限</p>
<p>公式</p>
<p>最大权限 -umask= 默认权限</p>
<ul>
<li>user 文件 666 -002 = 644 rw-rw-r–</li>
<li>root 文件 666 -022 = 664 rw-r–r–</li>
<li>user 目录 777 -002 = 755 rwxrwxr-x</li>
<li>root 目录 777 -022 = 775 rwxr-xr-x</li>
</ul>
<p>umask 777 只针对当前环境临时生效</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[ root@www tmp]# umask</span><br><span class="line">0022</span><br></pre></td></tr></tbody></table></figure>

<h4 id="相关文档-etc-profile-bash-profile" class="article-heading"><a href="#相关文档-etc-profile-bash-profile" class="headerlink" title="相关文档 /etc/profile ~/.bash_profile"></a>相关文档 /etc/profile ~/.bash_profile<a class="article-anchor" href="#相关文档-etc-profile-bash-profile" aria-hidden="true"></a></h4><ul>
<li>/etc/profile 定义了普通用户和 root 用户的 umask 值 , 对所有用户生效</li>
<li>~/.bash_profile 可以定义当前用户的 umask 值 , 只对当前用户生效 , 需要重新登陆用户后生效。</li>
</ul>
<p>默认属性相加减 , 则档案变成 :666-003=663, 是 -rw-rw–wx , 错 !!</p>
<h3 id="ATTR-权限命令-chattr-lsattr" class="article-heading"><a href="#ATTR-权限命令-chattr-lsattr" class="headerlink" title="ATTR 权限命令 chattr lsattr"></a>ATTR 权限命令 chattr lsattr<a class="article-anchor" href="#ATTR-权限命令-chattr-lsattr" aria-hidden="true"></a></h3><h4 id="chattr" class="article-heading"><a href="#chattr" class="headerlink" title="chattr"></a>chattr<a class="article-anchor" href="#chattr" aria-hidden="true"></a></h4><p>配置文件案隐藏属性</p>
<p>属性设置常见的是 a 和 i 的设定 , 必须要 root 身份</p>
<p>chattr [ +-= ][ ASacdistu] 文件 / 目录</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">+</td>
<td align="left">增加</td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">移除</td>
</tr>
<tr>
<td align="left">=</td>
<td align="left">设定为</td>
</tr>
<tr>
<td align="left">A</td>
<td align="left">访问时间 atime 不修改 , 对速度较慢计算机有帮助</td>
</tr>
<tr>
<td align="left">S</td>
<td align="left">『同步』写入磁盘</td>
</tr>
<tr>
<td align="left">a</td>
<td align="left">只能增加数据 , 不能删除 / 修改数据 (root)</td>
</tr>
<tr>
<td align="left">c</td>
<td align="left">自动『压缩』 , 读取时自动解压缩</td>
</tr>
<tr>
<td align="left">d</td>
<td align="left">不被 dump 备份</td>
</tr>
<tr>
<td align="left">i</td>
<td align="left">以下操作不可执行 : 『删除、改名、设置连结、写入、新增资料』 ( root )</td>
</tr>
<tr>
<td align="left">s</td>
<td align="left">彻底删除 , 无法挽回</td>
</tr>
<tr>
<td align="left">u</td>
<td align="left">与 s 相反 , 删除可挽回</td>
</tr>
</tbody></table>
<h4 id="lsattr" class="article-heading"><a href="#lsattr" class="headerlink" title="lsattr"></a>lsattr<a class="article-anchor" href="#lsattr" aria-hidden="true"></a></h4><p>lsattr [ -adR] 文件 / 目录</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-a</td>
<td align="left">显示隐藏文件的属性</td>
</tr>
<tr>
<td align="left">-d</td>
<td align="left">仅列出目录本身属性</td>
</tr>
<tr>
<td align="left">-R</td>
<td align="left">连同子目录</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">A 访问时间 atime 不修改</span><br><span class="line">[root@rhel7 tmp]# chattr +A file1</span><br><span class="line">[root@rhel7 tmp]# lsattr file1</span><br><span class="line">-------A-------- file1</span><br><span class="line">[root@rhel7 tmp]# cat file1</span><br><span class="line">hi</span><br><span class="line">[root@rhel7 tmp]# stat file1</span><br><span class="line">File: ‘file1’</span><br><span class="line">Size: 3</span><br><span class="line">Blocks: 8</span><br><span class="line">IO Block: 4096 regular file</span><br><span class="line">Device: fd00h/64768d</span><br><span class="line">Inode: 52973916 Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--) Uid: ( 0/ root) Gid: ( 0/ root)</span><br><span class="line">Context: unconfined_u:object_r:user_tmp_t:s0Access: 2016-06-22 14:49:50.221000000 +0800</span><br><span class="line">Modify: 2016-06-22 14:49:48.025000000 +0800</span><br><span class="line">Change: 2016-06-22 14:50:14.621000000 +0800</span><br><span class="line">Birth: -</span><br><span class="line">[root@rhel7 tmp]# cat file1</span><br><span class="line">hi</span><br><span class="line">[root@rhel7 tmp]# stat file1</span><br><span class="line">File: ‘file1’</span><br><span class="line">Size: 3</span><br><span class="line">Blocks: 8</span><br><span class="line">IO Block: 4096 regular file</span><br><span class="line">Device: fd00h/64768d</span><br><span class="line">Inode: 52973916 Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--) Uid: ( 0/ root) Gid: ( 0/ root)</span><br><span class="line">Context: unconfined_u:object_r:user_tmp_t:s0</span><br><span class="line">Access: 2016-06-22 14:49:50.221000000 +0800</span><br><span class="line">Modify: 2016-06-22 14:49:48.025000000 +0800</span><br><span class="line">Change: 2016-06-22 14:50:14.621000000 +0800</span><br><span class="line">Birth: -</span><br><span class="line">[root@rhel7 tmp]# chattr -A file1</span><br><span class="line">a 只能增加数据 , 不能删除 / 修改数据 (root)</span><br><span class="line">[root@rhel7 tmp]# chattr +a file1</span><br><span class="line">[root@rhel7 tmp]# lsattr file1</span><br><span class="line">-----a---------- file1</span><br><span class="line">[root@rhel7 tmp]# echo 99 &gt; file1</span><br><span class="line">-bash: file1: Operation not permitted</span><br><span class="line">[root@rhel7 tmp]# echo 99 &gt;&gt; file1</span><br><span class="line">[root@rhel7 tmp]# cat file1</span><br><span class="line">hi</span><br><span class="line">99</span><br><span class="line">i 以下操作不可执行 : 『删除、改名、设置连结、写入、新增资料』 ( root )</span><br><span class="line">[root@rhel7 tmp]# chattr +i file1</span><br><span class="line">[root@rhel7 tmp]# rm -rf file1</span><br><span class="line">rm: cannot remove ‘file1’: Operation not permitted</span><br><span class="line">[root@rhel7 tmp]# mv file1 file100</span><br><span class="line">mv: cannot move ‘file1’ to ‘file100’: Operation not permitted</span><br><span class="line">[root@rhel7 tmp]# link file1 file1h</span><br><span class="line">link: cannot create link ‘file1h’ to ‘file1’: Operation not permitted</span><br><span class="line">[root@rhel7 tmp]# echo nini&gt;&gt;file1</span><br><span class="line">-bash: file1: Permission denied</span><br><span class="line">[root@rhel7 tmp]# chattr -i file1</span><br><span class="line">[root@rhel7 tmp]# lsattr file1</span><br><span class="line">---------------- file1</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ACL-权限命令" class="article-heading"><a href="#ACL-权限命令" class="headerlink" title="ACL 权限命令"></a>ACL 权限命令<a class="article-anchor" href="#ACL-权限命令" aria-hidden="true"></a></h3><h4 id="ACL-权限概念" class="article-heading"><a href="#ACL-权限概念" class="headerlink" title="ACL 权限概念"></a>ACL 权限概念<a class="article-anchor" href="#ACL-权限概念" aria-hidden="true"></a></h4><p>ACL:Access Control List 缩写 ,UGO 的 rwx 权限以外的细部权限设置。</p>
<p>ACL 可以针对单一用户 , 单一文件 , 单一目录 r,w,x 的权限规范</p>
<p>针对几个项目 :</p>
<ol>
<li>使用者 (user): 可以针对使用者设定权限</li>
<li>群组 (group): 针对群组为对象设定权限</li>
<li>默认属性 (mask): 还可以针对在该目录下在建立新档案或目录时 , 规范新数据的默认权限</li>
</ol>
<h4 id="getfacl" class="article-heading"><a href="#getfacl" class="headerlink" title="getfacl"></a>getfacl<a class="article-anchor" href="#getfacl" aria-hidden="true"></a></h4><p>取得文件 / 目录的 ACL 设定内容</p>
<p>getfacl filename</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@www tmp]# getfacl dabao</span><br><span class="line"> file: dabao</span><br><span class="line"> owner: dabao</span><br><span class="line"> group: dabao</span><br><span class="line">user::rwx</span><br><span class="line">group::rwx</span><br><span class="line">other::rwx</span><br></pre></td></tr></tbody></table></figure>

<h4 id="setfacl" class="article-heading"><a href="#setfacl" class="headerlink" title="setfacl"></a>setfacl<a class="article-anchor" href="#setfacl" aria-hidden="true"></a></h4><p>设置文件 / 目录的 ACL 规范</p>
<p>setfacl [-bkRd] [{-m|-x} acl 参数 ] 目标文件名</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-m</td>
<td align="left">设置 acl 参数</td>
</tr>
<tr>
<td align="left">-x</td>
<td align="left">删除 acl 参数</td>
</tr>
<tr>
<td align="left">-b</td>
<td align="left">删除所有 acl 参数</td>
</tr>
<tr>
<td align="left">-k</td>
<td align="left">删除预设的 acl 参数</td>
</tr>
<tr>
<td align="left">-R</td>
<td align="left">递归设置 acl 参数</td>
</tr>
<tr>
<td align="left">-d</td>
<td align="left">设置『预设 acl 参数』只对目录有效 , 在该目录新建的数据会引用</td>
</tr>
</tbody></table>
<p>命令格式 :</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">『 u:[ 使用者账号列表 ]:[ rwx] 』 &lt;= = 针对特定用户</span><br><span class="line">『 g:[ 群组列表 ]:[rwx] 』 &lt;= = 针对特定用户组</span><br><span class="line">『 m:[ rwx] 』 &lt;= = 针对有效权限 mask</span><br><span class="line">『 d:[ ug]: 使用者列表 :[ rwx] 』 针对预设权限 , 属性将继承到次目录</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@rhel7 tmp]# setfacl -m u:student:rwx file1</span><br><span class="line">[root@rhel7 tmp]# setfacl -m g:student:rw file1</span><br><span class="line">[root@rhel7 tmp]# getfacl file1</span><br><span class="line"> file: file1</span><br><span class="line"> owner: root</span><br><span class="line"> group: root</span><br><span class="line">user::rw-</span><br><span class="line">user:student:rwx</span><br><span class="line">group::r--</span><br><span class="line">group:student:rw-</span><br><span class="line">mask::rwx</span><br><span class="line">other::r--</span><br><span class="line">-d 针对预设权限 , 属性将继承到次目录</span><br><span class="line">[root@rhel7 tmp]# mkdir dabao</span><br><span class="line">[root@rhel7 tmp]# setfacl -d -m u:student:rwx dabao</span><br><span class="line">[root@rhel7 tmp]# getfacl dabao</span><br><span class="line"> file: dabao</span><br><span class="line"> owner: root</span><br><span class="line"> group: root</span><br><span class="line">user::rwx</span><br><span class="line">group::r-x</span><br><span class="line">other::r-x</span><br><span class="line">default:user::rwx</span><br><span class="line">default:user:student:rwx</span><br><span class="line">default:group::r-x</span><br><span class="line">default:mask::rwx</span><br><span class="line">default:other::r-x</span><br><span class="line">[root@rhel7 tmp]# ll dabao -d</span><br><span class="line">drwxr-xr-x+ 2 root root 6 Jun 22 15:09 dabao</span><br><span class="line">[root@rhel7 tmp]# touch dabao/kk</span><br><span class="line">[root@rhel7 tmp]# ll dabao</span><br><span class="line">total 4</span><br><span class="line">-rw-rw-r--+ 1 root root 0 Jun 22 15:10 kk</span><br><span class="line">[root@rhel7 tmp]# getfacl dabao/kk</span><br><span class="line"> file: dabao/kk</span><br><span class="line"> owner: root</span><br><span class="line"> group: root</span><br><span class="line">user::rw-</span><br><span class="line">user:student:rwx</span><br><span class="line">effective:rw-</span><br><span class="line">group::r-x</span><br><span class="line">effective:r--</span><br><span class="line">mask::rw-</span><br><span class="line">other::r--</span><br><span class="line"> 切换为 student 用户</span><br><span class="line">[student@rhel7 tmp]$ cd dabao</span><br><span class="line">[student@rhel7 dabao]$ ll</span><br><span class="line">total 4</span><br><span class="line">-rw-rw-r--+ 1 root root 0 Jun 22 15:10 kk</span><br><span class="line">[student@rhel7 dabao]$ cat kk</span><br></pre></td></tr></tbody></table></figure>

<h2 id="文件存储结构" class="article-heading"><a href="#文件存储结构" class="headerlink" title="文件存储结构"></a>文件存储结构<a class="article-anchor" href="#文件存储结构" aria-hidden="true"></a></h2><p>Linux 操作系统的文件权限 (rwx) 与文件属性 ( 拥有者、群组、 时间参数等 ) , 文件系统会将这两部分<br>的数据分别存放在不同的区块 , 权限不属性放置到 inode 中 , 实际数据则放置到 data block 区块中。<br>另外 , 还有一个超级区块 (superblock) 会记录整个 文件系统的整体信息 , 包括 inode 和 block<br>的总量、使用量、剩余量等。</p>
<p><img src="pic/07.png" alt="07"></p>
<ul>
<li>文件的属性和权限数据 –&gt; 放置到 inode 4 号</li>
<li>文件数据的实际放置点为 2, 7, 13, 15 这四个 block 号码</li>
</ul>
<p>对于目录: inode 记录该目录的相关权限与属性 , 并记录分配到的那块 block 号码 ; 而 block 则<br>是记录在该目录下的文件或目录的文件名和对应的 inode 号的数据。如下图所示:</p>
<p><img src="pic/08.png" alt="08"></p>
<h2 id="软硬方式链接" class="article-heading"><a href="#软硬方式链接" class="headerlink" title="软硬方式链接"></a>软硬方式链接<a class="article-anchor" href="#软硬方式链接" aria-hidden="true"></a></h2><p>在 Linux 系统中的 ln 命令能够让用户创建出两种不同类型的文件快捷方式,一定要注意区分:</p>
<p>硬链接 (hard link) 可以被理解为一个 “ 指向原始文件 inode 的指针 ” ,系统不为它分配独立的 inode<br>与文件,所以实际上来讲硬链接文件与原始文件其实是同一个文件,只是名字不同。于是每添加一个硬链接,<br>该文件的 inode 连接数就会增加 1 ,直到该文件的 inode 连接数归 0 才是彻底删除。概括来说因为硬链<br>接实际就是指向原文件 inode 的指针,即便原始文件被删除依然可以通过链接文件访问,但是不能跨文件<br>系统也不能链接目录文件。</p>
<p>软链接也称为符号链接( symbolic link )即 “ 仅仅包含它索要链接文件的路径名 ” 因此能做目录链接也<br>可以跨越文件系统,但原始文件被删除后链接文件也将失效,如同 WinodwTM 中的 “ 快捷方式 ” 。</p>
<p>ln 命令用于创建链接文件,格式为: “ ln [ 选项 ] 目标 ” 。</p>
<ul>
<li>创建硬链接 :“ln 文件名 链接名 ”</li>
<li>创建软链接 :“ln -s 文件名 连接名 ”</li>
</ul>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-s</td>
<td align="left">创建”符号链接”(默认是硬链接)</td>
</tr>
<tr>
<td align="left">-f</td>
<td align="left">强制创建文件或目录的链接</td>
</tr>
<tr>
<td align="left">-i</td>
<td align="left">覆盖前先询问</td>
</tr>
<tr>
<td align="left">-v</td>
<td align="left">显示创建链接的过程</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@rhel7 tmp]# echo this is a &gt; file</span><br><span class="line">[root@rhel7 tmp]# cat file</span><br><span class="line">this is a</span><br><span class="line">[root@rhel7 tmp]# ll file</span><br><span class="line">-rw-r--r--. 1 root root 10 Jun 22 16:02 file</span><br><span class="line">[root@rhel7 tmp]# ln file fileh</span><br><span class="line">[root@rhel7 tmp]# ll file fileh</span><br><span class="line">[root@rhel7 tmp]# ll file fileh files -i</span><br><span class="line">52973928 -rw-r--r--. 2 root root 10 Jun 22 16:02 file</span><br><span class="line">52973928 -rw-r--r--. 2 root root 10 Jun 22 16:02 fileh</span><br><span class="line">52973930 lrwxrwxrwx. 1 root root 4 Jun 22 16:03 files -&gt; filefile</span><br></pre></td></tr></tbody></table></figure>

<p><img src="pic/09.png" alt="09"></p>
<h2 id="指令和文件的搜索" class="article-heading"><a href="#指令和文件的搜索" class="headerlink" title="指令和文件的搜索"></a>指令和文件的搜索<a class="article-anchor" href="#指令和文件的搜索" aria-hidden="true"></a></h2><p>which whereis locate find</p>
<h3 id="肉眼查找-ls-R" class="article-heading"><a href="#肉眼查找-ls-R" class="headerlink" title="肉眼查找 : ls -R"></a>肉眼查找 : ls -R<a class="article-anchor" href="#肉眼查找-ls-R" aria-hidden="true"></a></h3><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[ root@www ~]# ls -R /tmp</span><br><span class="line">/tmp:</span><br><span class="line">dabao</span><br><span class="line">dabao1</span><br><span class="line">/tmp/dabao1:</span><br><span class="line">1</span><br><span class="line">/tmp/dabao1/1:</span><br><span class="line">2</span><br><span class="line">/tmp/dabao1/1/2:</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## 指令的搜寻 :which</span></span></span><br><span class="line"></span><br><span class="line">which [ -a] command</span><br><span class="line"></span><br><span class="line">选项与参数 :</span><br><span class="line"></span><br><span class="line">-a</span><br><span class="line">- : 将所有由 PATH 目录中可以找到的指令均列出</span><br><span class="line">- : 只显示第一个找到的</span><br><span class="line"></span><br><span class="line">注意 :</span><br><span class="line">1. 系统内建命令找不到 , type 查看</span><br><span class="line">2. alias 命令别名</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">[ root@www ~]# which cat</span><br><span class="line">/bin/cat</span><br><span class="line">[ root@www ~]# which postfix</span><br><span class="line">/usr/sbin/postfix</span><br></pre></td></tr></tbody></table></figure>

<h3 id="文件名的搜寻-whereis-locate-find" class="article-heading"><a href="#文件名的搜寻-whereis-locate-find" class="headerlink" title="文件名的搜寻 :whereis, locate, find"></a>文件名的搜寻 :whereis, locate, find<a class="article-anchor" href="#文件名的搜寻-whereis-locate-find" aria-hidden="true"></a></h3><h4 id="whereis" class="article-heading"><a href="#whereis" class="headerlink" title="whereis"></a>whereis<a class="article-anchor" href="#whereis" aria-hidden="true"></a></h4><p>whereis [ -bmsu] [ -BMS directory…-f] filename..</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-b</td>
<td align="left">只寻找 binary 二进制 格式的文件</td>
</tr>
<tr>
<td align="left">-m</td>
<td align="left">只寻找在 说明文件 manual 路径下的文件</td>
</tr>
<tr>
<td align="left">-s</td>
<td align="left">只寻找 source 来源的文件</td>
</tr>
<tr>
<td align="left">-u</td>
<td align="left">搜寻不在上述三个项目当中的其他特殊文件</td>
</tr>
<tr>
<td align="left">-l</td>
<td align="left">查看 whereis 可搜寻的路径</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[ root@www ~]# whereis /etc/passwd</span><br><span class="line">passwd: /usr/bin/passwd /etc/passwd.OLD /etc/passwd /usr/share/man/man1/passwd.1.gz</span><br><span class="line">/usr/share/man/man5/passwd.5.gz</span><br><span class="line">[ root@www ~]# whereis man</span><br><span class="line">man: /usr/bin/man /etc/man.config /usr/share/man /usr/share/man/man7/man.7.gz</span><br><span class="line">/usr/share/man/man1p/man.1p.gz /usr/share/man/man1/man.1.gz</span><br></pre></td></tr></tbody></table></figure>

<h4 id="locate" class="article-heading"><a href="#locate" class="headerlink" title="locate"></a>locate<a class="article-anchor" href="#locate" aria-hidden="true"></a></h4><p>locate [ -ir] keyword</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-i</td>
<td align="left">忽略大小写的差异 ;</td>
</tr>
<tr>
<td align="left">-r</td>
<td align="left">后面可接正规表示法的显示方式</td>
</tr>
</tbody></table>
<ul>
<li>安装软件 <code>mlocate</code> 之后才会有 <code>updatedb</code> 命令和 <code>locate</code> 命令,最小化安装的 rhel 系统默认不安装。</li>
<li><code>locate</code> 寻找的数据是由『已建立的数据库 <code>/var/lib/mlocate/mlocate.db</code> 里面的数据所搜<br>寻到 , 所以不用直接在去硬盘中存取数据 , 速度快</li>
<li><code>updatedb</code>: 根据 <code>/etc/updatedb.conf</code> 的设定去搜寻系统硬盘内的文件名 , 并更新<code>/var/lib/mlocate.mlocate.db</code></li>
<li><code>PRUNEPATHS = "/afs /media /net /sfs /tmp /udev /var/cache/ccache /var/spool/cups /var/spool/squid /var/tmp"</code> &lt;== 设定了不搜寻的目录</li>
</ul>
<h4 id="find" class="article-heading"><a href="#find" class="headerlink" title="find"></a>find<a class="article-anchor" href="#find" aria-hidden="true"></a></h4><p>find [ PATH] [ option] [ action]</p>
<p>选项与参数 :</p>
<ol>
<li>与时间有关 :-atime, -ctime ,-mtime , 以 -mtime 说明</li>
</ol>
<ul>
<li>-mtime n</li>
<li>-mtime +n</li>
<li>-mtime -n</li>
<li>-newer file : 列出比 file 还要新的档案</li>
</ul>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">if n= 2 now= 2015/12/24</span><br><span class="line">then</span><br><span class="line">-mtime 2:  2015/12/22 当天内容改过的文件</span><br><span class="line">-mtime +2: 2 天之前 , 2015/12/22 之前被容被改过的文件 , 及 21\20\19...</span><br><span class="line">-mtime -2: 2 天以内 , 2015/12/24 和 2015/12/23 号修改过的文件</span><br><span class="line">&lt;--|--|--|--|--|--|--|--|--|--|--|2-|--|--|</span><br><span class="line">&lt;----------------------------+2-&gt;|--|--|--|</span><br><span class="line">&lt;--|--|--|--|--|--|--|--|--|--|--|--|&lt;-2-&gt;|</span><br><span class="line">11 12 13 14 15 16 17 18 19 20 21 22 23 24 现在</span><br></pre></td></tr></tbody></table></figure>

<ol>
<li>与用户和组有关</li>
</ol>
<ul>
<li>-uid n</li>
<li>-gid n</li>
<li>-user name</li>
<li>-group name</li>
<li>-nouser</li>
<li>-nogroup</li>
</ul>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[ root@www ~]# find /tmp -user dabao</span><br><span class="line">/tmp/dabao</span><br><span class="line">/tmp/dabao1</span><br><span class="line">/tmp/dabao1/1</span><br><span class="line">/tmp/dabao1/1/2</span><br></pre></td></tr></tbody></table></figure>

<ol>
<li>与档案的权限及名称有关</li>
</ol>
<ul>
<li>-name filename: 搜寻文件名为 filename 的文件 ;</li>
<li>-size [ +-]SIZE: SIZE 的规格有</li>
<li>c: 代表 byte</li>
<li>k: 代表 1024bytes w: 字数 , 占两个字符 M\G</li>
<li>-type TYPE:f 普通文件 d 目录 l 链接文件</li>
<li>-perm mode : 文件权限『刚好等于』 mode 的档案 mode 范围 : 7777 ~ 0000</li>
<li>-perm -mode: 文件权限『必须要全部囊括 mode 权限』</li>
<li>-perm +mode: 文件权限『包含 mode 权限』的文件</li>
</ul>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[ root@www ~]# find /tmp -name "*da*"</span><br><span class="line">/tmp/dabao</span><br><span class="line">/tmp/orbit-root/linc-bd3-0-5dc8fa181da</span><br><span class="line">/tmp/orbit-root/linc-da1-0-76ab0a1c521dd</span><br><span class="line">/tmp/orbit-root/linc-cc4-0-c0fda335ced5</span><br><span class="line">/tmp/dabao1</span><br><span class="line">[ root@www ~]# find /tmp -type f</span><br><span class="line">/tmp/pulse-BzLrQ7uHulwz/pid</span><br><span class="line">/tmp/.X0-lock</span><br><span class="line">/tmp/dabao</span><br><span class="line">/tmp/orbit-root/bonobo-activation-server-23d28d39cfff8983f6cac2ca00000055-ior</span><br><span class="line">/tmp/orbit-root/bonobo-activation-register-23d28d39cfff8983f6cac2ca00000055.lock</span><br><span class="line">/tmp/lurakm9.tmp/luraktg.tmp</span><br><span class="line">/tmp/lurakm9.tmp/lurakt2.tmp</span><br><span class="line">/tmp/lurakm9.tmp/lurakvs.tmp</span><br></pre></td></tr></tbody></table></figure>

<ol>
<li>额外动作</li>
</ol>
<p>-exec [ 命令 ] : 后面可再接额外的命令来处理搜寻到的结果</p>
<p><code>find / -perm +7000 -exec ls -l {} \;</code><br>&lt;= = 固定格式 : <code>find [ 路径 参数 ] -exec [ 命令 ] {} \;</code></p>
<p>-ok 格式同-exec，区别ok会带提示（交互式的找到后是否执行该命令）</p>
<p>-print: 将结果输出屏幕上 , 预设动作</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[ root@www ~]# find /tmp -name "dabao*" -exec ls -l {} \;</span><br><span class="line">-rwxrwxrwx+ 1 dabao dabao 0 Mar 21 06:09 /tmp/dabao</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x. 3 dabao dabao 4096 Mar 21 06:11 1</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Linux-文件和目录作业" class="article-heading"><a href="#Linux-文件和目录作业" class="headerlink" title="Linux 文件和目录作业"></a>Linux 文件和目录作业<a class="article-anchor" href="#Linux-文件和目录作业" aria-hidden="true"></a></h2><h3 id="UGO-权限作业" class="article-heading"><a href="#UGO-权限作业" class="headerlink" title="UGO 权限作业"></a>UGO 权限作业<a class="article-anchor" href="#UGO-权限作业" aria-hidden="true"></a></h3><ol>
<li>查看 /var/spool/mail 下所有文件 , 并指出其拥有者和所属组分 别是谁 , 其拥有者和所属组对应的<br>权限分别是什么 ?</li>
<li>在 /tmp/ 目录下创建 7 个目录 , 目录名分别为 test1 到 test7</li>
</ol>
<ul>
<li><ol>
<li>将该 7 个目录的拥有者改为 student 用户。</li>
</ol>
</li>
<li><ol start="2">
<li>在这 7 个目录下分别创建 file1 和 file2</li>
</ol>
</li>
<li><ol start="3">
<li>针对这 7 个目录的 student 用户分别设置数字为 1 到 7 的权限。</li>
</ol>
</li>
<li><ol start="4">
<li>分别对这个 7 个目录执行以下命令 :</li>
</ol>
</li>
</ul>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">ls file1</span><br><span class="line">ls -l file1</span><br><span class="line">cd testx</span><br><span class="line">touch file3</span><br><span class="line">rm file2</span><br><span class="line">chmod 777 file1</span><br></pre></td></tr></tbody></table></figure>

<p>并总结结论。</p>
<ol>
<li>新建一个组 , 组名为 group, 要求将 test1 目录的所属组改为 group 组 , 并将 test1 目录下的<br>所有文件的所属组都改为 group 组。</li>
</ol>
<h3 id="特殊权限作业" class="article-heading"><a href="#特殊权限作业" class="headerlink" title="特殊权限作业"></a>特殊权限作业<a class="article-anchor" href="#特殊权限作业" aria-hidden="true"></a></h3><ol>
<li>在 /tmp/ 目录下创建一个 testdir 目录 , 要求任何人在该目录下 创建的文件都只能由自己或者目录<br>拥有者去删除 , 其余人不能够 去删除。</li>
<li>创建一个文件 , 让任何人执行这个文件时候 , 临时拥有文件拥 有者的权限。</li>
</ol>
<h3 id="ATTR-权限作业" class="article-heading"><a href="#ATTR-权限作业" class="headerlink" title="ATTR 权限作业"></a>ATTR 权限作业<a class="article-anchor" href="#ATTR-权限作业" aria-hidden="true"></a></h3><ol>
<li>创建一个文件 , 文件名任意 , 要求 , 该文件的访问时间不被 修改 , 同时 , 该文件只能被追加内容 , 不允许被<br>修改和删除。 取消该文件的 Attr 权限。</li>
</ol>
<h3 id="ACL-权限作业" class="article-heading"><a href="#ACL-权限作业" class="headerlink" title="ACL 权限作业"></a>ACL 权限作业<a class="article-anchor" href="#ACL-权限作业" aria-hidden="true"></a></h3><ol>
<li>在 /tmp 下创建一个 file 文件 , 要求 student 用户对 file 有完整 的权限 ,kevin 用户对<br>file 有 rw- 的权限 ,carol 用户对 file 有 -wx 的权限 ,natasha 用户对该文件有 r– 的权限。</li>
<li>清空 file 的 attr 权限。</li>
</ol>
</body></html>
              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2025-10-22T08:48:46.490Z" itemprop="dateModified">Last updated: 2025-10-22</time>
                <a href="/linux/0_linux_base/index.html" class="article-footer-next" title="概览"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <div id="carbonads" class="carbonads" style="text-align:center;font-family:'Noto Sans SC',sans-serif;">
  <span class="carbon-wrap">
    <a href="https://github.com/booboowei"
       class="carbon-img"
       target="_blank"
       rel="noopener sponsored">
      <img
        src="https://avatars2.githubusercontent.com/u/21328020?s=460&u=88cf6127c32932188f936d05636b7b0d36783ee1&v=4"
        alt="ads via Carbon"
        border="0"
        style="width:80px;height:80px;border-radius:50%;max-width:130px;"
      />
    </a>
    <a href="/about/"
       class="carbon-text"
       target="_blank"
       rel="noopener sponsored"
       style="display:block;margin-top:4px;">
      欢迎光临
    </a>
  </span>

  <!-- 日期显示 -->
  <div id="today-date" style="margin-top:12px;background:#f5f5f5;border-radius:12px;padding:10px 0;">
    <div id="weekday" style="font-size:14px;color:#555;"></div>
    <div id="day" style="font-size:36px;font-weight:bold;color:#000;"></div>
    <div id="ym" style="font-size:14px;color:#555;"></div>
    <div id="lunar" style="font-size:13px;color:#888;margin-top:4px;"></div>
  </div>

<script>
(function(){
  const now = new Date();
  const weekdays = ["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];
  const year = now.getFullYear();
  const month = now.getMonth() + 1;
  const day = now.getDate();

  function toChineseNumber(num) {
    const map = {0:'〇',1:'一',2:'二',3:'三',4:'四',5:'五',6:'六',7:'七',8:'八',9:'九'};
    return String(num).split('').map(n=>map[n]).join('');
  }

  // 优先使用 Intl (现代浏览器支持农历/中国传统历)
  function getLunarByIntl(date) {
    try {
      // 获取农历的月（长格式，如 "九月" 或 "闰八月"），和日（数字）
      const monthFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { month: 'long' });
      const dayFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { day: 'numeric' });
      const lunarMonthText = monthFormatter.format(date); // 例如 "九月" 或 "闰八月"
      const lunarDayText = dayFormatter.format(date);     // 例如 "三十" 或 "初一"
      // 有的浏览器返回的 month 会包含 "闰" 字样，也可能返回汉字月份，需要适配
      return `农历${lunarMonthText}${lunarDayText}`;
    } catch (e) {
      return null; // 表示不支持 Intl 农历
    }
  }

  // 回退：简易本地农历算法（仅作兼容，适用于1900-2049范围）
  const lunarInfo = [0x04bd8,0x04ae0,0x0a570,0x054d5,0x0d260,0x0d950,0x16554,0x056a0,0x09ad0,0x055d2,
                     0x04ae0,0x0a5b6,0x0a4d0,0x0d250,0x1d255,0x0b540,0x0d6a0,0x0ada2,0x095b0,0x14977,
                     0x04970,0x0a4b0,0x0b4b5,0x06a50,0x06d40,0x1ab54,0x02b60,0x09570,0x052f2,0x04970,
                     0x06566,0x0d4a0,0x0ea50,0x06e95,0x05ad0,0x02b60,0x186e3,0x092e0,0x1c8d7,0x0c950,
                     0x0d4a0,0x1d8a6,0x0b550,0x056a0,0x1a5b4,0x025d0,0x092d0,0x0d2b2,0x0a950,0x0b557,
                     0x06ca0,0x0b550,0x15355,0x04da0,0x0a5b0,0x14573,0x052b0,0x0a9a8,0x0e950,0x06aa0,
                     0x0aea6,0x0ab50,0x04b60,0x0aae4,0x0a570,0x05260,0x0f263,0x0d950,0x05b57,0x056a0,
                     0x096d0,0x04dd5,0x04ad0,0x0a4d0,0x0d4d4,0x0d250,0x0d558,0x0b540,0x0b5a0,0x195a6,
                     0x095b0,0x049b0,0x0a974,0x0a4b0,0x0b27a,0x06a50,0x06d40,0x0af46,0x0ab60,0x09570,
                     0x04af5,0x04970,0x064b0,0x074a3,0x0ea50,0x06b58,0x05ac0,0x0ab60,0x096d5,0x092e0];

  function lYearDays(y){let i,sum=348;for(i=0x8000;i>0x8;i>>=1)sum+=(lunarInfo[y-1900]&i)?1:0;return sum+leapDays(y);}
  function leapDays(y){if(leapMonth(y))return(lunarInfo[y-1900]&0x10000)?30:29;else return 0;}
  function leapMonth(y){return lunarInfo[y-1900]&0xf;}
  function monthDays(y,m){return(lunarInfo[y-1900]&(0x10000>>m))?30:29;}

  function LunarFallback(objDate){
    let i, leap=0, temp=0;
    const baseDate = new Date(1900,0,31);
    let offset = Math.floor((objDate - baseDate) / 86400000);
    let year = 1900;
    // 年循环
    for (i = 1900; i < 2050 && offset > 0; i++) {
      temp = lYearDays(i);
      offset -= temp;
      year = i;
    }
    if (offset < 0) { offset += temp; year--; }
    leap = leapMonth(year);
    let isLeap = false;
    let month = 1;
    // 月循环
    for (i = 1; i <= 12 && offset > 0; i++) {
      if (leap > 0 && i === (leap + 1) && !isLeap) {
        // 进入闰月
        temp = leapDays(year);
        isLeap = true;
        i--; // stay on same month number but mark leap
      } else {
        temp = monthDays(year, i);
      }
      offset -= temp;
      if (isLeap && i === leap) { isLeap = false; }
      if (!isLeap) month++; // 非闰月时才推进月份计数
    }
    if (offset === 0 && leap > 0 && month === leap + 1) {
      // 特殊：当正好落在闰月第一天
      // month 保持，isLeap = true
    }
    if (offset < 0) { offset += temp; month--; }
    const day = offset + 1;
    // 修正 month 边界
    if (month <= 0) month = 1;
    return { year, month, day, isLeap: !!isLeap };
  }

  function getLunarDateStringFallback(y,m,d){
    const cDay=["","初一","初二","初三","初四","初五","初六","初七","初八","初九","初十",
                "十一","十二","十三","十四","十五","十六","十七","十八","十九","二十",
                "廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"];
    const cMon=["","正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","冬月","腊月"];
    const lunar = LunarFallback(new Date(y, m-1, d));
    return `农历${lunar.isLeap ? '闰' : ''}${cMon[lunar.month]}${cDay[lunar.day]}`;
  }

  // 先尝试 Intl 方法
  let lunarText = getLunarByIntl(now);
  if (!lunarText) {
    // 回退本地算法
    lunarText = getLunarDateStringFallback(year, month, day);
  }

  // 输出到页面（公历 + 农历）
  document.getElementById("weekday").textContent = weekdays[now.getDay()];
  document.getElementById("day").textContent = day;
  document.getElementById("ym").textContent = `${toChineseNumber(year)}年${toChineseNumber(month)}月`;
  document.getElementById("lunar").textContent = lunarText;
})();
</script>


              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux-%E7%9B%AE%E5%BD%95"><span class="toc-text">Linux 目录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux-%E7%9B%AE%E5%BD%95%E9%85%8D%E7%BD%AE%E7%9A%84%E4%BE%9D%E6%8D%AE-%E2%80%93FHS"><span class="toc-text">Linux 目录配置的依据 –FHS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E6%A0%91"><span class="toc-text">目录树</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7"><span class="toc-text">文件属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">文件的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E8%88%AC%E6%9D%83%E9%99%90-UGO"><span class="toc-text">一般权限 UGO</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90-suid-sgid-sticky"><span class="toc-text">特殊权限 suid\sgid\sticky</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%90%E8%97%8F%E5%B1%9E%E6%80%A7-ATTR"><span class="toc-text">隐藏属性 ATTR</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8-ACL"><span class="toc-text">文件访问控制列表 ACL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-text">文件相关的命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%9A%84%E4%BF%AE%E6%94%B9-chmod-chown-chgrp-umask"><span class="toc-text">权限的修改 chmod chown chgrp umask</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#chmod"><span class="toc-text">chmod</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#chgrp"><span class="toc-text">chgrp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#umask"><span class="toc-text">umask</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%96%87%E6%A1%A3-etc-profile-bash-profile"><span class="toc-text">相关文档 &#x2F;etc&#x2F;profile ~&#x2F;.bash_profile</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ATTR-%E6%9D%83%E9%99%90%E5%91%BD%E4%BB%A4-chattr-lsattr"><span class="toc-text">ATTR 权限命令 chattr lsattr</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#chattr"><span class="toc-text">chattr</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lsattr"><span class="toc-text">lsattr</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ACL-%E6%9D%83%E9%99%90%E5%91%BD%E4%BB%A4"><span class="toc-text">ACL 权限命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ACL-%E6%9D%83%E9%99%90%E6%A6%82%E5%BF%B5"><span class="toc-text">ACL 权限概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#getfacl"><span class="toc-text">getfacl</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#setfacl"><span class="toc-text">setfacl</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84"><span class="toc-text">文件存储结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E7%A1%AC%E6%96%B9%E5%BC%8F%E9%93%BE%E6%8E%A5"><span class="toc-text">软硬方式链接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E5%92%8C%E6%96%87%E4%BB%B6%E7%9A%84%E6%90%9C%E7%B4%A2"><span class="toc-text">指令和文件的搜索</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%82%89%E7%9C%BC%E6%9F%A5%E6%89%BE-ls-R"><span class="toc-text">肉眼查找 : ls -R</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%90%8D%E7%9A%84%E6%90%9C%E5%AF%BB-whereis-locate-find"><span class="toc-text">文件名的搜寻 :whereis, locate, find</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#whereis"><span class="toc-text">whereis</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#locate"><span class="toc-text">locate</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#find"><span class="toc-text">find</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux-%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E4%BD%9C%E4%B8%9A"><span class="toc-text">Linux 文件和目录作业</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#UGO-%E6%9D%83%E9%99%90%E4%BD%9C%E4%B8%9A"><span class="toc-text">UGO 权限作业</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90%E4%BD%9C%E4%B8%9A"><span class="toc-text">特殊权限作业</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ATTR-%E6%9D%83%E9%99%90%E4%BD%9C%E4%B8%9A"><span class="toc-text">ATTR 权限作业</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ACL-%E6%9D%83%E9%99%90%E4%BD%9C%E4%B8%9A"><span class="toc-text">ACL 权限作业</span></a></li></ol></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">Linux 中级</strong><a href="/linux/0_linux_base/index.html" class="sidebar-link">概览</a><a href="/linux/0_linux_base/booboo_linux_base/index.html" class="sidebar-link">Linux 基础</a><a href="/linux/0_linux_base/booboo_easy_service/index.html" class="sidebar-link">Linux 简易服务</a><a href="/linux/0_linux_base/booboo_bash_shell_scripts/index.html" class="sidebar-link">Linux 脚本编程</a><a href="/linux/0_linux_base/booboo_middle_service/index.html" class="sidebar-link">Linux 进阶</a><strong class="sidebar-title">Linux 日常</strong><a href="/linux/1_linux_dayday/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">Ex-Tools</strong><a href="/linux/2_excellent_tools/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">LAMP</strong><a href="/linux/3_lamp/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">Docker</strong><a href="/linux/4_docker/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">TICK</strong><a href="/linux/5_tick/index.html" class="sidebar-link">概览</a><a href="/linux/5_tick/kapacitor/index.html" class="sidebar-link">Kapacitor</a><strong class="sidebar-title">Devops</strong><a href="/linux/6_devops/index.html" class="sidebar-link">概览</a><a href="/linux/6_devops/bootstrap/index.html" class="sidebar-link">Bootstrap</a><a href="/linux/6_devops/booboo_python/index.html" class="sidebar-link">Python 基础</a><a href="/linux/6_devops/00_python_base/index.html" class="sidebar-link">Python 进阶</a><a href="/linux/6_devops/01_python_net/index.html" class="sidebar-link">Python 网络开发</a><a href="/linux/6_devops/02_python_threads/index.html" class="sidebar-link">Python 并发编程</a><a href="/linux/6_devops/11_flask_admin/index.html" class="sidebar-link">Flask_admin</a><a href="/linux/6_devops/12_mini_project/index.html" class="sidebar-link">迷你小项目</a><strong class="sidebar-title">Git</strong><a href="/linux/7_git/index.html" class="sidebar-link">概览</a><a href="/linux/7_git/Chapter01/index.html" class="sidebar-link">Git 基础</a><a href="/linux/7_git/Chapter02/index.html" class="sidebar-link">Git 常见场景</a><a href="/linux/7_git/Chapter04/index.html" class="sidebar-link">Git 多人协作</a><a href="/linux/7_git/Chapter05/index.html" class="sidebar-link">Git 集成使用禁忌</a><a href="/linux/7_git/Chapter06/index.html" class="sidebar-link">GitHub 初识</a><a href="/linux/7_git/Chapter07/index.html" class="sidebar-link">GitHub 使用</a><a href="/linux/7_git/Chapter03/index.html" class="sidebar-link">Github 同步</a><a href="/linux/7_git/Chapter08/index.html" class="sidebar-link">GitLab 实践</a>
  </div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2025 <a href="https://github.com/BoobooWei" target="_blank">魏亚萍</a><br>
      Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>.<br>
      备案号：沪ICP备2020026043号
    </div>
    <div id="footer-links">
      <a href="https://www.youtube.com/@amyreading2023" class="footer-link" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" 
            alt="YouTube"
            style="height:24px; margin-bottom:-6px;">
      </a>
      <a href="https://github.com/BoobooWei" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="../../../docs/" class="mobile-nav-link">Hexo</a><a href="../../../news/" class="mobile-nav-link">News</a><a href="../../../api/" class="mobile-nav-link">MySQL8.0</a><a href="../../../database/" class="mobile-nav-link">Database</a><a href="../../../linux/" class="mobile-nav-link">Linux</a><a href="../../../cloud/" class="mobile-nav-link">Cloud</a><a href="../../../singapore/" class="mobile-nav-link">Singapore</a><a href="../../../amy/" class="mobile-nav-link">AMY</a><a href="../../../about/" class="mobile-nav-link">About</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/BoobooWei" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">Linux 中级</strong><a href="/linux/0_linux_base/index.html" class="mobile-nav-link">概览</a><a href="/linux/0_linux_base/booboo_linux_base/index.html" class="mobile-nav-link">Linux 基础</a><a href="/linux/0_linux_base/booboo_easy_service/index.html" class="mobile-nav-link">Linux 简易服务</a><a href="/linux/0_linux_base/booboo_bash_shell_scripts/index.html" class="mobile-nav-link">Linux 脚本编程</a><a href="/linux/0_linux_base/booboo_middle_service/index.html" class="mobile-nav-link">Linux 进阶</a><strong class="mobile-nav-title">Linux 日常</strong><a href="/linux/1_linux_dayday/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">Ex-Tools</strong><a href="/linux/2_excellent_tools/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">LAMP</strong><a href="/linux/3_lamp/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">Docker</strong><a href="/linux/4_docker/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">TICK</strong><a href="/linux/5_tick/index.html" class="mobile-nav-link">概览</a><a href="/linux/5_tick/kapacitor/index.html" class="mobile-nav-link">Kapacitor</a><strong class="mobile-nav-title">Devops</strong><a href="/linux/6_devops/index.html" class="mobile-nav-link">概览</a><a href="/linux/6_devops/bootstrap/index.html" class="mobile-nav-link">Bootstrap</a><a href="/linux/6_devops/booboo_python/index.html" class="mobile-nav-link">Python 基础</a><a href="/linux/6_devops/00_python_base/index.html" class="mobile-nav-link">Python 进阶</a><a href="/linux/6_devops/01_python_net/index.html" class="mobile-nav-link">Python 网络开发</a><a href="/linux/6_devops/02_python_threads/index.html" class="mobile-nav-link">Python 并发编程</a><a href="/linux/6_devops/11_flask_admin/index.html" class="mobile-nav-link">Flask_admin</a><a href="/linux/6_devops/12_mini_project/index.html" class="mobile-nav-link">迷你小项目</a><strong class="mobile-nav-title">Git</strong><a href="/linux/7_git/index.html" class="mobile-nav-link">概览</a><a href="/linux/7_git/Chapter01/index.html" class="mobile-nav-link">Git 基础</a><a href="/linux/7_git/Chapter02/index.html" class="mobile-nav-link">Git 常见场景</a><a href="/linux/7_git/Chapter04/index.html" class="mobile-nav-link">Git 多人协作</a><a href="/linux/7_git/Chapter05/index.html" class="mobile-nav-link">Git 集成使用禁忌</a><a href="/linux/7_git/Chapter06/index.html" class="mobile-nav-link">GitHub 初识</a><a href="/linux/7_git/Chapter07/index.html" class="mobile-nav-link">GitHub 使用</a><a href="/linux/7_git/Chapter03/index.html" class="mobile-nav-link">Github 同步</a><a href="/linux/7_git/Chapter08/index.html" class="mobile-nav-link">GitLab 实践</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- Cookie -->
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<!-- build:js build/js/main.js -->

<script src="../../../js/lang_select.js"></script>


<script src="../../../js/mobile_nav.js"></script>

<!-- endbuild -->

<!-- Algolia -->
<!--   backup
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript">
docsearch({
  appId: '',
  apiKey: '',
  indexName: '',
  insights: true,
  container: '#docsearch',
  debug: false,
  searchParameters: {
    facetFilters: ['lang:en']
  }
});
</script>
-->

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
document.getElementById('search-input-wrap').classList.add('on');
docsearch({
    apiKey: '',
    indexName: '',
    inputSelector: '#search-input'
});
</script>
</body>
</html>