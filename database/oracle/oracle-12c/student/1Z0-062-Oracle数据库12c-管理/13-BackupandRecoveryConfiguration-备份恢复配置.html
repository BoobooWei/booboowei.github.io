<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>Oracle数据库12c-管理 实践13:备份恢复配置 | BoobooWei</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.toberoot.com/database/oracle/oracle-12c/student/1Z0-062-Oracle%E6%95%B0%E6%8D%AE%E5%BA%9312c-%E7%AE%A1%E7%90%86/13-BackupandRecoveryConfiguration-%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%E9%85%8D%E7%BD%AE">
  <!-- Alternate links -->
  
    
      
    
    <link rel="alternate" hreflang="x-default" href="http://www.toberoot.com/database/oracle/oracle-12c/student/1Z0-062-Oracle%E6%95%B0%E6%8D%AE%E5%BA%9312c-%E7%AE%A1%E7%90%86/13-BackupandRecoveryConfiguration-%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%E9%85%8D%E7%BD%AE" />
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="../../../../../icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="../../../../../icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="../../../../../icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="../../../../../icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="../../../../../icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="../../../../../icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="../../../../../icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="../../../../../icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="../../../../../icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="../../../../../icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="../../../../../icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="../../../../../icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="../../../../../icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="../../../../../icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="../../../../../css/navy.css">

  <!-- endbuild -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-lato@0.0.75/index.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="../../../../../atom.xml" title="BoobooWei" type="application/atom+xml">
  <!-- Open Graph -->
  <meta name="description" content="Practices for Lesson 13: Backup and Recovery: Configuration 2020.02.04 BoobooWei     实践13:备份恢复配置 实践13:概览 实践13-1:配置数据库进行恢复 Overview Task Practice KnowledgePoint 管理控制文件 管理重做日志 管理存档的重做日志文件          实践13">
<meta property="og:type" content="website">
<meta property="og:title" content="Oracle数据库12c-管理 实践13:备份恢复配置">
<meta property="og:url" content="http://www.toberoot.com/database/oracle/oracle-12c/student/1Z0-062-Oracle%E6%95%B0%E6%8D%AE%E5%BA%9312c-%E7%AE%A1%E7%90%86/13-BackupandRecoveryConfiguration-%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%E9%85%8D%E7%BD%AE">
<meta property="og:site_name" content="BoobooWei">
<meta property="og:description" content="Practices for Lesson 13: Backup and Recovery: Configuration 2020.02.04 BoobooWei     实践13:备份恢复配置 实践13:概览 实践13-1:配置数据库进行恢复 Overview Task Practice KnowledgePoint 管理控制文件 管理重做日志 管理存档的重做日志文件          实践13">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://www.toberoot.com/icon/og-image-wide.png">
<meta property="article:published_time" content="2025-10-22T08:53:55.750Z">
<meta property="article:modified_time" content="2025-10-22T08:47:58.101Z">
<meta property="article:author" content="魏亚萍">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.toberoot.com/icon/twitter-summary.png">
<meta property="fb:admins" content="100000247608790">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48498357-3', 'auto');
  ga('send', 'pageview');
</script>

  <!-- Algolia -->
  <link rel="preconnect" href="https://-dsn.algolia.net" crossorigin />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
<meta name="generator" content="Hexo 8.0.0"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="../../../../../" id="logo">Hexo</a>
    </h1>
    <nav id="main-nav">
      <a href="../../../../../docs/" class="main-nav-link">Hexo</a><a href="../../../../../news/" class="main-nav-link">News</a><a href="../../../../../api/" class="main-nav-link">MySQL8.0</a><a href="../../../../../database/" class="main-nav-link">Database</a><a href="../../../../../linux/" class="main-nav-link">Linux</a><a href="../../../../../cloud/" class="main-nav-link">Cloud</a><a href="../../../../../singapore/" class="main-nav-link">Singapore</a><a href="../../../../../amy/" class="main-nav-link">AMY</a><a href="../../../../../about/" class="main-nav-link">About</a>
      <a target="_blank" rel="noopener" href="https://github.com/BoobooWei" class="main-nav-link"><i class="fa fa-github-alt"></i></a>

      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <div id="lang-select-wrap">
        <a href="/about/" class="main-nav-link"><label id="lang-select-label"><i class="fa fa-globe"></i><span>关于我</span></label></a>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">Oracle数据库12c-管理 实践13:备份恢复配置</h1>
                <a target="_blank" rel="noopener" href="https://github.com/BoobooWei/site/edit/master/source/database/oracle/oracle-12c/student/1Z0-062-Oracle数据库12c-管理/13-BackupandRecoveryConfiguration-备份恢复配置.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <html><head></head><body><blockquote>
<p><strong>Practices for Lesson 13: Backup and Recovery: Configuration</strong></p>
<p>2020.02.04 BoobooWei</p>
</blockquote>
<!-- MDTOC maxdepth:6 firsth1:1 numbering:0 flatten:0 bullets:1 updateOnSave:1 -->

<ul>
<li><a href="#%E5%AE%9E%E8%B7%B513%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%E9%85%8D%E7%BD%AE">实践13:备份恢复配置</a><ul>
<li><a href="#%E5%AE%9E%E8%B7%B513%E6%A6%82%E8%A7%88">实践13:概览</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B513-1%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E8%A1%8C%E6%81%A2%E5%A4%8D">实践13-1:配置数据库进行恢复</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#task">Task</a></li>
<li><a href="#practice">Practice</a></li>
<li><a href="#knowledgepoint">KnowledgePoint</a><ul>
<li><a href="#%E7%AE%A1%E7%90%86%E6%8E%A7%E5%88%B6%E6%96%87%E4%BB%B6">管理控制文件</a></li>
<li><a href="#%E7%AE%A1%E7%90%86%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97">管理重做日志</a></li>
<li><a href="#%E7%AE%A1%E7%90%86%E5%AD%98%E6%A1%A3%E7%9A%84%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6">管理存档的重做日志文件</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- /MDTOC -->

<h2 id="实践13-概览" class="article-heading"><a href="#实践13-概览" class="headerlink" title="实践13:概览"></a>实践13:概览<a class="article-anchor" href="#实践13-概览" aria-hidden="true"></a></h2><p>Practices for Lesson 13: Overview</p>
<p>Configure your database to reduce the chances of failure or data loss. To do so, perform the following tasks:</p>
<p>• Ensure redundancy of control files.</p>
<p>• Review the fast recovery area configuration.</p>
<p>• Ensure that there are at least two redo log members in each group.</p>
<p>• Place your database in ARCHIVELOG mode.</p>
<p>• Configure redundant archive log destinations.</p>
<p>配置数据库以减少失败或数据丢失的机会。为此，请执行以下任务:</p>
<ul>
<li>确保控制文件的冗余。</li>
<li>检查快速恢复区域的配置。</li>
<li>确保每个组中至少有两个重做日志成员。</li>
<li>将数据库置于ARCHIVELOG模式。</li>
<li>配置冗余的存档日志目的地。</li>
</ul>
<h2 id="实践13-1-配置数据库进行恢复" class="article-heading"><a href="#实践13-1-配置数据库进行恢复" class="headerlink" title="实践13-1:配置数据库进行恢复"></a>实践13-1:配置数据库进行恢复<a class="article-anchor" href="#实践13-1-配置数据库进行恢复" aria-hidden="true"></a></h2><p>Practice 13-1: Configuring Your Database for Recovery</p>
<h3 id="Overview" class="article-heading"><a href="#Overview" class="headerlink" title="Overview"></a>Overview<a class="article-anchor" href="#Overview" aria-hidden="true"></a></h3><p>In this practice, you verify that your database is configured properly to support recovery operations in the event of a failure.</p>
<h3 id="Task" class="article-heading"><a href="#Task" class="headerlink" title="Task"></a>Task<a class="article-anchor" href="#Task" aria-hidden="true"></a></h3><ol>
<li><p>Verify that the control files are multiplexed.</p>
</li>
<li><p>Review the fast recovery area configuration and change the size to 8 GB.</p>
</li>
<li><p>Check how many members each redo log group has. Ensure that there are at least two redo log members in each group. One set of members should be stored in the fast recovery area.</p>
</li>
<li><p>You notice that for each redo log group, the “Archived” column has no value. This means that your database is not retaining copies of redo logs to use for database recovery, and in the event of a failure, you will lose all data since your last backup. Place your database in ARCHIVELOG mode, so that redo logs are archived.</p>
<p>You do not need to specify a naming convention or a destination for the archived redo log files because you are using a fast recovery area.</p>
<p><strong>Note:</strong> If you add archive log destinations, you must create the directory if it does not already exist.</p>
<p>Use SQL*Plus to set the database in ARCHIVELOG mode.</p>
</li>
<li><p>Configure redundant archive log destinations.</p>
</li>
</ol>
<h3 id="Practice" class="article-heading"><a href="#Practice" class="headerlink" title="Practice"></a>Practice<a class="article-anchor" href="#Practice" aria-hidden="true"></a></h3><ol>
<li><p>验证控制文件是多路复用的。</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> NAME <span class="keyword">FROM</span> V$CONTROLFILE;</span><br></pre></td></tr></tbody></table></figure>

<p>a. 登陆 Enterprise Manager Database Express</p>
<p>b. 选择 <code>存储引擎 &gt; 控制文件</code></p>
<p>c. 可以看到当前有两个控制文件</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">SELECT</span> NAME <span class="keyword">FROM</span> V$CONTROLFILE;</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line"><span class="comment">--------------------------------------------------------------------------------</span></span><br><span class="line"><span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>oradata<span class="operator">/</span>booboo<span class="operator">/</span>control01.ctl</span><br><span class="line"><span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>oradata<span class="operator">/</span>booboo<span class="operator">/</span>control02.ctl</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>检查快速恢复区配置并将大小更改为8gb。</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">mkdir  <span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>fast_recovery_area</span><br><span class="line"></span><br><span class="line">sqlplus <span class="operator">/</span> <span class="keyword">as</span> sysdba</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">parameter</span> db_recovery_file_</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">system</span> <span class="keyword">set</span> "db_recovery_file_dest_size"<span class="operator">=</span><span class="string">'8G'</span> <span class="keyword">scope</span><span class="operator">=</span><span class="keyword">both</span> sid<span class="operator">=</span><span class="string">'*'</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">system</span> <span class="keyword">set</span> "db_recovery_file_dest"<span class="operator">=</span><span class="string">'/u01/app/oracle/fast_recovery_area'</span> <span class="keyword">scope</span><span class="operator">=</span><span class="keyword">both</span> sid<span class="operator">=</span><span class="string">'*'</span>;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">parameter</span> db_recovery_file_</span><br></pre></td></tr></tbody></table></figure>

<p>a. Enterprise Manager Database Express 选择 <code>配置 &gt; 初始化参数</code></p>
<p>b. 选择 <code>归档和恢复</code> ，找到以<code>db_recovery_file</code>开头的参数</p>
<p>c. 检查快速恢复区是否开启。未开启，因为值为null和0</p>
<p>d. 修改这两个参数，注意这两个参数都是动态参数，无需重启服务。</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">parameter</span> db_recovery_file_</span><br><span class="line"></span><br><span class="line">NAME				     TYPE	 <span class="keyword">VALUE</span></span><br><span class="line"><span class="comment">------------------------------------ ----------- ------------------------------</span></span><br><span class="line">db_recovery_file_dest		     string</span><br><span class="line">db_recovery_file_dest_size	     big <span class="type">integer</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">system</span> <span class="keyword">set</span> "db_recovery_file_dest_size"<span class="operator">=</span><span class="string">'8G'</span> <span class="keyword">scope</span><span class="operator">=</span><span class="keyword">both</span> sid<span class="operator">=</span><span class="string">'*'</span>;</span><br><span class="line"><span class="keyword">System</span> altered.</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">system</span> <span class="keyword">set</span> "db_recovery_file_dest"<span class="operator">=</span><span class="string">'/u01/app/oracle/fast_recovery_area'</span> <span class="keyword">scope</span><span class="operator">=</span><span class="keyword">both</span> sid<span class="operator">=</span><span class="string">'*'</span>;</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">parameter</span> db_recovery_file_</span><br><span class="line"></span><br><span class="line">NAME				     TYPE	 <span class="keyword">VALUE</span></span><br><span class="line"><span class="comment">------------------------------------ ----------- ------------------------------</span></span><br><span class="line">db_recovery_file_dest		     string	 <span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>fast_recovery_</span><br><span class="line">						 area</span><br><span class="line">db_recovery_file_dest_size	     big <span class="type">integer</span> <span class="number">8</span>G</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>检查每个重做日志组有多少成员。确保每个组中至少有两个重做日志成员。一组成员应该存储在快速恢复区域。</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">group</span>#,<span class="keyword">member</span> <span class="keyword">from</span> v$logfile;</span><br><span class="line"><span class="keyword">ALTER</span> DATABASE</span><br><span class="line">  <span class="keyword">ADD</span> LOGFILE <span class="keyword">MEMBER</span></span><br><span class="line">    <span class="string">'/u01/app/oracle/oradata/booboo/redo01-1.log'</span></span><br><span class="line">  <span class="keyword">TO</span> <span class="keyword">GROUP</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">system</span> switch logfile;</span><br></pre></td></tr></tbody></table></figure>

<p>a. 选择 <code>存储 &gt; 重做日志组</code></p>
<p>b. 观察每个组有多少个成员，<code>成员计数</code>列显示为<code>1</code></p>
<p>c. 选择其中一个组点击 <code>添加成员</code></p>
</li>
<li><p>您注意到，对于每个重做日志组，<code>已归档</code>列没有值。这意味着您的数据库没有保留用于数据库恢复的重做日志副本，并且在发生故障时，您将丢失自上次备份以来的所有数据。将数据库置于ARCHIVELOG模式，以便归档重做日志。</p>
<p>您不需要为存档的重做日志文件指定命名约定或目标，因为您使用的是快速恢复区域。</p>
<p>注:如果您添加存档日志目的地，您必须创建目录，如果它还不存在。</p>
<p>使用<code>SQLPlus</code>将数据库设置为ARCHIVELOG模式。</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">sqlplus <span class="operator">/</span> <span class="keyword">as</span> sysdba</span><br><span class="line">archive log list</span><br><span class="line">shutdown immediate</span><br><span class="line">startup mount</span><br><span class="line"><span class="keyword">alter</span> database archivelog;</span><br><span class="line"><span class="keyword">alter</span> database <span class="keyword">open</span>;</span><br><span class="line">archive log list</span><br></pre></td></tr></tbody></table></figure>

<p>执行结果</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> archive log list</span><br><span class="line">Database log mode	       <span class="keyword">No</span> Archive Mode</span><br><span class="line">Automatic archival	       Disabled</span><br><span class="line">Archive destination	       USE_DB_RECOVERY_FILE_DEST</span><br><span class="line">Oldest online log sequence     <span class="number">30</span></span><br><span class="line"><span class="keyword">Current</span> log sequence	       <span class="number">32</span></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> shutdown immediate</span><br><span class="line">Database closed.</span><br><span class="line">Database dismounted.</span><br><span class="line">ORACLE instance shut down.</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> startup mount</span><br><span class="line">ORACLE instance started.</span><br><span class="line"></span><br><span class="line">Total <span class="keyword">System</span> <span class="keyword">Global</span> Area  <span class="number">838860800</span> bytes</span><br><span class="line">Fixed Size		    <span class="number">8798312</span> bytes</span><br><span class="line">Variable Size		  <span class="number">490737560</span> bytes</span><br><span class="line">Database Buffers	  <span class="number">331350016</span> bytes</span><br><span class="line">Redo Buffers		    <span class="number">7974912</span> bytes</span><br><span class="line">Database mounted.</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">alter</span> database archivelog;</span><br><span class="line"></span><br><span class="line">Database altered.</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">alter</span> database <span class="keyword">open</span>;</span><br><span class="line"></span><br><span class="line">Database altered.</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> archive log list;</span><br><span class="line">Database log mode	       Archive Mode</span><br><span class="line">Automatic archival	       Enabled</span><br><span class="line">Archive destination	       USE_DB_RECOVERY_FILE_DEST</span><br><span class="line">Oldest online log sequence     <span class="number">30</span></span><br><span class="line">Next log sequence <span class="keyword">to</span> archive   <span class="number">32</span></span><br><span class="line"><span class="keyword">Current</span> log sequence	       <span class="number">32</span></span><br></pre></td></tr></tbody></table></figure>

<p>现在，您的数据库处于ARCHIVELOG模式，它将继续存档每个在线重做日志文件的副本，然后再将其用于其他重做数据。<br>注意：记住这将消耗磁盘上的空间，并且必须定期将旧的归档日志备份到其他存储。</p>
</li>
<li><p>配置冗余归档日志目的地。</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /u01/app/oracle/oradata/booboo/archive_dir2</span><br><span class="line">sqlplus / as sysdba</span><br><span class="line">ALTER SYSTEM SET log_archive_dest_1=<span class="string">'LOCATION=/u01/app/oracle/fast_recovery_area/EMCDB/archivelog'</span> SCOPE=both;</span><br><span class="line">ALTER SYSTEM SET log_archive_dest_2=<span class="string">'LOCATION=/u01/app/oracle/oradata/booboo/archive_dir2'</span> SCOPE=both;</span><br><span class="line">ALTER SYSTEM SWITCH LOGFILE;</span><br><span class="line">ALTER SYSTEM SWITCH LOGFILE;</span><br><span class="line">ALTER SYSTEM SWITCH LOGFILE;</span><br><span class="line">ALTER SYSTEM SWITCH LOGFILE;</span><br><span class="line">SELECT name FROM v<span class="variable">$archived_log</span> ORDER BY stamp;</span><br></pre></td></tr></tbody></table></figure>

<p>a. 创建一个新目录<code>/u01/app/oracle/oradata/orcl/archive_dir2</code></p>
<p>b. 设置 <code>LOG_ARCHIVE_DEST_1</code>参数指向 FRA；设置<code>LOG_ARCHIVE_DEST_2</code>指向新目录</p>
<p>c. 手动切换日志，查看视图<code>V$ARCHIVED_LOG</code></p>
<p>执行结果</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">[oracle<span class="variable">@ocm</span> <span class="operator">~</span>]$ mkdir <span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>oradata<span class="operator">/</span>booboo<span class="operator">/</span>archive_dir2</span><br><span class="line">[oracle<span class="variable">@ocm</span> <span class="operator">~</span>]$ sqlplus <span class="operator">/</span> <span class="keyword">as</span> sysdba</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">parameter</span> log_archive_dest_1</span><br><span class="line"></span><br><span class="line">NAME				     TYPE	 <span class="keyword">VALUE</span></span><br><span class="line"><span class="comment">------------------------------------ ----------- ------------------------------</span></span><br><span class="line">log_archive_dest_1		     string</span><br><span class="line">log_archive_dest_10		     string</span><br><span class="line">log_archive_dest_11		     string</span><br><span class="line">log_archive_dest_12		     string</span><br><span class="line">log_archive_dest_13		     string</span><br><span class="line">log_archive_dest_14		     string</span><br><span class="line">log_archive_dest_15		     string</span><br><span class="line">log_archive_dest_16		     string</span><br><span class="line">log_archive_dest_17		     string</span><br><span class="line">log_archive_dest_18		     string</span><br><span class="line">log_archive_dest_19		     string</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> <span class="keyword">SET</span> log_archive_dest_1<span class="operator">=</span><span class="string">'LOCATION=/u01/app/oracle/fast_recovery_area/EMCDB/archivelog'</span> <span class="keyword">SCOPE</span><span class="operator">=</span><span class="keyword">both</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">System</span> altered.</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> <span class="keyword">SET</span> log_archive_dest_2<span class="operator">=</span><span class="string">'LOCATION=/u01/app/oracle/oradata/booboo/archive_dir2'</span> <span class="keyword">SCOPE</span><span class="operator">=</span><span class="keyword">both</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">System</span> altered.</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> SWITCH LOGFILE;</span><br><span class="line"></span><br><span class="line"><span class="keyword">System</span> altered.</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">System</span> altered.</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="operator">/</span></span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">System</span> altered.</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">System</span> altered.</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">System</span> altered.</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">SELECT</span> name <span class="keyword">FROM</span> v$archived_log <span class="keyword">ORDER</span> <span class="keyword">BY</span> stamp;</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line"><span class="comment">--------------------------------------------------------------------------------</span></span><br><span class="line"><span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>fast_recovery_area<span class="operator">/</span>EMCDB<span class="operator">/</span>archivelog<span class="operator">/</span><span class="number">1</span>_32_1031256251.dbf</span><br><span class="line"><span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>oradata<span class="operator">/</span>booboo<span class="operator">/</span>archive_dir2<span class="operator">/</span><span class="number">1</span>_32_1031256251.dbf</span><br><span class="line"><span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>fast_recovery_area<span class="operator">/</span>EMCDB<span class="operator">/</span>archivelog<span class="operator">/</span><span class="number">1</span>_33_1031256251.dbf</span><br><span class="line"><span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>oradata<span class="operator">/</span>booboo<span class="operator">/</span>archive_dir2<span class="operator">/</span><span class="number">1</span>_33_1031256251.dbf</span><br><span class="line"><span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>fast_recovery_area<span class="operator">/</span>EMCDB<span class="operator">/</span>archivelog<span class="operator">/</span><span class="number">1</span>_34_1031256251.dbf</span><br><span class="line"><span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>oradata<span class="operator">/</span>booboo<span class="operator">/</span>archive_dir2<span class="operator">/</span><span class="number">1</span>_35_1031256251.dbf</span><br><span class="line"><span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>oradata<span class="operator">/</span>booboo<span class="operator">/</span>archive_dir2<span class="operator">/</span><span class="number">1</span>_34_1031256251.dbf</span><br><span class="line"><span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>fast_recovery_area<span class="operator">/</span>EMCDB<span class="operator">/</span>archivelog<span class="operator">/</span><span class="number">1</span>_35_1031256251.dbf</span><br><span class="line"><span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>fast_recovery_area<span class="operator">/</span>EMCDB<span class="operator">/</span>archivelog<span class="operator">/</span><span class="number">1</span>_36_1031256251.dbf</span><br><span class="line"><span class="operator">/</span>u01<span class="operator">/</span>app<span class="operator">/</span>oracle<span class="operator">/</span>oradata<span class="operator">/</span>booboo<span class="operator">/</span>archive_dir2<span class="operator">/</span><span class="number">1</span>_36_1031256251.dbf</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h3 id="KnowledgePoint" class="article-heading"><a href="#KnowledgePoint" class="headerlink" title="KnowledgePoint"></a>KnowledgePoint<a class="article-anchor" href="#KnowledgePoint" aria-hidden="true"></a></h3><h4 id="管理控制文件" class="article-heading"><a href="#管理控制文件" class="headerlink" title="管理控制文件"></a>管理控制文件<a class="article-anchor" href="#管理控制文件" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-control-files.html#GUID-5F6F9382-6921-4992-9789-E63B18E99C5F">管理控制文件</a></p>
<p>您可以创建，备份和删除控制文件。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-control-files.html#GUID-98A05D29-DD80-4D87-9615-76CBCF8FE694">什么是控制文件？</a><br>每个Oracle数据库都有一个<strong>控制文件</strong>，该<strong>文件</strong>是一个小的二进制文件，记录了数据库的物理结构。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-control-files.html#GUID-737B0C7F-CED8-4B00-8428-DA11B35F9E9B">控制文件</a><br>准则您可以遵循准则来管理数据库的控制文件。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-control-files.html#GUID-9CBB8320-E2F6-4BDB-9B1C-A7B801F97F73">创建控制文件</a><br>您可以创建，复制，重命名和重定位控制文件。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-control-files.html#GUID-4D4D22BE-1619-46BD-B22C-7409B35923AA">创建控制文件</a><br>后的<a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-control-files.html#GUID-4D4D22BE-1619-46BD-B22C-7409B35923AA">故障排除在</a>发出该<code>CREATE CONTROLFILE</code>语句之后，您可能会遇到一些错误。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-control-files.html#GUID-204AF8CF-6C51-4D0F-ADE2-BA804352EA93">备份控制文件</a><br>使用该<code>ALTER DATABASE BACKUP CONTROLFILE</code>语句备份控制文件。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-control-files.html#GUID-D6662264-5149-4394-BE10-28C3047A8343">使用当前副本</a><br>恢复控制文件您可以从当前备份或多路复用副本恢复控制文件。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-control-files.html#GUID-AB003834-2392-4B99-ADBD-497636A2E096">删除控制文件</a><br>您可以删除控制文件，但数据库始终应至少具有两个控制文件。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-control-files.html#GUID-B0AB9343-301E-45C8-AACC-5BC9C85CB2CD">控制文件数据字典视图</a><br>您可以查询一组数据字典视图以获取有关控制文件的信息。</li>
</ul>
<h4 id="管理重做日志" class="article-heading"><a href="#管理重做日志" class="headerlink" title="管理重做日志"></a>管理重做日志<a class="article-anchor" href="#管理重做日志" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-the-redo-log.html#GUID-BC1F1762-0BB1-4218-B7AF-6160C395AAE4">管理重做日志</a></p>
<p>您可以通过完成以下任务来管理重做日志，这些任务包括创建重做日志组和成员，重定位和重命名重做日志成员，删除重做日志组和成员以及强制日志切换。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-the-redo-log.html#GUID-79189E7E-7431-49CA-B342-3B971186503A">什么是重做日志？</a><br>恢复操作最关键的结构是<strong>重做日志</strong>，它由两个或多个预分配的文件组成，这些文件在发生更改时存储对数据库所做的所有更改。Oracle数据库的每个实例都有一个相关的重做日志，以在实例发生故障时保护数据库。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-the-redo-log.html#GUID-D77BCD54-908E-49F8-A80D-C8D3E9465D70">规划重做日志</a><br>在配置数据库实例重做日志时，您可以遵循准则。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-the-redo-log.html#GUID-081AE57B-A821-4F26-97B2-4B141FDB3946">创建重做日志组和成员</a><br>在数据库创建过程中计划数据库的重做日志，并创建所有必需的重做日志文件组和成员。但是，在某些情况下，您可能需要创建其他组或成员。例如，将组添加到重做日志可以纠正重做日志组可用性问题。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-the-redo-log.html#GUID-F593023B-3071-4776-95F2-9B8B6C6E670B">重定位和重命名重做日志成员</a><br>您可以使用操作系统命令重定位重做日志，然后使用该<code>ALTER DATABASE</code>语句使数据库知道其新名称（位置）。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-the-redo-log.html#GUID-54E1DA00-B999-4463-B868-85ADDC108D5D">删除重做日志组和成员</a><br>在某些情况下，您可能希望删除整个重做日志成员组。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-the-redo-log.html#GUID-6A7FB6CB-AF29-40BC-BDB3-B514C502B2F6">强制</a><br>日志切换当LGWR停止写入一个重做日志组并开始写入另一个重做日志组时，将发生日志切换。默认情况下，当当前重做日志文件组填满时，日志切换会自动发生。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-the-redo-log.html#GUID-E8BC43CA-D047-4AEF-AB4A-2566BE44D73A">验证重做日志文件中的块</a><br>您可以将数据库配置为使用校验和来验证重做日志文件中的块。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-the-redo-log.html#GUID-AA0EBC79-6670-409E-AED1-666FCEF3F25F">清除</a><br>重做日志文件当数据库打开时，重做日志文件可能会损坏，并最终停止数据库活动，因为归档无法继续。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-the-redo-log.html#GUID-27E9B63B-03E4-43E5-BA59-AB0EDDDE5CE6">FORCE LOGGING设置的优先级</a><br>您可以在各种级别进行设置<code>FORCE LOGGING</code>和<a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-the-redo-log.html#GUID-27E9B63B-03E4-43E5-BA59-AB0EDDDE5CE6">设置</a><code>NOLOGGING</code>，例如数据库，可插拔数据库（PDB），表空间或数据库对象。当<code>FORCE LOGGING</code>被设置在一个或多个级别的优先级<code>FORCE LOGGING</code>设置决定了在重做日志中记录。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-the-redo-log.html#GUID-05FCB15E-BE40-40EB-B756-4D280461AD7E">重做日志数据字典视图</a><br>您可以查询一组数据字典视图以获取有关重做日志的信息。</li>
</ul>
<h4 id="管理存档的重做日志文件" class="article-heading"><a href="#管理存档的重做日志文件" class="headerlink" title="管理存档的重做日志文件"></a>管理存档的重做日志文件<a class="article-anchor" href="#管理存档的重做日志文件" aria-hidden="true"></a></h4><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-archived-redo-log-files.html#GUID-5EE4AC49-E1B2-41A2-BEE7-AA951EAAB2F3">管理存档的重做日志文件</a></p>
<p>您可以通过完成诸如在<code>NOARCHIVELOG</code> 或 <code>ARCHIVELOG</code> 模式之间进行选择以及指定存档目标之类的任务来管理存档的重做日志文件。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-archived-redo-log-files.html#GUID-9BD00F2E-DC98-4871-8D26-FDB40623909C">什么是存档的重做日志？</a><br>Oracle Database使您可以将已填充的重做日志文件组保存到一个或多个脱机目标，这些目标统称为<strong>归档重做日志</strong>。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-archived-redo-log-files.html#GUID-2FF3967A-44E6-4EA1-8759-5DB2D67CBDE1">在NOARCHIVELOG和ARCHIVELOG模式</a><br>之间进行选择您必须在<code>NOARCHIVELOG</code>或<code>ARCHIVELOG</code>模式下运行数据库。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-archived-redo-log-files.html#GUID-BE84B19D-7BE2-40D5-B962-5EF54E53095C">控制归档</a><br>您可以为数据库设置归档模式，并调整归档器进程的数量。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-archived-redo-log-files.html#GUID-FC700EB5-72AF-414F-8D36-327D266F0BA8">指定存档目标</a><br>在可以存档重做日志之前，必须确定要存档的目标，并熟悉各种目标状态。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-archived-redo-log-files.html#GUID-2A6DDDDA-4127-4574-8F2D-07AC926FCEBB">关于日志传输模式</a><br>将归档日志传输到目的地的两种模式是<strong>常规归档传输</strong>和<strong>备用传输</strong>模式。正常传输包括将文件传输到本地磁盘。备用传输涉及通过网络将文件传输到本地或远程备用数据库。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-archived-redo-log-files.html#GUID-B2D14414-7CC4-4265-9CF4-2AADFE1F29DA">管理存档目标失败</a><br>有时，存档目标可能会失败，从而在自动存档模式下运行时引起问题。Oracle数据库提供了可帮助您最大程度减少与目标故障相关的问题的过程。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-archived-redo-log-files.html#GUID-CDFE66B4-7448-4FC8-A676-58B20FF5CC25">控制由Archivelog进程生成的跟踪输出</a><br>后台进程始终在适当的时候写入跟踪文件。对于archivelog流程，您可以控制生成到跟踪文件的输出。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/admin/managing-archived-redo-log-files.html#GUID-62E48748-F8A8-4740-90B1-5B3708A63386">查看有关存档的重做日志的</a><br>信息您可以使用动态性能视图或<code>ARCHIVE</code> <code>LOG</code> <code>LIST</code>命令显示有关存档的重做日志的信息。</li>
</ul>
</body></html>
              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2025-10-22T08:47:58.101Z" itemprop="dateModified">Last updated: 2025-10-22</time>
                <a href="/database/mysql/index.html" class="article-footer-next" title="概览"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <div id="carbonads" class="carbonads" style="text-align:center;font-family:'Noto Sans SC',sans-serif;">
  <span class="carbon-wrap">
    <a href="https://github.com/booboowei"
       class="carbon-img"
       target="_blank"
       rel="noopener sponsored">
      <img
        src="https://avatars2.githubusercontent.com/u/21328020?s=460&u=88cf6127c32932188f936d05636b7b0d36783ee1&v=4"
        alt="ads via Carbon"
        border="0"
        style="width:80px;height:80px;border-radius:50%;max-width:130px;"
      />
    </a>
    <a href="/about/"
       class="carbon-text"
       target="_blank"
       rel="noopener sponsored"
       style="display:block;margin-top:4px;">
      欢迎光临
    </a>
  </span>

  <!-- 日期显示 -->
  <div id="today-date" style="margin-top:12px;background:#f5f5f5;border-radius:12px;padding:10px 0;">
    <div id="weekday" style="font-size:14px;color:#555;"></div>
    <div id="day" style="font-size:36px;font-weight:bold;color:#000;"></div>
    <div id="ym" style="font-size:14px;color:#555;"></div>
    <div id="lunar" style="font-size:13px;color:#888;margin-top:4px;"></div>
  </div>

<script>
(function(){
  const now = new Date();
  const weekdays = ["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];
  const year = now.getFullYear();
  const month = now.getMonth() + 1;
  const day = now.getDate();

  function toChineseNumber(num) {
    const map = {0:'〇',1:'一',2:'二',3:'三',4:'四',5:'五',6:'六',7:'七',8:'八',9:'九'};
    return String(num).split('').map(n=>map[n]).join('');
  }

  // 优先使用 Intl (现代浏览器支持农历/中国传统历)
  function getLunarByIntl(date) {
    try {
      // 获取农历的月（长格式，如 "九月" 或 "闰八月"），和日（数字）
      const monthFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { month: 'long' });
      const dayFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { day: 'numeric' });
      const lunarMonthText = monthFormatter.format(date); // 例如 "九月" 或 "闰八月"
      const lunarDayText = dayFormatter.format(date);     // 例如 "三十" 或 "初一"
      // 有的浏览器返回的 month 会包含 "闰" 字样，也可能返回汉字月份，需要适配
      return `农历${lunarMonthText}${lunarDayText}`;
    } catch (e) {
      return null; // 表示不支持 Intl 农历
    }
  }

  // 回退：简易本地农历算法（仅作兼容，适用于1900-2049范围）
  const lunarInfo = [0x04bd8,0x04ae0,0x0a570,0x054d5,0x0d260,0x0d950,0x16554,0x056a0,0x09ad0,0x055d2,
                     0x04ae0,0x0a5b6,0x0a4d0,0x0d250,0x1d255,0x0b540,0x0d6a0,0x0ada2,0x095b0,0x14977,
                     0x04970,0x0a4b0,0x0b4b5,0x06a50,0x06d40,0x1ab54,0x02b60,0x09570,0x052f2,0x04970,
                     0x06566,0x0d4a0,0x0ea50,0x06e95,0x05ad0,0x02b60,0x186e3,0x092e0,0x1c8d7,0x0c950,
                     0x0d4a0,0x1d8a6,0x0b550,0x056a0,0x1a5b4,0x025d0,0x092d0,0x0d2b2,0x0a950,0x0b557,
                     0x06ca0,0x0b550,0x15355,0x04da0,0x0a5b0,0x14573,0x052b0,0x0a9a8,0x0e950,0x06aa0,
                     0x0aea6,0x0ab50,0x04b60,0x0aae4,0x0a570,0x05260,0x0f263,0x0d950,0x05b57,0x056a0,
                     0x096d0,0x04dd5,0x04ad0,0x0a4d0,0x0d4d4,0x0d250,0x0d558,0x0b540,0x0b5a0,0x195a6,
                     0x095b0,0x049b0,0x0a974,0x0a4b0,0x0b27a,0x06a50,0x06d40,0x0af46,0x0ab60,0x09570,
                     0x04af5,0x04970,0x064b0,0x074a3,0x0ea50,0x06b58,0x05ac0,0x0ab60,0x096d5,0x092e0];

  function lYearDays(y){let i,sum=348;for(i=0x8000;i>0x8;i>>=1)sum+=(lunarInfo[y-1900]&i)?1:0;return sum+leapDays(y);}
  function leapDays(y){if(leapMonth(y))return(lunarInfo[y-1900]&0x10000)?30:29;else return 0;}
  function leapMonth(y){return lunarInfo[y-1900]&0xf;}
  function monthDays(y,m){return(lunarInfo[y-1900]&(0x10000>>m))?30:29;}

  function LunarFallback(objDate){
    let i, leap=0, temp=0;
    const baseDate = new Date(1900,0,31);
    let offset = Math.floor((objDate - baseDate) / 86400000);
    let year = 1900;
    // 年循环
    for (i = 1900; i < 2050 && offset > 0; i++) {
      temp = lYearDays(i);
      offset -= temp;
      year = i;
    }
    if (offset < 0) { offset += temp; year--; }
    leap = leapMonth(year);
    let isLeap = false;
    let month = 1;
    // 月循环
    for (i = 1; i <= 12 && offset > 0; i++) {
      if (leap > 0 && i === (leap + 1) && !isLeap) {
        // 进入闰月
        temp = leapDays(year);
        isLeap = true;
        i--; // stay on same month number but mark leap
      } else {
        temp = monthDays(year, i);
      }
      offset -= temp;
      if (isLeap && i === leap) { isLeap = false; }
      if (!isLeap) month++; // 非闰月时才推进月份计数
    }
    if (offset === 0 && leap > 0 && month === leap + 1) {
      // 特殊：当正好落在闰月第一天
      // month 保持，isLeap = true
    }
    if (offset < 0) { offset += temp; month--; }
    const day = offset + 1;
    // 修正 month 边界
    if (month <= 0) month = 1;
    return { year, month, day, isLeap: !!isLeap };
  }

  function getLunarDateStringFallback(y,m,d){
    const cDay=["","初一","初二","初三","初四","初五","初六","初七","初八","初九","初十",
                "十一","十二","十三","十四","十五","十六","十七","十八","十九","二十",
                "廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"];
    const cMon=["","正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","冬月","腊月"];
    const lunar = LunarFallback(new Date(y, m-1, d));
    return `农历${lunar.isLeap ? '闰' : ''}${cMon[lunar.month]}${cDay[lunar.day]}`;
  }

  // 先尝试 Intl 方法
  let lunarText = getLunarByIntl(now);
  if (!lunarText) {
    // 回退本地算法
    lunarText = getLunarDateStringFallback(year, month, day);
  }

  // 输出到页面（公历 + 农历）
  document.getElementById("weekday").textContent = weekdays[now.getDay()];
  document.getElementById("day").textContent = day;
  document.getElementById("ym").textContent = `${toChineseNumber(year)}年${toChineseNumber(month)}月`;
  document.getElementById("lunar").textContent = lunarText;
})();
</script>


              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B513-%E6%A6%82%E8%A7%88"><span class="toc-text">实践13:概览</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B513-1-%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E8%A1%8C%E6%81%A2%E5%A4%8D"><span class="toc-text">实践13-1:配置数据库进行恢复</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Overview"><span class="toc-text">Overview</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Task"><span class="toc-text">Task</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Practice"><span class="toc-text">Practice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KnowledgePoint"><span class="toc-text">KnowledgePoint</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E6%8E%A7%E5%88%B6%E6%96%87%E4%BB%B6"><span class="toc-text">管理控制文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97"><span class="toc-text">管理重做日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E5%AD%98%E6%A1%A3%E7%9A%84%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6"><span class="toc-text">管理存档的重做日志文件</span></a></li></ol></li></ol></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">MySQL</strong><a href="/database/mysql/index.html" class="sidebar-link">概览</a><a href="/database/mysql/booboo_mysql/index.html" class="sidebar-link">MySQL 基础</a><a href="/database/mysql/dba_mysql/index.html" class="sidebar-link">MySQL 运维实践</a><a href="/database/mysql/rds_mysql/index.html" class="sidebar-link">RDS 性能调优</a><a href="/database/mysql/security/index.html" class="sidebar-link">安全篇</a><a href="/database/mysql/awesome-tools/index.html" class="sidebar-link">工具篇</a><strong class="sidebar-title">Oracle</strong><a href="/database/oracle/index.html" class="sidebar-link">概览</a><a href="/database/oracle/ocp/index.html" class="sidebar-link">Oracle12C OCP</a><a href="/database/oracle/oracle-12c/index.html" class="sidebar-link">Oracle 12c 学习笔记</a><a href="/database/oracle/oracle-11g/index.html" class="sidebar-link">Oracle 11g 学习笔记</a><strong class="sidebar-title">NoSQL</strong><a href="/database/nosql/index.html" class="sidebar-link">概览</a><a href="/database/nosql/booboo_redis/index.html" class="sidebar-link">Redis 基础</a><a href="/database/nosql/dba_redis/index.html" class="sidebar-link">Redis 进阶</a><a href="/database/nosql/booboo_mongodb/index.html" class="sidebar-link">MongoDB 基础</a><a href="/database/nosql/hadoop/index.html" class="sidebar-link">Hadoop 基础</a><strong class="sidebar-title">TiDB</strong><a href="/database/tidb/index.html" class="sidebar-link">概览</a><a href="/database/tidb/00_tidb入门指南.html" class="sidebar-link">TiDB 入门指南</a><a href="/database/tidb/01_raft协议理解.html" class="sidebar-link">Raft协议理解</a><a href="/database/tidb/tidb_courses/index.html" class="sidebar-link">TiDB 21天课程</a>
  </div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2025 <a href="https://github.com/BoobooWei" target="_blank">魏亚萍</a><br>
      Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>.<br>
      备案号：沪ICP备2020026043号
    </div>
    <div id="footer-links">
      <a href="https://www.youtube.com/@amyreading2023" class="footer-link" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" 
            alt="YouTube"
            style="height:24px; margin-bottom:-6px;">
      </a>
      <a href="https://github.com/BoobooWei" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="../../../../../docs/" class="mobile-nav-link">Hexo</a><a href="../../../../../news/" class="mobile-nav-link">News</a><a href="../../../../../api/" class="mobile-nav-link">MySQL8.0</a><a href="../../../../../database/" class="mobile-nav-link">Database</a><a href="../../../../../linux/" class="mobile-nav-link">Linux</a><a href="../../../../../cloud/" class="mobile-nav-link">Cloud</a><a href="../../../../../singapore/" class="mobile-nav-link">Singapore</a><a href="../../../../../amy/" class="mobile-nav-link">AMY</a><a href="../../../../../about/" class="mobile-nav-link">About</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/BoobooWei" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">MySQL</strong><a href="/database/mysql/index.html" class="mobile-nav-link">概览</a><a href="/database/mysql/booboo_mysql/index.html" class="mobile-nav-link">MySQL 基础</a><a href="/database/mysql/dba_mysql/index.html" class="mobile-nav-link">MySQL 运维实践</a><a href="/database/mysql/rds_mysql/index.html" class="mobile-nav-link">RDS 性能调优</a><a href="/database/mysql/security/index.html" class="mobile-nav-link">安全篇</a><a href="/database/mysql/awesome-tools/index.html" class="mobile-nav-link">工具篇</a><strong class="mobile-nav-title">Oracle</strong><a href="/database/oracle/index.html" class="mobile-nav-link">概览</a><a href="/database/oracle/ocp/index.html" class="mobile-nav-link">Oracle12C OCP</a><a href="/database/oracle/oracle-12c/index.html" class="mobile-nav-link">Oracle 12c 学习笔记</a><a href="/database/oracle/oracle-11g/index.html" class="mobile-nav-link">Oracle 11g 学习笔记</a><strong class="mobile-nav-title">NoSQL</strong><a href="/database/nosql/index.html" class="mobile-nav-link">概览</a><a href="/database/nosql/booboo_redis/index.html" class="mobile-nav-link">Redis 基础</a><a href="/database/nosql/dba_redis/index.html" class="mobile-nav-link">Redis 进阶</a><a href="/database/nosql/booboo_mongodb/index.html" class="mobile-nav-link">MongoDB 基础</a><a href="/database/nosql/hadoop/index.html" class="mobile-nav-link">Hadoop 基础</a><strong class="mobile-nav-title">TiDB</strong><a href="/database/tidb/index.html" class="mobile-nav-link">概览</a><a href="/database/tidb/00_tidb入门指南.html" class="mobile-nav-link">TiDB 入门指南</a><a href="/database/tidb/01_raft协议理解.html" class="mobile-nav-link">Raft协议理解</a><a href="/database/tidb/tidb_courses/index.html" class="mobile-nav-link">TiDB 21天课程</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- Cookie -->
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<!-- build:js build/js/main.js -->

<script src="../../../../../js/lang_select.js"></script>


<script src="../../../../../js/mobile_nav.js"></script>

<!-- endbuild -->

<!-- Algolia -->
<!--   backup
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript">
docsearch({
  appId: '',
  apiKey: '',
  indexName: '',
  insights: true,
  container: '#docsearch',
  debug: false,
  searchParameters: {
    facetFilters: ['lang:en']
  }
});
</script>
-->

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
document.getElementById('search-input-wrap').classList.add('on');
docsearch({
    apiKey: '',
    indexName: '',
    inputSelector: '#search-input'
});
</script>
</body>
</html>