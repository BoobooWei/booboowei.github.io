<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>Oracle数据库12c-管理 实践19:管理性能之SQL调优 | BoobooWei</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.toberoot.com/database/oracle/oracle-12c/student/1Z0-062-Oracle%E6%95%B0%E6%8D%AE%E5%BA%9312c-%E7%AE%A1%E7%90%86/19-ManagingPerformanceSQLTuning-SQL%E8%B0%83%E4%BC%98">
  <!-- Alternate links -->
  
    
      
    
    <link rel="alternate" hreflang="x-default" href="http://www.toberoot.com/database/oracle/oracle-12c/student/1Z0-062-Oracle%E6%95%B0%E6%8D%AE%E5%BA%9312c-%E7%AE%A1%E7%90%86/19-ManagingPerformanceSQLTuning-SQL%E8%B0%83%E4%BC%98" />
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="../../../../../icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="../../../../../icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="../../../../../icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="../../../../../icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="../../../../../icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="../../../../../icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="../../../../../icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="../../../../../icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="../../../../../icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="../../../../../icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="../../../../../icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="../../../../../icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="../../../../../icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="../../../../../icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="../../../../../css/navy.css">

  <!-- endbuild -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-lato@0.0.75/index.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="../../../../../atom.xml" title="BoobooWei" type="application/atom+xml">
  <!-- Open Graph -->
  <meta name="description" content="Practices for Lesson 19: Managing Performance: SQL Tuning 2020.01.29 BoobooWei     实践19:管理性能之SQL调优 实践19:概览 实践19-1:使用自动SQL调优 实践19-2:收集扩展的统计信息 实践19-3:为特定工作负载检测有用的列组 实践19-4:创建在工作负载监视期间检测到的列组      实践19:概">
<meta property="og:type" content="website">
<meta property="og:title" content="Oracle数据库12c-管理 实践19:管理性能之SQL调优">
<meta property="og:url" content="http://www.toberoot.com/database/oracle/oracle-12c/student/1Z0-062-Oracle%E6%95%B0%E6%8D%AE%E5%BA%9312c-%E7%AE%A1%E7%90%86/19-ManagingPerformanceSQLTuning-SQL%E8%B0%83%E4%BC%98">
<meta property="og:site_name" content="BoobooWei">
<meta property="og:description" content="Practices for Lesson 19: Managing Performance: SQL Tuning 2020.01.29 BoobooWei     实践19:管理性能之SQL调优 实践19:概览 实践19-1:使用自动SQL调优 实践19-2:收集扩展的统计信息 实践19-3:为特定工作负载检测有用的列组 实践19-4:创建在工作负载监视期间检测到的列组      实践19:概">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://www.toberoot.com/icon/og-image-wide.png">
<meta property="article:published_time" content="2025-10-22T08:53:55.731Z">
<meta property="article:modified_time" content="2025-10-22T08:48:04.168Z">
<meta property="article:author" content="魏亚萍">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.toberoot.com/icon/twitter-summary.png">
<meta property="fb:admins" content="100000247608790">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48498357-3', 'auto');
  ga('send', 'pageview');
</script>

  <!-- Algolia -->
  <link rel="preconnect" href="https://-dsn.algolia.net" crossorigin />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
<meta name="generator" content="Hexo 8.0.0"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="../../../../../" id="logo">Hexo</a>
    </h1>
    <nav id="main-nav">
      <a href="../../../../../docs/" class="main-nav-link">Hexo</a><a href="../../../../../news/" class="main-nav-link">News</a><a href="../../../../../api/" class="main-nav-link">MySQL8.0</a><a href="../../../../../database/" class="main-nav-link">Database</a><a href="../../../../../linux/" class="main-nav-link">Linux</a><a href="../../../../../cloud/" class="main-nav-link">Cloud</a><a href="../../../../../singapore/" class="main-nav-link">Singapore</a><a href="../../../../../amy/" class="main-nav-link">AMY</a><a href="../../../../../about/" class="main-nav-link">About</a>
      <a target="_blank" rel="noopener" href="https://github.com/BoobooWei" class="main-nav-link"><i class="fa fa-github-alt"></i></a>

      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <div id="lang-select-wrap">
        <a href="/about/" class="main-nav-link"><label id="lang-select-label"><i class="fa fa-globe"></i><span>关于我</span></label></a>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">Oracle数据库12c-管理 实践19:管理性能之SQL调优</h1>
                <a target="_blank" rel="noopener" href="https://github.com/BoobooWei/site/edit/master/source/database/oracle/oracle-12c/student/1Z0-062-Oracle数据库12c-管理/19-ManagingPerformanceSQLTuning-SQL调优.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <html><head></head><body><blockquote>
<p><strong>Practices for Lesson 19: Managing Performance: SQL Tuning</strong></p>
<p>2020.01.29 BoobooWei</p>
</blockquote>
<!-- MDTOC maxdepth:2 firsth1:1 numbering:0 flatten:0 bullets:1 updateOnSave:1 -->

<ul>
<li><a href="#%E5%AE%9E%E8%B7%B519%E7%AE%A1%E7%90%86%E6%80%A7%E8%83%BD%E4%B9%8Bsql%E8%B0%83%E4%BC%98">实践19:管理性能之SQL调优</a><ul>
<li><a href="#%E5%AE%9E%E8%B7%B519%E6%A6%82%E8%A7%88">实践19:概览</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B519-1%E4%BD%BF%E7%94%A8%E8%87%AA%E5%8A%A8sql%E8%B0%83%E4%BC%98">实践19-1:使用自动SQL调优</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B519-2%E6%94%B6%E9%9B%86%E6%89%A9%E5%B1%95%E7%9A%84%E7%BB%9F%E8%AE%A1%E4%BF%A1%E6%81%AF">实践19-2:收集扩展的统计信息</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B519-3%E4%B8%BA%E7%89%B9%E5%AE%9A%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E6%A3%80%E6%B5%8B%E6%9C%89%E7%94%A8%E7%9A%84%E5%88%97%E7%BB%84">实践19-3:为特定工作负载检测有用的列组</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B519-4%E5%88%9B%E5%BB%BA%E5%9C%A8%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E7%9B%91%E8%A7%86%E6%9C%9F%E9%97%B4%E6%A3%80%E6%B5%8B%E5%88%B0%E7%9A%84%E5%88%97%E7%BB%84">实践19-4:创建在工作负载监视期间检测到的列组</a></li>
</ul>
</li>
</ul>
<!-- /MDTOC -->

<h2 id="实践19-概览" class="article-heading"><a href="#实践19-概览" class="headerlink" title="实践19:概览"></a>实践19:概览<a class="article-anchor" href="#实践19-概览" aria-hidden="true"></a></h2><p>Practices for Lesson 19: Overview</p>
<p>By default, Automatic SQL Tuning executes automatically during each nightly maintenance window. For this practice, you simulate the execution of Automatic SQL Tuning, and explore its results.</p>
<p>默认情况下，在每个夜间维护窗口期间自动执行SQL调优。对于这个实践，您将模拟自动SQL调优的执行，并研究其结果。</p>
<h2 id="实践19-1-使用自动SQL调优" class="article-heading"><a href="#实践19-1-使用自动SQL调优" class="headerlink" title="实践19-1:使用自动SQL调优"></a>实践19-1:使用自动SQL调优<a class="article-anchor" href="#实践19-1-使用自动SQL调优" aria-hidden="true"></a></h2><p>Practice 19-1: Using Automatic SQL Tuning</p>
<h3 id="Overview" class="article-heading"><a href="#Overview" class="headerlink" title="Overview"></a>Overview<a class="article-anchor" href="#Overview" aria-hidden="true"></a></h3><p>In this practice, you manually launch Automatic SQL Tuning to automatically tune a small application workload. You then investigate the outcome and configuration possibilities.</p>
<p><strong>Assumptions</strong></p>
<p>ADMIN Super Administrator user has been created in Enterprise Manager Cloud Control.</p>
<p>DBA1 user with SYSDBA privileges has been created in orcl database.</p>
<h3 id="Task" class="article-heading"><a href="#Task" class="headerlink" title="Task"></a>Task<a class="article-anchor" href="#Task" aria-hidden="true"></a></h3><ol>
<li><p>In Cloud Control, Configure the Automatic SQL Tuning Task to Implement SQL Profiles Automatically.</p>
<table>
<thead>
<tr>
<th><strong>Step</strong></th>
<th><strong>Window/Page Description</strong></th>
<th><strong>Choices or Values</strong></th>
</tr>
</thead>
<tbody><tr>
<td>a.</td>
<td>EMCC Cloud Control</td>
<td>Login as <strong>ADMIN</strong> user.</td>
</tr>
<tr>
<td>b.</td>
<td>Summary page</td>
<td>Navigate to the <strong>orcl</strong> database home page.</td>
</tr>
<tr>
<td>c.</td>
<td>orcl database home</td>
<td>Click <strong>Administration &gt; Oracle Scheduler &gt; Automated Maintenance Tasks</strong>.</td>
</tr>
<tr>
<td>d.</td>
<td>Database Login</td>
<td>Login with **S****YSDBA** credentials to database. Use DBA1/oracle_4U AS SYSDBA</td>
</tr>
<tr>
<td>e.</td>
<td>Automated Maintenance Tasks</td>
<td>Verify Status is <strong>Enabled.</strong> Click <strong>Configure.</strong></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><strong>Step</strong></th>
<th><strong>Window/Page Description</strong></th>
<th><strong>Choices or Values</strong></th>
</tr>
</thead>
<tbody><tr>
<td>f.</td>
<td>Automated Maintenance Tasks Configuration</td>
<td>Click <strong>Configure</strong> next to Automatic SQL Tuning.</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><strong>Step</strong></th>
<th><strong>Window/Page Description</strong></th>
<th><strong>Choices or Values</strong></th>
</tr>
</thead>
<tbody><tr>
<td>g.</td>
<td>Automatic SQL Tuning Settings</td>
<td>Click <strong>Yes</strong> for Automatic Implementation of SQL Profiles. Click <strong>Show SQL.</strong></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><strong>Step</strong></th>
<th><strong>Window/Page Description</strong></th>
<th><strong>Choices or Values</strong></th>
</tr>
</thead>
<tbody><tr>
<td>h.</td>
<td>Show SQL</td>
<td>View the SQL statement. Click <strong>Return.</strong></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><strong>Step</strong></th>
<th><strong>Window/Page Description</strong></th>
<th><strong>Choices or Values</strong></th>
</tr>
</thead>
<tbody><tr>
<td>i.</td>
<td>Automatic SQL Tuning Settings</td>
<td>Click <strong>Apply.</strong></td>
</tr>
</tbody></table>
</li>
<li><p>Review and execute the <strong>$LABS/P19/ast_setup.sh</strong> script .This script creates the AST user, turns off automatic maintenance tasks, and drops any existing profiles on queries executed by the AST user.</p>
</li>
<li><p>Execute the <strong>ast_workload_stream.sh</strong> script. This script executes a query that is not correctly optimized multiple times. The query in question uses hints that force the optimizer to pick a suboptimal execution plan. The script executes for approximately 60 seconds.</p>
</li>
<li><p>Automatic SQL Tuning is implemented by using an automated task that runs during maintenance windows. However, you are not going to wait for the next maintenance window to open. This might take too long. Instead, you will force the opening of your next maintenance window now. This will automatically trigger the Automatic SQL Tuning task. Review and execute the <strong>ast_run.sh</strong> script to do that. It takes about 10 minutes for the script to execute.</p>
</li>
<li><p>Execute the <strong>ast_workload_stream.sh</strong> script again. What do you observe?</p>
<p>You should see that the execution time for ast_workload_stream.sh is much faster than the original execution. This is probably due to the fact that Automatic SQL Tuning implemented a profile for your statement automatically.</p>
</li>
<li><p>Log in as the AST user and force the creation of an AWR snapshot.</p>
</li>
<li><p>How can you confirm that a SQL Profile was automatically implemented?</p>
<p>a. In Enterprise Manager Cloud Control, navigate to <strong>Administration &gt; Oracle Scheduler&gt;Automated Maintenance Tasks.</strong></p>
<p>b. Click <strong>Automatic SQL Tuning</strong>.</p>
<p>c. On the Automatic SQL Tuning Result Summary page, view the tuning results.</p>
<p>d. Look at the graphs on the Automatic SQL Tuning Result Summary page. (If you do not see any graphs, return to step 5, execute the work load twice, and then continue with step 6 and 7.)</p>
<p>e. Focus on understanding the pie chart and the bar graph next to it. You should be able to get a sense of the general findings, as well as the number of SQL profiles implemented by the task.</p>
<p>f. In the Summary Time Period section, Click <strong>View Report</strong> to see a detailed SQL-level report. g. Find and select the SQL statement that ran in the AST schema.</p>
<p><strong>Note:</strong> The Thumbs Up icon means that the profile was implemented.</p>
<p>h. Click <strong>View Recommendations</strong>.</p>
<p>i. Click the <strong>Compare Explain Plans</strong> eyeglass icon for the SQL Profile entry.</p>
<p>j. Scroll down the page.</p>
<p>k. Look at the old and new explain plans for the query.</p>
<p>l. Then click the “<strong>Recommendations for SQL ID</strong>” locator link (the last of the breadcrumbs on top of the page) to return to the previous screen.</p>
<p>m. Investigate a SQL profile. While still on the “Recommendations for SQL_ID” page, click the <strong>SQL Text</strong> link to go to the SQL Details page for this SQL.</p>
<p>n. On the SQL Details – Tuning History page note the link to SYS_AUTO_SQL_TUNING_TASK that is there to show that the SQL was tuned by this tuning task.</p>
<p>o. Click the <strong>Plan Control</strong> tab.</p>
<p>p. Note that a profile was created automatically for this SQL. The type of AUTO means it was automatically created.</p>
<p>q. Click the <strong>Statistics</strong> tab to take a look at the execution history for this SQL.</p>
<p>r. Select one of the plan hash values from the pull down Plan Hash Values. What is the time of the execution, and Elapsed Time per Execution?</p>
<p>s. Select the other plan hash value from the pull down Plan Hash Values. What is the time of the execution, and Elapsed Time per Execution?</p>
<p>t. Which of the two executed first? Which one executed more quickly?</p>
<p><em>The hash value 4005616876 in the example executed first, and the second hash value executed more quickly.</em></p>
<p>u. Select All in the Plan Hash Values. This shows the improved plan and the original in the same graph. The bar graph for the second run with the SQL Profile applied may be so small as to be almost invisible.</p>
</li>
<li><p>Generate a text report for more in-depth information. From the command line, execute the <strong>ast_task_report.sh</strong> script. What do you observe?</p>
<p>a. Notice the first queries that fetch the execution name and object number from the advisor schema, followed by the final query that gets the text report. In the text report, look for the section about the SQL profile finding and peruse the Validation Results section. This shows you the execution statistics observed during test-execute and allows you to get a better sense of the profile’s quality. You can also use the report_auto_tuning_task API to get reports that span multiple executions of the task.</p>
</li>
<li><p>Investigate configuring Automatic SQL Tuning with Cloud Control.</p>
<p>a. While you are logged in to the <strong>orcl</strong> database target as the **D**<strong>BA1</strong> user, navigate to **Administration &gt; Oracle Scheduler &gt; Automated Maintenance Tasks**.</p>
<p>b. The chart shows times in the past when each client was executed, and times in the future when they are scheduled to run again.</p>
<p>c. Select <strong>7 days</strong> in the Interval menu and click <strong>Go</strong> to see an entire week’s worth of data.</p>
<p>d. Click the <strong>Configure</strong> button. On the Automated Maintenance Tasks Configuration page, you can disable individual clients and change which windows they run in.</p>
<p>e. Disable the Automatic SQL Tuning client entirely and click <strong>Show SQL</strong>.</p>
<p>f. Review the command and then click <strong>Return</strong>.</p>
<p>g. On the Automated Maintenance Tasks Configuration page, click <strong>Apply</strong>. You should receive a success message.</p>
<p>h. Click the <strong>Automated Maintenance Tasks</strong> locator link at the top of the page i. Notice the forbidden sign right next to the task name.</p>
<p>j. Click <strong>Configure</strong>.</p>
<p>k. <strong>Enable</strong> the Automatic SQL Tuning task.</p>
<p>l. Optionally, click Show SQL, review the commands and then click <strong>Return</strong>.</p>
<p>m. Click <strong>Apply</strong> to enable Automatic SQL Tuning. You should receive a success message. n. Navigate to the Automatic SQL Tuning Settings page. If you are on the Automated Maintenance Tasks Configuration page, click the <strong>Configure</strong> button for Automatic SQL Tuning.</p>
<p>o. On the Automatic SQL Tuning Settings page, select <strong>No</strong> beside the “Automatic</p>
<p>Implementation of SQL Profiles” field, and click <strong>Show SQL</strong>.</p>
<p>p. Review the command, click <strong>Return</strong>, and then click <strong>Apply</strong>. You should receive a success message.</p>
</li>
<li><p>OPTIONAL: Review the ast_manual_config.sh script to understand how you can configure Automatic SQL Tuning by using PL/SQL.</p>
</li>
</ol>
<h3 id="Practice" class="article-heading"><a href="#Practice" class="headerlink" title="Practice"></a>Practice<a class="article-anchor" href="#Practice" aria-hidden="true"></a></h3><h3 id="KnowledgePoint" class="article-heading"><a href="#KnowledgePoint" class="headerlink" title="KnowledgePoint"></a>KnowledgePoint<a class="article-anchor" href="#KnowledgePoint" aria-hidden="true"></a></h3><h2 id="实践19-2-收集扩展的统计信息" class="article-heading"><a href="#实践19-2-收集扩展的统计信息" class="headerlink" title="实践19-2:收集扩展的统计信息"></a>实践19-2:收集扩展的统计信息<a class="article-anchor" href="#实践19-2-收集扩展的统计信息" aria-hidden="true"></a></h2><h3 id="Overview-1" class="article-heading"><a href="#Overview-1" class="headerlink" title="Overview"></a>Overview<a class="article-anchor" href="#Overview-1" aria-hidden="true"></a></h3><p>列组统计信息如何使优化器给出更准确的基数估计</p>
<h3 id="Task-1" class="article-heading"><a href="#Task-1" class="headerlink" title="Task"></a>Task<a class="article-anchor" href="#Task-1" aria-hidden="true"></a></h3><h3 id="Practice-1" class="article-heading"><a href="#Practice-1" class="headerlink" title="Practice"></a>Practice<a class="article-anchor" href="#Practice-1" aria-hidden="true"></a></h3><p>该<code>DBA_TAB_COL_STATISTICS</code>表的以下查询显示有关在列上ORDER_DATE和ORDER_ID从<code>OE.ORDERS</code>表中收集的统计信息的信息：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">COL COLUMN_NAME FORMAT a20</span><br><span class="line">COL NDV FORMAT <span class="number">999</span></span><br><span class="line"><span class="keyword">SELECT</span> COLUMN_NAME, NUM_DISTINCT <span class="keyword">AS</span> "NDV", HISTOGRAM</span><br><span class="line"><span class="keyword">FROM</span>   DBA_TAB_COL_STATISTICS</span><br><span class="line"><span class="keyword">WHERE</span>  OWNER <span class="operator">=</span> <span class="string">'OE'</span></span><br><span class="line"><span class="keyword">AND</span>    TABLE_NAME <span class="operator">=</span> <span class="string">'ORDERS'</span></span><br><span class="line"><span class="keyword">AND</span>    COLUMN_NAME <span class="keyword">IN</span> (<span class="string">'ORDER_MODE'</span>, <span class="string">'ORDER_ID'</span>);</span><br></pre></td></tr></tbody></table></figure>

<p>示例输出如下：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">COLUMN_NAME	      NDV HISTOGRAM</span><br><span class="line"><span class="comment">-------------------- ---- ---------------</span></span><br><span class="line">ORDER_ID	      <span class="number">105</span> <span class="keyword">NONE</span></span><br><span class="line">ORDER_MODE		<span class="number">2</span> FREQUENCY</span><br></pre></td></tr></tbody></table></figure>

<p>考虑一个有针对性查询的解释计划：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">EXPLAIN PLAN <span class="keyword">FOR</span></span><br><span class="line">  <span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">  <span class="keyword">FROM</span>   sh.customers</span><br><span class="line">  <span class="keyword">WHERE</span>  cust_state_province <span class="operator">=</span> <span class="string">'CA'</span></span><br><span class="line">  <span class="keyword">AND</span>    country_id<span class="operator">=</span><span class="number">52790</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>查看执行结果</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">TABLE</span>(DBMS_XPLAN.DISPLAY);</span><br><span class="line"></span><br><span class="line">PLAN_TABLE_OUTPUT</span><br><span class="line"><span class="comment">--------------------------------------------------------------------------------</span></span><br><span class="line">Plan hash <span class="keyword">value</span>: <span class="number">4043159647</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">--------</span></span><br><span class="line"></span><br><span class="line"><span class="operator">|</span> Id  <span class="operator">|</span> Operation		    <span class="operator">|</span> Name     <span class="operator">|</span> <span class="keyword">Rows</span>  <span class="operator">|</span> Bytes <span class="operator">|</span> Cost (<span class="operator">%</span>CPU)<span class="operator">|</span> Ti</span><br><span class="line">me     <span class="operator">|</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">--------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PLAN_TABLE_OUTPUT</span><br><span class="line"><span class="comment">--------------------------------------------------------------------------------</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">0</span> <span class="operator">|</span> <span class="keyword">SELECT</span> STATEMENT	    <span class="operator">|</span>	       <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span>    <span class="number">37</span> <span class="operator">|</span>     <span class="number">1</span>	 (<span class="number">0</span>)<span class="operator">|</span> <span class="number">00</span></span><br><span class="line">:<span class="number">00</span>:<span class="number">01</span> <span class="operator">|</span></span><br><span class="line"></span><br><span class="line"><span class="operator">|</span><span class="operator">*</span>  <span class="number">1</span> <span class="operator">|</span>  <span class="keyword">TABLE</span> ACCESS <span class="keyword">BY</span> INDEX ROWID<span class="operator">|</span> ORDERS   <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span>    <span class="number">37</span> <span class="operator">|</span>     <span class="number">1</span>	 (<span class="number">0</span>)<span class="operator">|</span> <span class="number">00</span></span><br><span class="line">:<span class="number">00</span>:<span class="number">01</span> <span class="operator">|</span></span><br><span class="line"></span><br><span class="line"><span class="operator">|</span><span class="operator">*</span>  <span class="number">2</span> <span class="operator">|</span>   INDEX <span class="keyword">UNIQUE</span> SCAN	    <span class="operator">|</span> ORDER_PK <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span>       <span class="operator">|</span>     <span class="number">0</span>	 (<span class="number">0</span>)<span class="operator">|</span> <span class="number">00</span></span><br><span class="line">:<span class="number">00</span>:<span class="number">01</span> <span class="operator">|</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">--------</span></span><br><span class="line"></span><br><span class="line">PLAN_TABLE_OUTPUT</span><br><span class="line"><span class="comment">--------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Predicate Information (identified <span class="keyword">by</span> operation id):</span><br><span class="line"><span class="comment">---------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">   <span class="number">1</span> <span class="operator">-</span> <span class="keyword">filter</span>("ORDER_MODE"<span class="operator">=</span><span class="string">'direct'</span>)</span><br><span class="line">   <span class="number">2</span> <span class="operator">-</span> access("ORDER_ID"<span class="operator">=</span><span class="number">2458</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">15</span> <span class="keyword">rows</span> selected.</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="KnowledgePoint-1" class="article-heading"><a href="#KnowledgePoint-1" class="headerlink" title="KnowledgePoint"></a>KnowledgePoint<a class="article-anchor" href="#KnowledgePoint-1" aria-hidden="true"></a></h3><p>管理扩展统计</p>
<p><code>DBMS_STATS</code>使您可以收集<strong>扩展的统计信息</strong>，当表的不同列上存在多个谓词或谓词使用表达式时，这些统计信息可以改善基数估计。</p>
<p>的<strong>扩展</strong>可以是一个列组或表达。当来自同一表的多个列一起出现在SQL语句中时，列组统计信息可以改善基数估计。当谓词使用表达式（例如内置或用户定义的函数）时，表达式统计信息可改进优化程序的估计。</p>
<p>注意：您不能在虚拟列上创建扩展统计信息。</p>
<p>管理列组统计信息</p>
<p><strong>列组</strong>是一组将被视为一个单元的列。</p>
<p>本质上，列组是虚拟列。通过收集列组的统计信息，当查询将这些列组合在一起时，优化器可以更准确地确定基数估计。</p>
<p>以下各节概述了<a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/tgsql/glossary.html#GUID-FB763B43-B5C7-47D0-8B0D-47CED4922501">列组统计信息</a>，并说明了如何手动管理它们：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/tgsql/managing-extended-statistics.html#GUID-858E0BDA-06C6-471F-B9E8-888C3AD29673">关于列组</a><br>统计信息单个列统计信息对于确定<code>WHERE</code>子句中单个谓词的选择性很有用。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/tgsql/managing-extended-statistics.html#GUID-E1F39134-24F1-4EF7-B614-82F9428CA762">检测特定工作负载的有用列组</a><br>您可以使用<code>DBMS_STATS.SEED_COL_USAGE</code>并<code>REPORT_COL_USAGE</code>基于指定的工作负载来确定表需要哪些列组。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/tgsql/managing-extended-statistics.html#GUID-783A8687-EDB3-437E-AE99-3F12369BA10A">创建在工作负载监视期间检测到的列组</a><br>您可以使用该<code>DBMS_STATS.CREATE_EXTENDED_STATS</code>功能创建以前通过执行检测到的列组<code>DBMS_STATS.SEED_COL_USAGE</code>。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/tgsql/managing-extended-statistics.html#GUID-D070C3B3-C356-4630-8EB3-766A790866F3">手动创建和收集列组的统计信息</a><br>在某些情况下，您可能知道要创建的列组。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/tgsql/managing-extended-statistics.html#GUID-532D06C9-C6A2-4018-B496-AD87003B682E">显示列组信息</a><br>要获取<a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/tgsql/managing-extended-statistics.html#GUID-532D06C9-C6A2-4018-B496-AD87003B682E">列组</a>的名称，请使用<code>DBMS_STATS.SHOW_EXTENDED_STATS_NAME</code>函数或数据库视图。</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/tgsql/managing-extended-statistics.html#GUID-DBBB6C91-4450-457D-A612-71E835D6159C">删除列组</a><br>使用此<code>DBMS_STATS.DROP_EXTENDED_STATS</code>功能可以从表中删除列组。</li>
</ul>
<p>也可以看看：</p>
<p><a target="_blank" rel="noopener" href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tgsql&amp;id=ARPLS059">Oracle Database PL / SQL软件包和类型参考</a>以了解该<code>DBMS_STATS</code>软件包</p>
<table>
<thead>
<tr>
<th>计划单位或偏好</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>SEED_COL_USAGE</code> 程序</td>
<td>遍历指定工作负载中的SQL语句，进行编译，然后为出现在这些语句中的列播种列使用情况信息。为了确定适当的列组，数据库必须遵守代表性的工作负载。在监视期间，您不需要自己运行查询。相反，您可以<code>EXPLAIN PLAN</code>在工作负载中运行一些运行时间更长的查询，以确保数据库正在记录这些查询的列组信息。</td>
</tr>
<tr>
<td><code>REPORT_COL_USAGE</code> 功能</td>
<td>生成一个报告，该报告列出<code>GROUP BY</code>在工作负载中的过滤谓词，连接谓词和子句中看到的列。您可以使用此功能来查看为特定表记录的列使用情况信息。</td>
</tr>
<tr>
<td><code>CREATE_EXTENDED_STATS</code> 功能</td>
<td>创建扩展名，扩展名可以是列组或表达式。当用户生成或自动统计信息收集作业收集表的统计信息时，数据库将收集扩展的统计信息。</td>
</tr>
<tr>
<td><code>AUTO_STAT_EXTENSIONS</code> 偏爱</td>
<td>收集优化程序统计信息时，控制扩展的自动创建，包括列组。使用此设置偏好<code>SET_TABLE_PREFS</code>，<code>SET_SCHEMA_PREFS</code>或<code>SET_GLOBAL_PREFS</code>。当<code>AUTO_STAT_EXTENSIONS</code>设置为<code>OFF</code>（默认）时，数据库不会自动创建列组统计信息。要创建扩展，您必须执行<code>CREATE_EXTENDED_STATS</code>函数或<code>METHOD_OPT</code>在<code>DBMS_STATS</code>API 的参数中显式指定扩展统计信息。设置为时<code>ON</code>，SQL计划伪指令可以根据工作负载中谓词中列的使用情况自动触发创建列组统计信息。</td>
</tr>
</tbody></table>
<p>也可以看看：</p>
<ul>
<li>“ <a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/tgsql/controlling-the-use-of-optimizer-statistics.html#GUID-D73DB2F4-46C1-4C5B-94DD-DE1F1DD5BBCC">为表设置人工优化器统计信息</a> ”</li>
<li><a target="_blank" rel="noopener" href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tgsql&amp;id=ARPLS059">Oracle Database PL / SQL软件包和类型参考</a>以了解该<code>DBMS_STATS</code>软件包</li>
<li><a target="_blank" rel="noopener" href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tgsql&amp;id=SQLRF54467">Oracle数据库SQL语言参考</a>中有关虚拟列限制的列表</li>
</ul>
<h2 id="实践19-3-为特定工作负载检测有用的列组" class="article-heading"><a href="#实践19-3-为特定工作负载检测有用的列组" class="headerlink" title="实践19-3:为特定工作负载检测有用的列组"></a>实践19-3:为特定工作负载检测有用的列组<a class="article-anchor" href="#实践19-3-为特定工作负载检测有用的列组" aria-hidden="true"></a></h2><h3 id="Overview-2" class="article-heading"><a href="#Overview-2" class="headerlink" title="Overview"></a>Overview<a class="article-anchor" href="#Overview-2" aria-hidden="true"></a></h3><p>本教程假定以下内容：</p>
<ul>
<li>对于使用引用列和的谓词<code>oe.customers_test</code>的<code>customers</code>表查询（从表创建），基数估计不正确。 <code>country_id``cust_state_province</code></li>
<li>您希望数据库在5分钟（300秒）内监视您的工作负载。</li>
<li>您希望数据库确定自动需要哪些列组。</li>
</ul>
<h3 id="Task-2" class="article-heading"><a href="#Task-2" class="headerlink" title="Task"></a>Task<a class="article-anchor" href="#Task-2" aria-hidden="true"></a></h3><h3 id="Practice-2" class="article-heading"><a href="#Practice-2" class="headerlink" title="Practice"></a>Practice<a class="article-anchor" href="#Practice-2" aria-hidden="true"></a></h3><p>您可以使用<code>DBMS_STATS.SEED_COL_USAGE</code>和<code>REPORT_COL_USAGE</code>根据指定的工作负荷来确定表需要哪些列组。</p>
<p>当您不知道要创建哪个扩展统计信息时，此技术很有用。此技术不适用于表达式统计。</p>
<p>假设条件</p>
<p>本教程假定以下内容：</p>
<ul>
<li>对于使用引用列和的谓词<code>sh.customers_test</code>的<code>customers</code>表查询（从表创建），基数估计不正确。</li>
<li>您希望数据库在5分钟（300秒）内监视您的工作负载。</li>
<li>您希望数据库确定自动需要哪些列组。</li>
</ul>
<p>要检测列组：</p>
<ol>
<li><p>启动SQL * Plus或SQL Developer，然后以user身份登录数据库<code>sh</code>。</p>
</li>
<li><p>创建<code>customers_test</code>表并为其收集统计信息：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">conn oe<span class="operator">/</span>oe<span class="variable">@emrep</span>;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> customers_test;</span><br><span class="line"><span class="keyword">CREATE TABLE</span> customers_test <span class="keyword">AS</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> customers;</span><br><span class="line"><span class="keyword">EXEC</span> DBMS_STATS.GATHER_TABLE_STATS(<span class="keyword">user</span>, <span class="string">'customers_test'</span>);</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>启用工作负载监视。</p>
<p>在另一个SQL * Plus会话中，连接为<code>SYS</code>并运行以下PL / SQL程序以启用监视300秒：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">conn sys<span class="operator">/</span>WLS3Gg5_2<span class="variable">@emrep</span> <span class="keyword">as</span> sysdba</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  DBMS_STATS.SEED_COL_USAGE(<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="number">300</span>);</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="operator">/</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>以用户<code>oe</code>身份，运行工作负载中两个查询的解释计划。</p>
<p>以下示例显示了<code>customers_test</code>表中两个查询的解释计划：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">conn oe<span class="operator">/</span>oe<span class="variable">@emrep</span>;</span><br><span class="line">EXPLAIN PLAN <span class="keyword">FOR</span></span><br><span class="line">  <span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">  <span class="keyword">FROM</span>   customers_test</span><br><span class="line">  <span class="keyword">WHERE</span>  CUST_EMAIL <span class="operator">=</span> <span class="string">'Charlotte.Buckley@PINTAIL.EXAMPLE.COM'</span></span><br><span class="line">  <span class="keyword">AND</span>    GENDER <span class="operator">=</span> <span class="string">'F'</span></span><br><span class="line">  <span class="keyword">AND</span>    ACCOUNT_MGR_ID <span class="operator">=</span> <span class="number">149</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> PLAN_TABLE_OUTPUT</span><br><span class="line"><span class="keyword">FROM</span>   <span class="keyword">TABLE</span>(DBMS_XPLAN.DISPLAY(<span class="string">'plan_table'</span>, <span class="keyword">null</span>,<span class="string">'basic rows'</span>));</span><br><span class="line"></span><br><span class="line">EXPLAIN PLAN <span class="keyword">FOR</span></span><br><span class="line">  <span class="keyword">SELECT</span>   ACCOUNT_MGR_ID, GENDER, <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line">  <span class="keyword">FROM</span>     customers_test</span><br><span class="line">  <span class="keyword">GROUP</span> <span class="keyword">BY</span> ACCOUNT_MGR_ID, GENDER;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> PLAN_TABLE_OUTPUT</span><br></pre></td></tr></tbody></table></figure>

<p>输出示例如下：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">PLAN_TABLE_OUTPUT</span><br><span class="line"><span class="comment">--------------------------------------------------------------------------------</span></span><br><span class="line">Plan hash <span class="keyword">value</span>: <span class="number">2112738156</span></span><br><span class="line"></span><br><span class="line"><span class="comment">----------------------------------------------------</span></span><br><span class="line"><span class="operator">|</span> Id  <span class="operator">|</span> Operation	  <span class="operator">|</span> Name	   <span class="operator">|</span> <span class="keyword">Rows</span>  <span class="operator">|</span></span><br><span class="line"><span class="comment">----------------------------------------------------</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">0</span> <span class="operator">|</span> <span class="keyword">SELECT</span> STATEMENT  <span class="operator">|</span>		   <span class="operator">|</span>	 <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span>  <span class="keyword">TABLE</span> ACCESS <span class="keyword">FULL</span><span class="operator">|</span> CUSTOMERS_TEST <span class="operator">|</span>	 <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="comment">----------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="number">8</span> <span class="keyword">rows</span> selected.</span><br><span class="line"></span><br><span class="line">PLAN_TABLE_OUTPUT</span><br><span class="line"><span class="comment">--------------------------------------------------------------------------------</span></span><br><span class="line">Plan hash <span class="keyword">value</span>: <span class="number">1820398555</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-----------------------------------------------------</span></span><br><span class="line"><span class="operator">|</span> Id  <span class="operator">|</span> Operation	   <span class="operator">|</span> Name	    <span class="operator">|</span> <span class="keyword">Rows</span>  <span class="operator">|</span></span><br><span class="line"><span class="comment">-----------------------------------------------------</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">0</span> <span class="operator">|</span> <span class="keyword">SELECT</span> STATEMENT   <span class="operator">|</span>		    <span class="operator">|</span>	  <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span>  HASH <span class="keyword">GROUP</span> <span class="keyword">BY</span>	   <span class="operator">|</span>		    <span class="operator">|</span>	  <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">2</span> <span class="operator">|</span>   <span class="keyword">TABLE</span> ACCESS <span class="keyword">FULL</span><span class="operator">|</span> CUSTOMERS_TEST <span class="operator">|</span>	<span class="number">319</span> <span class="operator">|</span></span><br><span class="line"><span class="comment">-----------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="number">9</span> <span class="keyword">rows</span> selected.</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>查看为表记录的列使用情况信息。</p>
<p><code>oe</code>用户调用该<code>DBMS_STATS.REPORT_COL_USAGE</code>函数以生成报告：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">SET LONG 100000</span><br><span class="line">SET LINES 120</span><br><span class="line">SET PAGES 0</span><br><span class="line">SELECT DBMS_STATS.REPORT_COL_USAGE(user, 'customers_test')</span><br><span class="line">FROM   DUAL;</span><br></pre></td></tr></tbody></table></figure>

<p>该报告显示在下面：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">LEGEND:</span><br><span class="line">.......</span><br><span class="line"></span><br><span class="line">EQ	   : Used <span class="keyword">in</span> single <span class="keyword">table</span> EQuality predicate</span><br><span class="line"><span class="keyword">RANGE</span>	   : Used <span class="keyword">in</span> single <span class="keyword">table</span> <span class="keyword">RANGE</span> predicate</span><br><span class="line"><span class="keyword">LIKE</span>	   : Used <span class="keyword">in</span> single <span class="keyword">table</span> <span class="keyword">LIKE</span> predicate</span><br><span class="line"><span class="keyword">NULL</span>	   : Used <span class="keyword">in</span> single <span class="keyword">table</span> <span class="keyword">is</span> (<span class="keyword">not</span>) <span class="keyword">NULL</span> predicate</span><br><span class="line">EQ_JOIN    : Used <span class="keyword">in</span> EQuality <span class="keyword">JOIN</span> predicate</span><br><span class="line">NONEQ_JOIN : Used <span class="keyword">in</span> NON EQuality <span class="keyword">JOIN</span> predicate</span><br><span class="line"><span class="keyword">FILTER</span>	   : Used <span class="keyword">in</span> single <span class="keyword">table</span> <span class="keyword">FILTER</span> predicate</span><br><span class="line"><span class="keyword">JOIN</span>	   : Used <span class="keyword">in</span> <span class="keyword">JOIN</span> predicate</span><br><span class="line">GROUP_BY   : Used <span class="keyword">in</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> expression</span><br><span class="line">...............................................................................</span><br><span class="line"></span><br><span class="line">###############################################################################</span><br><span class="line"></span><br><span class="line"><span class="keyword">COLUMN</span> USAGE REPORT <span class="keyword">FOR</span> OE.CUSTOMERS_TEST</span><br><span class="line">.........................................</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> ACCOUNT_MGR_ID		       : EQ</span><br><span class="line"><span class="number">2.</span> CUST_EMAIL			       : EQ</span><br><span class="line"><span class="number">3.</span> GENDER			       : EQ</span><br><span class="line"><span class="number">4.</span> (CUST_EMAIL, ACCOUNT_MGR_ID,</span><br><span class="line">    GENDER)			       : <span class="keyword">FILTER</span></span><br><span class="line">###############################################################################</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>在上一个报告中，前三个列在第一个受监视的查询中的相等谓词中使用：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">...</span><br><span class="line">  WHERE  CUST_EMAIL = 'Charlotte.Buckley@PINTAIL.EXAMPLE.COM'</span><br><span class="line">  AND    GENDER = 'F'</span><br><span class="line">  AND    ACCOUNT_MGR_ID = 149;</span><br></pre></td></tr></tbody></table></figure>

<p>所有这三列都出现在同一<code>WHERE</code>子句中，因此报告将它们显示为组过滤器。<code>FILTER</code>报表中的列集是列组的候选项。</p>
</li>
</ol>
<h3 id="KnowledgePoint-2" class="article-heading"><a href="#KnowledgePoint-2" class="headerlink" title="KnowledgePoint"></a>KnowledgePoint<a class="article-anchor" href="#KnowledgePoint-2" aria-hidden="true"></a></h3><p><strong>父主题：</strong>&nbsp;<a target="_blank" rel="noopener" href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/tgsql/managing-extended-statistics.html#GUID-858E0BDA-06C6-471F-B9E8-888C3AD29673">关于列组的统计信息</a></p>
<p>为特定工作负载检测有用的列组</p>
<p>您可以使用<code>DBMS_STATS.SEED_COL_USAGE</code>和<code>REPORT_COL_USAGE</code>根据指定的工作负荷来确定表需要哪些列组。</p>
<p>当您不知道要创建哪个扩展统计信息时，此技术很有用。此技术不适用于表达式统计。</p>
<h2 id="实践19-4-创建在工作负载监视期间检测到的列组" class="article-heading"><a href="#实践19-4-创建在工作负载监视期间检测到的列组" class="headerlink" title="实践19-4:创建在工作负载监视期间检测到的列组"></a>实践19-4:创建在工作负载监视期间检测到的列组<a class="article-anchor" href="#实践19-4-创建在工作负载监视期间检测到的列组" aria-hidden="true"></a></h2><h3 id="Overview-3" class="article-heading"><a href="#Overview-3" class="headerlink" title="Overview"></a>Overview<a class="article-anchor" href="#Overview-3" aria-hidden="true"></a></h3><p>本教程假定您已经进行中上一步的步骤。</p>
<h3 id="Task-3" class="article-heading"><a href="#Task-3" class="headerlink" title="Task"></a>Task<a class="article-anchor" href="#Task-3" aria-hidden="true"></a></h3><h3 id="Practice-3" class="article-heading"><a href="#Practice-3" class="headerlink" title="Practice"></a>Practice<a class="article-anchor" href="#Practice-3" aria-hidden="true"></a></h3><ol>
<li><p><code>customers_test</code>根据在监视窗口期间捕获的使用情况信息为表创建列组。</p>
<p>例如，<code>oe</code>用户运行以下查询：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">SELECT DBMS_STATS.CREATE_EXTENDED_STATS(user, 'customers_test') FROM DUAL;</span><br></pre></td></tr></tbody></table></figure>

<p>输出示例如下：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">###############################################################################</span><br><span class="line"></span><br><span class="line">EXTENSIONS FOR OE.CUSTOMERS_TEST</span><br><span class="line">................................</span><br><span class="line"></span><br><span class="line">1. (CUST_EMAIL, ACCOUNT_MGR_ID,</span><br><span class="line">    GENDER)			       : SYS_STU6#U3UU_Q98DVUTCYY6RGBXW created</span><br><span class="line">###############################################################################</span><br></pre></td></tr></tbody></table></figure>

<p>数据库创建了一个列组<code>customers_test</code>：一个列组用于过滤谓词。</p>
</li>
<li><p>收集表统计信息。</p>
<p>以用户<code>oe</code>身份，运行<code>GATHER_TABLE_STATS</code>以收集以下统计信息<code>customers_test</code>：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">EXEC DBMS_STATS.GATHER_TABLE_STATS(user,'customers_test');</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>以用户<code>oe</code>身份，运行工作负载中两个查询的解释计划。</p>
<p>检查<code>USER_TAB_COL_STATISTICS</code>视图以确定数据库创建了哪些其他统计信息：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">SELECT COLUMN_NAME, NUM_DISTINCT, HISTOGRAM</span><br><span class="line">FROM   USER_TAB_COL_STATISTICS</span><br><span class="line">WHERE  TABLE_NAME = 'CUSTOMERS_TEST'</span><br><span class="line">ORDER BY 1;</span><br></pre></td></tr></tbody></table></figure>

<p>部分样本输出如下所示：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">...</span><br><span class="line">CUST_EMAIL		      <span class="number">319</span> <span class="keyword">NONE</span></span><br><span class="line">GENDER				<span class="number">2</span> FREQUENCY</span><br><span class="line">SYS_STU6#U3UU_Q98DVUTCYY6RGBXW	      <span class="number">319</span> <span class="keyword">NONE</span></span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure>

<p>本示例显示了从<code>DBMS_STATS.CREATE_EXTENDED_STATS</code>函数返回的1个列组名称 <code>SYS_STU6#U3UU_Q98DVUTCYY6RGBXW</code></p>
</li>
<li><p>再次说明计划。</p>
<p>以下示例显示了<code>customers_test</code>表中两个查询的解释计划：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">conn oe/oe@emrep;</span><br><span class="line">EXPLAIN PLAN FOR</span><br><span class="line">  SELECT *</span><br><span class="line">  FROM   customers_test</span><br><span class="line">  WHERE  CUST_EMAIL = 'Charlotte.Buckley@PINTAIL.EXAMPLE.COM'</span><br><span class="line">  AND    GENDER = 'F'</span><br><span class="line">  AND    ACCOUNT_MGR_ID = 149;</span><br><span class="line"></span><br><span class="line">SELECT PLAN_TABLE_OUTPUT</span><br><span class="line">FROM   TABLE(DBMS_XPLAN.DISPLAY('plan_table', null,'basic rows'));</span><br><span class="line"></span><br><span class="line">EXPLAIN PLAN FOR</span><br><span class="line">  SELECT   ACCOUNT_MGR_ID, GENDER, count(*)</span><br><span class="line">  FROM     customers_test</span><br><span class="line">  GROUP BY ACCOUNT_MGR_ID, GENDER;</span><br><span class="line"></span><br><span class="line">SELECT PLAN_TABLE_OUTPUT</span><br><span class="line">FROM   TABLE(DBMS_XPLAN.DISPLAY('plan_table', null,'basic rows'));</span><br></pre></td></tr></tbody></table></figure>

<p>新计划显示了更准确的基数估计。</p>
</li>
</ol>
<h3 id="KnowledgePoint-3" class="article-heading"><a href="#KnowledgePoint-3" class="headerlink" title="KnowledgePoint"></a>KnowledgePoint<a class="article-anchor" href="#KnowledgePoint-3" aria-hidden="true"></a></h3><p>您可以使用该<code>DBMS_STATS.CREATE_EXTENDED_STATS</code>函数通过执行创建先前检测到的列组<code>DBMS_STATS.SEED_COL_USAGE</code>。</p>
<p>也可以看看：</p>
<p><a target="_blank" rel="noopener" href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tgsql&amp;id=ARPLS059">Oracle Database PL / SQL软件包和类型参考</a>以了解该<code>DBMS_STATS</code>软件包</p>
</body></html>
              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2025-10-22T08:48:04.168Z" itemprop="dateModified">Last updated: 2025-10-22</time>
                <a href="/database/mysql/index.html" class="article-footer-next" title="概览"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <div id="carbonads" class="carbonads" style="text-align:center;font-family:'Noto Sans SC',sans-serif;">
  <span class="carbon-wrap">
    <a href="https://github.com/booboowei"
       class="carbon-img"
       target="_blank"
       rel="noopener sponsored">
      <img
        src="https://avatars2.githubusercontent.com/u/21328020?s=460&u=88cf6127c32932188f936d05636b7b0d36783ee1&v=4"
        alt="ads via Carbon"
        border="0"
        style="width:80px;height:80px;border-radius:50%;max-width:130px;"
      />
    </a>
    <a href="/about/"
       class="carbon-text"
       target="_blank"
       rel="noopener sponsored"
       style="display:block;margin-top:4px;">
      欢迎光临
    </a>
  </span>

  <!-- 日期显示 -->
  <div id="today-date" style="margin-top:12px;background:#f5f5f5;border-radius:12px;padding:10px 0;">
    <div id="weekday" style="font-size:14px;color:#555;"></div>
    <div id="day" style="font-size:36px;font-weight:bold;color:#000;"></div>
    <div id="ym" style="font-size:14px;color:#555;"></div>
    <div id="lunar" style="font-size:13px;color:#888;margin-top:4px;"></div>
  </div>

<script>
(function(){
  const now = new Date();
  const weekdays = ["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];
  const year = now.getFullYear();
  const month = now.getMonth() + 1;
  const day = now.getDate();

  function toChineseNumber(num) {
    const map = {0:'〇',1:'一',2:'二',3:'三',4:'四',5:'五',6:'六',7:'七',8:'八',9:'九'};
    return String(num).split('').map(n=>map[n]).join('');
  }

  // 优先使用 Intl (现代浏览器支持农历/中国传统历)
  function getLunarByIntl(date) {
    try {
      // 获取农历的月（长格式，如 "九月" 或 "闰八月"），和日（数字）
      const monthFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { month: 'long' });
      const dayFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { day: 'numeric' });
      const lunarMonthText = monthFormatter.format(date); // 例如 "九月" 或 "闰八月"
      const lunarDayText = dayFormatter.format(date);     // 例如 "三十" 或 "初一"
      // 有的浏览器返回的 month 会包含 "闰" 字样，也可能返回汉字月份，需要适配
      return `农历${lunarMonthText}${lunarDayText}`;
    } catch (e) {
      return null; // 表示不支持 Intl 农历
    }
  }

  // 回退：简易本地农历算法（仅作兼容，适用于1900-2049范围）
  const lunarInfo = [0x04bd8,0x04ae0,0x0a570,0x054d5,0x0d260,0x0d950,0x16554,0x056a0,0x09ad0,0x055d2,
                     0x04ae0,0x0a5b6,0x0a4d0,0x0d250,0x1d255,0x0b540,0x0d6a0,0x0ada2,0x095b0,0x14977,
                     0x04970,0x0a4b0,0x0b4b5,0x06a50,0x06d40,0x1ab54,0x02b60,0x09570,0x052f2,0x04970,
                     0x06566,0x0d4a0,0x0ea50,0x06e95,0x05ad0,0x02b60,0x186e3,0x092e0,0x1c8d7,0x0c950,
                     0x0d4a0,0x1d8a6,0x0b550,0x056a0,0x1a5b4,0x025d0,0x092d0,0x0d2b2,0x0a950,0x0b557,
                     0x06ca0,0x0b550,0x15355,0x04da0,0x0a5b0,0x14573,0x052b0,0x0a9a8,0x0e950,0x06aa0,
                     0x0aea6,0x0ab50,0x04b60,0x0aae4,0x0a570,0x05260,0x0f263,0x0d950,0x05b57,0x056a0,
                     0x096d0,0x04dd5,0x04ad0,0x0a4d0,0x0d4d4,0x0d250,0x0d558,0x0b540,0x0b5a0,0x195a6,
                     0x095b0,0x049b0,0x0a974,0x0a4b0,0x0b27a,0x06a50,0x06d40,0x0af46,0x0ab60,0x09570,
                     0x04af5,0x04970,0x064b0,0x074a3,0x0ea50,0x06b58,0x05ac0,0x0ab60,0x096d5,0x092e0];

  function lYearDays(y){let i,sum=348;for(i=0x8000;i>0x8;i>>=1)sum+=(lunarInfo[y-1900]&i)?1:0;return sum+leapDays(y);}
  function leapDays(y){if(leapMonth(y))return(lunarInfo[y-1900]&0x10000)?30:29;else return 0;}
  function leapMonth(y){return lunarInfo[y-1900]&0xf;}
  function monthDays(y,m){return(lunarInfo[y-1900]&(0x10000>>m))?30:29;}

  function LunarFallback(objDate){
    let i, leap=0, temp=0;
    const baseDate = new Date(1900,0,31);
    let offset = Math.floor((objDate - baseDate) / 86400000);
    let year = 1900;
    // 年循环
    for (i = 1900; i < 2050 && offset > 0; i++) {
      temp = lYearDays(i);
      offset -= temp;
      year = i;
    }
    if (offset < 0) { offset += temp; year--; }
    leap = leapMonth(year);
    let isLeap = false;
    let month = 1;
    // 月循环
    for (i = 1; i <= 12 && offset > 0; i++) {
      if (leap > 0 && i === (leap + 1) && !isLeap) {
        // 进入闰月
        temp = leapDays(year);
        isLeap = true;
        i--; // stay on same month number but mark leap
      } else {
        temp = monthDays(year, i);
      }
      offset -= temp;
      if (isLeap && i === leap) { isLeap = false; }
      if (!isLeap) month++; // 非闰月时才推进月份计数
    }
    if (offset === 0 && leap > 0 && month === leap + 1) {
      // 特殊：当正好落在闰月第一天
      // month 保持，isLeap = true
    }
    if (offset < 0) { offset += temp; month--; }
    const day = offset + 1;
    // 修正 month 边界
    if (month <= 0) month = 1;
    return { year, month, day, isLeap: !!isLeap };
  }

  function getLunarDateStringFallback(y,m,d){
    const cDay=["","初一","初二","初三","初四","初五","初六","初七","初八","初九","初十",
                "十一","十二","十三","十四","十五","十六","十七","十八","十九","二十",
                "廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"];
    const cMon=["","正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","冬月","腊月"];
    const lunar = LunarFallback(new Date(y, m-1, d));
    return `农历${lunar.isLeap ? '闰' : ''}${cMon[lunar.month]}${cDay[lunar.day]}`;
  }

  // 先尝试 Intl 方法
  let lunarText = getLunarByIntl(now);
  if (!lunarText) {
    // 回退本地算法
    lunarText = getLunarDateStringFallback(year, month, day);
  }

  // 输出到页面（公历 + 农历）
  document.getElementById("weekday").textContent = weekdays[now.getDay()];
  document.getElementById("day").textContent = day;
  document.getElementById("ym").textContent = `${toChineseNumber(year)}年${toChineseNumber(month)}月`;
  document.getElementById("lunar").textContent = lunarText;
})();
</script>


              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B519-%E6%A6%82%E8%A7%88"><span class="toc-text">实践19:概览</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B519-1-%E4%BD%BF%E7%94%A8%E8%87%AA%E5%8A%A8SQL%E8%B0%83%E4%BC%98"><span class="toc-text">实践19-1:使用自动SQL调优</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Overview"><span class="toc-text">Overview</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Task"><span class="toc-text">Task</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Practice"><span class="toc-text">Practice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KnowledgePoint"><span class="toc-text">KnowledgePoint</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B519-2-%E6%94%B6%E9%9B%86%E6%89%A9%E5%B1%95%E7%9A%84%E7%BB%9F%E8%AE%A1%E4%BF%A1%E6%81%AF"><span class="toc-text">实践19-2:收集扩展的统计信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Overview-1"><span class="toc-text">Overview</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Task-1"><span class="toc-text">Task</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Practice-1"><span class="toc-text">Practice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KnowledgePoint-1"><span class="toc-text">KnowledgePoint</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B519-3-%E4%B8%BA%E7%89%B9%E5%AE%9A%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E6%A3%80%E6%B5%8B%E6%9C%89%E7%94%A8%E7%9A%84%E5%88%97%E7%BB%84"><span class="toc-text">实践19-3:为特定工作负载检测有用的列组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Overview-2"><span class="toc-text">Overview</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Task-2"><span class="toc-text">Task</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Practice-2"><span class="toc-text">Practice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KnowledgePoint-2"><span class="toc-text">KnowledgePoint</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B519-4-%E5%88%9B%E5%BB%BA%E5%9C%A8%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD%E7%9B%91%E8%A7%86%E6%9C%9F%E9%97%B4%E6%A3%80%E6%B5%8B%E5%88%B0%E7%9A%84%E5%88%97%E7%BB%84"><span class="toc-text">实践19-4:创建在工作负载监视期间检测到的列组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Overview-3"><span class="toc-text">Overview</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Task-3"><span class="toc-text">Task</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Practice-3"><span class="toc-text">Practice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KnowledgePoint-3"><span class="toc-text">KnowledgePoint</span></a></li></ol></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">MySQL</strong><a href="/database/mysql/index.html" class="sidebar-link">概览</a><a href="/database/mysql/booboo_mysql/index.html" class="sidebar-link">MySQL 基础</a><a href="/database/mysql/dba_mysql/index.html" class="sidebar-link">MySQL 运维实践</a><a href="/database/mysql/rds_mysql/index.html" class="sidebar-link">RDS 性能调优</a><a href="/database/mysql/security/index.html" class="sidebar-link">安全篇</a><a href="/database/mysql/awesome-tools/index.html" class="sidebar-link">工具篇</a><strong class="sidebar-title">Oracle</strong><a href="/database/oracle/index.html" class="sidebar-link">概览</a><a href="/database/oracle/ocp/index.html" class="sidebar-link">Oracle12C OCP</a><a href="/database/oracle/oracle-12c/index.html" class="sidebar-link">Oracle 12c 学习笔记</a><a href="/database/oracle/oracle-11g/index.html" class="sidebar-link">Oracle 11g 学习笔记</a><strong class="sidebar-title">NoSQL</strong><a href="/database/nosql/index.html" class="sidebar-link">概览</a><a href="/database/nosql/booboo_redis/index.html" class="sidebar-link">Redis 基础</a><a href="/database/nosql/dba_redis/index.html" class="sidebar-link">Redis 进阶</a><a href="/database/nosql/booboo_mongodb/index.html" class="sidebar-link">MongoDB 基础</a><a href="/database/nosql/hadoop/index.html" class="sidebar-link">Hadoop 基础</a><strong class="sidebar-title">TiDB</strong><a href="/database/tidb/index.html" class="sidebar-link">概览</a><a href="/database/tidb/00_tidb入门指南.html" class="sidebar-link">TiDB 入门指南</a><a href="/database/tidb/01_raft协议理解.html" class="sidebar-link">Raft协议理解</a><a href="/database/tidb/tidb_courses/index.html" class="sidebar-link">TiDB 21天课程</a>
  </div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2025 <a href="https://github.com/BoobooWei" target="_blank">魏亚萍</a><br>
      Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>.<br>
      备案号：沪ICP备2020026043号
    </div>
    <div id="footer-links">
      <a href="https://www.youtube.com/@amyreading2023" class="footer-link" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" 
            alt="YouTube"
            style="height:24px; margin-bottom:-6px;">
      </a>
      <a href="https://github.com/BoobooWei" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="../../../../../docs/" class="mobile-nav-link">Hexo</a><a href="../../../../../news/" class="mobile-nav-link">News</a><a href="../../../../../api/" class="mobile-nav-link">MySQL8.0</a><a href="../../../../../database/" class="mobile-nav-link">Database</a><a href="../../../../../linux/" class="mobile-nav-link">Linux</a><a href="../../../../../cloud/" class="mobile-nav-link">Cloud</a><a href="../../../../../singapore/" class="mobile-nav-link">Singapore</a><a href="../../../../../amy/" class="mobile-nav-link">AMY</a><a href="../../../../../about/" class="mobile-nav-link">About</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/BoobooWei" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">MySQL</strong><a href="/database/mysql/index.html" class="mobile-nav-link">概览</a><a href="/database/mysql/booboo_mysql/index.html" class="mobile-nav-link">MySQL 基础</a><a href="/database/mysql/dba_mysql/index.html" class="mobile-nav-link">MySQL 运维实践</a><a href="/database/mysql/rds_mysql/index.html" class="mobile-nav-link">RDS 性能调优</a><a href="/database/mysql/security/index.html" class="mobile-nav-link">安全篇</a><a href="/database/mysql/awesome-tools/index.html" class="mobile-nav-link">工具篇</a><strong class="mobile-nav-title">Oracle</strong><a href="/database/oracle/index.html" class="mobile-nav-link">概览</a><a href="/database/oracle/ocp/index.html" class="mobile-nav-link">Oracle12C OCP</a><a href="/database/oracle/oracle-12c/index.html" class="mobile-nav-link">Oracle 12c 学习笔记</a><a href="/database/oracle/oracle-11g/index.html" class="mobile-nav-link">Oracle 11g 学习笔记</a><strong class="mobile-nav-title">NoSQL</strong><a href="/database/nosql/index.html" class="mobile-nav-link">概览</a><a href="/database/nosql/booboo_redis/index.html" class="mobile-nav-link">Redis 基础</a><a href="/database/nosql/dba_redis/index.html" class="mobile-nav-link">Redis 进阶</a><a href="/database/nosql/booboo_mongodb/index.html" class="mobile-nav-link">MongoDB 基础</a><a href="/database/nosql/hadoop/index.html" class="mobile-nav-link">Hadoop 基础</a><strong class="mobile-nav-title">TiDB</strong><a href="/database/tidb/index.html" class="mobile-nav-link">概览</a><a href="/database/tidb/00_tidb入门指南.html" class="mobile-nav-link">TiDB 入门指南</a><a href="/database/tidb/01_raft协议理解.html" class="mobile-nav-link">Raft协议理解</a><a href="/database/tidb/tidb_courses/index.html" class="mobile-nav-link">TiDB 21天课程</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- Cookie -->
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<!-- build:js build/js/main.js -->

<script src="../../../../../js/lang_select.js"></script>


<script src="../../../../../js/mobile_nav.js"></script>

<!-- endbuild -->

<!-- Algolia -->
<!--   backup
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript">
docsearch({
  appId: '',
  apiKey: '',
  indexName: '',
  insights: true,
  container: '#docsearch',
  debug: false,
  searchParameters: {
    facetFilters: ['lang:en']
  }
});
</script>
-->

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
document.getElementById('search-input-wrap').classList.add('on');
docsearch({
    apiKey: '',
    indexName: '',
    inputSelector: '#search-input'
});
</script>
</body>
</html>