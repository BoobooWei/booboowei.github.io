<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>PLSQL-变量_流程控制_数据类型_复合变量 | BoobooWei</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="http://www.toberoot.com/database/oracle/oracle-11g/C-PLSQL-01-%E5%8F%98%E9%87%8F_%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6_%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B_%E5%A4%8D%E5%90%88%E5%8F%98%E9%87%8F">
  <!-- Alternate links -->
  
    
      
    
    <link rel="alternate" hreflang="x-default" href="http://www.toberoot.com/database/oracle/oracle-11g/C-PLSQL-01-%E5%8F%98%E9%87%8F_%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6_%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B_%E5%A4%8D%E5%90%88%E5%8F%98%E9%87%8F" />
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="../../../icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="../../../icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="../../../icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="../../../icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="../../../icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="../../../icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="../../../icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="../../../icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="../../../icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="../../../icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="../../../icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="../../../icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="../../../icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="../../../icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="../../../css/navy.css">

  <!-- endbuild -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-lato@0.0.75/index.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="../../../atom.xml" title="BoobooWei" type="application/atom+xml">
  <!-- Open Graph -->
  <meta name="description" content="2019.12.29 BoobooWei     PLSQL-变量 为什么要使用 pl&#x2F;sql 块的结构和声明变量 使用变量 变量的优点 设置变量的语法 变量的命名规则 变量的作用范围 %TYPE属性   流程控制 条件判断 IF条件判断 CASE条件判断   循环 Loop循环 While 循环 For循环     数据类型 scalar data types标量数据类型 SQL数据">
<meta property="og:type" content="website">
<meta property="og:title" content="PLSQL-变量_流程控制_数据类型_复合变量">
<meta property="og:url" content="http://www.toberoot.com/database/oracle/oracle-11g/C-PLSQL-01-%E5%8F%98%E9%87%8F_%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6_%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B_%E5%A4%8D%E5%90%88%E5%8F%98%E9%87%8F">
<meta property="og:site_name" content="BoobooWei">
<meta property="og:description" content="2019.12.29 BoobooWei     PLSQL-变量 为什么要使用 pl&#x2F;sql 块的结构和声明变量 使用变量 变量的优点 设置变量的语法 变量的命名规则 变量的作用范围 %TYPE属性   流程控制 条件判断 IF条件判断 CASE条件判断   循环 Loop循环 While 循环 For循环     数据类型 scalar data types标量数据类型 SQL数据">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://www.toberoot.com/icon/og-image-wide.png">
<meta property="article:published_time" content="2025-10-22T08:53:55.779Z">
<meta property="article:modified_time" content="2025-10-22T08:49:44.988Z">
<meta property="article:author" content="魏亚萍">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.toberoot.com/icon/twitter-summary.png">
<meta property="fb:admins" content="100000247608790">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48498357-3', 'auto');
  ga('send', 'pageview');
</script>

  <!-- Algolia -->
  <link rel="preconnect" href="https://-dsn.algolia.net" crossorigin />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
<meta name="generator" content="Hexo 8.0.0"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="../../../" id="logo">Hexo</a>
    </h1>
    <nav id="main-nav">
      <a href="../../../docs/" class="main-nav-link">Hexo</a><a href="../../../news/" class="main-nav-link">News</a><a href="../../../api/" class="main-nav-link">MySQL8.0</a><a href="../../../database/" class="main-nav-link">Database</a><a href="../../../linux/" class="main-nav-link">Linux</a><a href="../../../cloud/" class="main-nav-link">Cloud</a><a href="../../../singapore/" class="main-nav-link">Singapore</a><a href="../../../amy/" class="main-nav-link">AMY</a><a href="../../../about/" class="main-nav-link">About</a>
      <a target="_blank" rel="noopener" href="https://github.com/BoobooWei" class="main-nav-link"><i class="fa fa-github-alt"></i></a>

      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <div id="lang-select-wrap">
        <a href="/about/" class="main-nav-link"><label id="lang-select-label"><i class="fa fa-globe"></i><span>关于我</span></label></a>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">PLSQL-变量_流程控制_数据类型_复合变量</h1>
                <a target="_blank" rel="noopener" href="https://github.com/BoobooWei/site/edit/master/source/database/oracle/oracle-11g/C-PLSQL-01-变量_流程控制_数据类型_复合变量.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <html><head></head><body><blockquote>
<p>2019.12.29 BoobooWei</p>
</blockquote>
<!-- MDTOC maxdepth:6 firsth1:1 numbering:0 flatten:0 bullets:1 updateOnSave:1 -->

<ul>
<li><a href="#plsql-%E5%8F%98%E9%87%8F">PLSQL-变量</a><ul>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8-plsql">为什么要使用 pl/sql</a></li>
<li><a href="#%E5%9D%97%E7%9A%84%E7%BB%93%E6%9E%84%E5%92%8C%E5%A3%B0%E6%98%8E%E5%8F%98%E9%87%8F">块的结构和声明变量</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F">使用变量</a><ul>
<li><a href="#%E5%8F%98%E9%87%8F%E7%9A%84%E4%BC%98%E7%82%B9">变量的优点</a></li>
<li><a href="#%E8%AE%BE%E7%BD%AE%E5%8F%98%E9%87%8F%E7%9A%84%E8%AF%AD%E6%B3%95">设置变量的语法</a></li>
<li><a href="#%E5%8F%98%E9%87%8F%E7%9A%84%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99">变量的命名规则</a></li>
<li><a href="#%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%9C%E7%94%A8%E8%8C%83%E5%9B%B4">变量的作用范围</a></li>
<li><a href="#%25type%5E'"><code>%TYPE</code>属性</a></li>
</ul>
</li>
<li><a href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6">流程控制</a><ul>
<li><a href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD">条件判断</a><ul>
<li><a href="#if%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><code>IF</code>条件判断</a></li>
<li><a href="#case%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><code>CASE</code>条件判断</a></li>
</ul>
</li>
<li><a href="#%E5%BE%AA%E7%8E%AF">循环</a><ul>
<li><a href="#loop%E5%BE%AA%E7%8E%AF">Loop循环</a></li>
<li><a href="#while-%E5%BE%AA%E7%8E%AF">While 循环</a></li>
<li><a href="#for%E5%BE%AA%E7%8E%AF">For循环</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">数据类型</a><ul>
<li><a href="#scalar-data-types%E6%A0%87%E9%87%8F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">scalar data types标量数据类型</a><ul>
<li><a href="#sql%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">SQL数据类型</a></li>
<li><a href="#boolean"><code>BOOLEAN</code></a></li>
<li><a href="#binary_integer-%E5%92%8Cbinary_integer"><code>BINARY_INTEGER</code> 和<code>BINARY_INTEGER</code></a></li>
<li><a href="#ref-cursor"><code>REF CURSOR</code></a></li>
<li><a href="#declaring-and-defining-explicit-cursors">Declaring and Defining Explicit Cursors</a></li>
<li><a href="#user-defined-subtypes"><code>User-defined subtypes</code></a></li>
</ul>
</li>
<li><a href="#composite-data-types%E7%BB%84%E5%90%88%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">composite data types组合数据类型</a></li>
</ul>
</li>
<li><a href="#%E5%A4%8D%E5%90%88%E5%8F%98%E9%87%8F">复合变量</a><ul>
<li><a href="#plsql-records">PL/SQL RECORDs</a><ul>
<li><a href="#%E8%AE%B0%E5%BD%95%E5%8F%98%E9%87%8F%E5%A7%8B%E7%BB%88%E4%BB%A3%E8%A1%A8%E5%AE%8C%E6%95%B4%E8%A1%8C">记录变量始终代表完整行</a></li>
<li><a href="#%E8%AE%B0%E5%BD%95%E5%8F%AF%E4%BB%A5%E4%BB%A3%E8%A1%A8%E9%83%A8%E5%88%86%E8%A1%8C%E7%9A%84%E5%8F%98%E9%87%8F">记录可以代表部分行的变量</a></li>
<li><a href="#%EF%BC%85rowtype%E5%B1%9E%E6%80%A7%E5%92%8C%E8%99%9A%E6%8B%9F%E5%88%97">％ROWTYPE属性和虚拟列</a></li>
</ul>
</li>
<li><a href="#plsql-collections">PL/SQL Collections</a></li>
</ul>
</li>
<li><a href="#%E5%AE%9E%E8%B7%B5">实践</a><ul>
<li><a href="#%E5%AE%9E%E8%B7%B51-%E4%B9%A6%E5%86%99%E4%B8%80%E4%B8%AA%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E5%9D%97%EF%BC%8C%E8%BF%90%E8%A1%8C%E5%B9%B6%E6%9F%A5%E7%9C%8B%E7%BB%93%E6%9E%9C">实践1-书写一个最简单的块，运行并查看结果</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B52-%E5%9C%A8%E5%9D%97%E4%B8%AD%E6%93%8D%E4%BD%9C%E5%8F%98%E9%87%8F">实践2-在块中操作变量</a></li>
<li><a href="#%EF%BF%BD%EF%BF%BD3-(W-%EF%BF%BD%5C%EF%BF%BD%EF%BF%BD%06%EF%BF%BD%25type%5E'">实践3-在块中操作变量理解<code>%TYPE</code>属性</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B54-%E5%9C%A8%E5%9D%97%E4%B8%AD%E6%93%8D%E4%BD%9C%E8%A1%A8%E7%9A%84%E6%95%B0%E6%8D%AE">实践4-在块中操作表的数据</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B55-%E5%9C%A8%E5%9D%97%E4%B8%AD%E7%9A%84%E5%88%86%E6%94%AF%E6%93%8D%E4%BD%9Cif%E8%AF%AD%E5%8F%A5">实践5-在块中的分支操作<code>IF</code>语句</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B56-%E5%9C%A8%E5%9D%97%E4%B8%AD%E7%9A%84%E5%88%86%E6%94%AF%E6%93%8D%E4%BD%9Ccase%E8%AF%AD%E5%8F%A5">实践6-在块中的分支操作<code>CASE</code>语句</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B57-%E5%9C%A8%E5%9D%97%E4%B8%AD%E4%BD%BF%E7%94%A8%E4%B8%89%E7%A7%8D%E5%BE%AA%E7%8E%AFforwhileloop">实践7-在块中使用三种循环<code>for.while.loop</code></a></li>
<li><a href="#%E5%AE%9E%E8%B7%B58-%E5%9C%A8%E5%9D%97%E4%B8%AD%E8%87%AA%E5%AE%9A%E4%B9%89record%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%E5%92%8C%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E">实践8-在块中自定义RECORD类型定义和变量声明</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B59-%E5%9C%A8%E5%9D%97%E4%B8%AD%E8%87%AA%E5%AE%9A%E4%B9%89record%E5%AD%97%E6%AE%B5%E7%9A%84record%E7%B1%BB%E5%9E%8B%EF%BC%88%E5%B5%8C%E5%A5%97%E8%AE%B0%E5%BD%95nested-record%EF%BC%89">实践9-在块中自定义RECORD字段的RECORD类型（嵌套记录Nested Record）</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B510-%E5%9C%A8%E5%9D%97%E4%B8%AD%E8%87%AA%E5%AE%9A%E4%B9%89record%E5%AD%97%E6%AE%B5%E7%9A%84record%E7%B1%BB%E5%9E%8B%EF%BC%88%EF%BC%85rowtype%E5%B1%9E%E6%80%A7%EF%BC%89">实践10-在块中自定义RECORD字段的RECORD类型（％ROWTYPE属性）</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B511-%E5%9C%A8%E5%9D%97%E4%B8%AD%E8%87%AA%E5%AE%9A%E4%B9%89collections%E7%9A%84%E7%B1%BB%E5%9E%8B">实践11-在块中自定义COLLECTIONS的类型</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B512-%E4%BD%BF%E7%94%A8%E9%9B%86%E5%90%88%E7%9A%84%E5%B1%9E%E6%80%A7%E6%9D%A5%E6%93%8D%E4%BD%9C%E9%9B%86%E5%90%88%E7%9A%84%E6%95%B0%E6%8D%AE">实践12-使用集合的属性来操作集合的数据</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B513-%E6%88%90%E5%91%98%E4%B8%BA%E5%A4%8D%E5%90%88%E5%8F%98%E9%87%8F%EF%BC%8C%E6%AF%8F%E4%B8%AA%E4%B8%BB%E9%94%AE%E8%AE%BF%E9%97%AE%E4%B8%80%E8%A1%8C%E6%95%B0%E6%8D%AE">实践13-成员为复合变量，每个主键访问一行数据</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B514-%E5%9C%A8%E5%9D%97%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%B8%E6%A0%87">实践14-在块中使用自定义游标</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B515-%E5%9C%A8%E5%9D%97%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%B8%E6%A0%87%E5%92%8C%E6%B8%B8%E6%A0%87%E7%9A%84%E5%B1%9E%E6%80%A7">实践15–在块中使用自定义游标和游标的属性</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B516-%E5%9C%A8%E5%9D%97%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%B8%E6%A0%87%E5%92%8C%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6">实践16-在块中使用自定义游标和循环控制</a></li>
<li><a href="#%E5%AE%9E%E8%B7%B518-%E5%9C%A8%E5%9D%97%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%B8%E6%A0%87%E4%B9%8B%E5%B8%A6%E5%8F%98%E9%87%8F%E7%9A%84%E6%B8%B8%E6%A0%87">实践18-在块中使用自定义游标之带变量的游标</a></li>
</ul>
</li>
<li><a href="#%E8%AF%BE%E5%90%8E%E7%BB%83%E4%B9%A0">课后练习</a></li>
</ul>
</li>
</ul>
<!-- /MDTOC -->

<h2 id="为什么要使用-pl-sql" class="article-heading"><a href="#为什么要使用-pl-sql" class="headerlink" title="为什么要使用 pl/sql"></a>为什么要使用 pl/sql<a class="article-anchor" href="#为什么要使用-pl-sql" aria-hidden="true"></a></h2><p><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/toc.htm">Database PL/SQL Language Reference</a></p>
<ul>
<li>便于维护(模块化)</li>
<li>提高数据安全性和完整性(通过程序操作数据)</li>
<li>提高性能(编译好的)</li>
<li>简化代码(反复调用)</li>
</ul>
<h2 id="块的结构和声明变量" class="article-heading"><a href="#块的结构和声明变量" class="headerlink" title="块的结构和声明变量"></a>块的结构和声明变量<a class="article-anchor" href="#块的结构和声明变量" aria-hidden="true"></a></h2><ul>
<li>块：是 PL/SQL 的基石；程序都是通过块组成。</li>
<li>匿名块：没有名称的块叫匿名块，完成一定的功能。</li>
</ul>
<table>
<thead>
<tr>
<th align="left">模块的组成</th>
<th align="left">说明</th>
<th align="left">是否必要</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>DECLARE</code></td>
<td align="left">变量声明部分</td>
<td align="left">非</td>
</tr>
<tr>
<td align="left"><code>Begin</code></td>
<td align="left">逻辑处理执行部分的开始</td>
<td align="left">是</td>
</tr>
<tr>
<td align="left"><code>Exception</code></td>
<td align="left">错误处理部分</td>
<td align="left">非</td>
</tr>
<tr>
<td align="left"><code>End</code></td>
<td align="left">逻辑处理结束</td>
<td align="left">是</td>
</tr>
<tr>
<td align="left"><code>/</code></td>
<td align="left"><code>Begin</code> 语句的提交</td>
<td align="left">是</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">--是行注释</span><br><span class="line">/* */是多行注释</span><br><span class="line">declare</span><br><span class="line">  --私有变量声明</span><br><span class="line">begin</span><br><span class="line">  --代码主体</span><br><span class="line">exception</span><br><span class="line">  --异常处理</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<h2 id="使用变量" class="article-heading"><a href="#使用变量" class="headerlink" title="使用变量"></a>使用变量<a class="article-anchor" href="#使用变量" aria-hidden="true"></a></h2><h3 id="变量的优点" class="article-heading"><a href="#变量的优点" class="headerlink" title="变量的优点"></a>变量的优点<a class="article-anchor" href="#变量的优点" aria-hidden="true"></a></h3><ul>
<li>用来存储数据</li>
<li>操作存储的数据</li>
<li>可以重复应用</li>
<li>使维护工作简单</li>
</ul>
<h3 id="设置变量的语法" class="article-heading"><a href="#设置变量的语法" class="headerlink" title="设置变量的语法"></a>设置变量的语法<a class="article-anchor" href="#设置变量的语法" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">identifier [CONSTANT] datatype [NOT NULL] [:= | DEFAULT expr];</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><code>[ ]</code>内为可选项</li>
<li>每行定义一个变量</li>
<li>在 declare 部分声明</li>
<li>如果设置了<code>Not null</code> 一定要给初值</li>
<li><code>CONSTANT</code> 也一定要给值</li>
<li><code>:=</code> 为赋值，<code>=</code>为逻辑判断，判断是否相等。</li>
</ul>
<h3 id="变量的命名规则" class="article-heading"><a href="#变量的命名规则" class="headerlink" title="变量的命名规则"></a>变量的命名规则<a class="article-anchor" href="#变量的命名规则" aria-hidden="true"></a></h3><ul>
<li>在不同的模块中，变量可以重名</li>
<li>变量的名称不应该和模块中引用的列的名称相同</li>
<li>变量名称应该有一定的可读性</li>
</ul>
<h3 id="变量的作用范围" class="article-heading"><a href="#变量的作用范围" class="headerlink" title="变量的作用范围"></a>变量的作用范围<a class="article-anchor" href="#变量的作用范围" aria-hidden="true"></a></h3><ul>
<li>外部模块变量可以传到内部模块</li>
<li>内部模块的变量不会影响外部</li>
</ul>
<h3 id="TYPE属性" class="article-heading"><a href="#TYPE属性" class="headerlink" title="%TYPE属性"></a><code>%TYPE</code>属性<a class="article-anchor" href="#TYPE属性" aria-hidden="true"></a></h3><ul>
<li>声明一个变量和某列数据类型相同</li>
<li>声明一个变量和另外一个变量数据类型一致</li>
</ul>
<p>减小程序的无效的可能性，可以不知道列的数据类型，定义一个与之相同的变量。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">v_name emp.ename%TYPE;</span><br><span class="line">v_balance NUMBER(7,2);</span><br><span class="line">v_min_balance v_balance%TYPE := 10;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="流程控制" class="article-heading"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制<a class="article-anchor" href="#流程控制" aria-hidden="true"></a></h2><h3 id="条件判断" class="article-heading"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断<a class="article-anchor" href="#条件判断" aria-hidden="true"></a></h3><h4 id="IF条件判断" class="article-heading"><a href="#IF条件判断" class="headerlink" title="IF条件判断"></a><code>IF</code>条件判断<a class="article-anchor" href="#IF条件判断" aria-hidden="true"></a></h4><p>分支就是树的结构，条件就是分支的选择，我们只能走到一个支干上，即使每个条件都符合，我们也只能 操作一个支干的语句。</p>
<ul>
<li><code>IF</code>-<code>THEN</code>-<code>END IF</code></li>
<li><code>IF</code>-<code>THEN</code>-<code>ELSE</code>-<code>END IF </code></li>
<li><code>IF</code>-<code>THEN</code>-<code>ELSIF</code>-<code>END IF</code></li>
</ul>
<p>语法</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">IF condition</span><br><span class="line">THEN statements;</span><br><span class="line">[ELSIF condition THEN statements;]</span><br><span class="line">[ELSE</span><br><span class="line">statements;]</span><br><span class="line">END IF;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="CASE条件判断" class="article-heading"><a href="#CASE条件判断" class="headerlink" title="CASE条件判断"></a><code>CASE</code>条件判断<a class="article-anchor" href="#CASE条件判断" aria-hidden="true"></a></h4><p>语法</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">CASE v1</span><br><span class="line">WHEN 'A' THEN 'Excellent'</span><br><span class="line">WHEN 'B' THEN 'Very Good'</span><br><span class="line">WHEN 'C' THEN 'Good'</span><br><span class="line">ELSE 'No such grade'</span><br><span class="line">END;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="循环" class="article-heading"><a href="#循环" class="headerlink" title="循环"></a>循环<a class="article-anchor" href="#循环" aria-hidden="true"></a></h3><h4 id="Loop循环" class="article-heading"><a href="#Loop循环" class="headerlink" title="Loop循环"></a>Loop循环<a class="article-anchor" href="#Loop循环" aria-hidden="true"></a></h4><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">Declare</span><br><span class="line">v1 number(2) :=1;</span><br><span class="line">Begin</span><br><span class="line">Loop</span><br><span class="line">insert into t1 values (v1);</span><br><span class="line">v1:=v1+1;</span><br><span class="line">Exit When v1&gt;10 ;</span><br><span class="line">End loop;</span><br><span class="line">End; /</span><br></pre></td></tr></tbody></table></figure>

<p>建立实验表 t1，我们将想 t1 表中加入数据。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">drop table t1 purge;</span><br><span class="line">create table t1 (c1 number(2));</span><br><span class="line">select * from t1;</span><br></pre></td></tr></tbody></table></figure>

<p>Loop 循环必须含有退出的条件，而且该条件一定要每次循环都要变化，如果没有变化就是死循环，死循环的结果就是 cpu 总是 100%，你可以重新启动数据库来消除死循环。</p>
<h4 id="While-循环" class="article-heading"><a href="#While-循环" class="headerlink" title="While 循环"></a>While 循环<a class="article-anchor" href="#While-循环" aria-hidden="true"></a></h4><p>While 循环，先判定条件，每次循环时条件都要变化，如果不变化就是死循环。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">Declare</span><br><span class="line">V1 number(2) :=1;</span><br><span class="line">Begin</span><br><span class="line">While v1&lt;10 Loop</span><br><span class="line">Insert into t1 values(v1);</span><br><span class="line">v1:=v1+1;</span><br><span class="line">End loop;</span><br><span class="line">End;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<h4 id="For循环" class="article-heading"><a href="#For循环" class="headerlink" title="For循环"></a>For循环<a class="article-anchor" href="#For循环" aria-hidden="true"></a></h4><p>For循环，pl/sql中的最常见的循环，是和游标操作的绝配。方便而直观。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">begin</span><br><span class="line">for v1 in 1..9 loop</span><br><span class="line">Insert into t1 values(v1);</span><br><span class="line">end loop;</span><br><span class="line">end;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line">begin</span><br><span class="line">for v1 in REVERSE 1..9 loop</span><br><span class="line">Insert into t1 values(v1);</span><br><span class="line">end loop;</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<p>For 循环特点</p>
<ul>
<li>步长为 1</li>
<li>计数器不要声明，自动声明</li>
<li>对计数器只能引用。不能做赋值操作</li>
<li>计数器的数据类型和上下界的数据类型相同</li>
<li>计数器只能在循环体内引用</li>
</ul>
<h2 id="数据类型" class="article-heading"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型<a class="article-anchor" href="#数据类型" aria-hidden="true"></a></h2><p>每个PL / SQL常量，变量，参数和函数返回值都有一个 确定其存储格式以及其有效值和操作的<strong>数据类型</strong>。</p>
<ul>
<li><strong>scalar data types</strong> 标量数据类型</li>
<li><strong>composite data types</strong> 组合数据类型</li>
</ul>
<h3 id="scalar-data-types标量数据类型" class="article-heading"><a href="#scalar-data-types标量数据类型" class="headerlink" title="scalar data types标量数据类型"></a>scalar data types标量数据类型<a class="article-anchor" href="#scalar-data-types标量数据类型" aria-hidden="true"></a></h3><p>PL / SQL在包中预定义了许多类型和子类型，<code>STANDARD</code>并允许您定义自己的子类型。</p>
<table>
<thead>
<tr>
<th>PL / SQL标量数据类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>SQL数据类型</td>
<td><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#LNPLS311">SQL Data Types</a></td>
</tr>
<tr>
<td><code>BOOLEAN</code></td>
<td>布尔值</td>
</tr>
<tr>
<td><code>PLS_INTEGER</code></td>
<td>该<code>PLS_INTEGER</code>数据类型存储范围为-2147483648到2,147,483,647符号整数，在32位表示。<br><code>PLS_INTEGER</code>数据类型 与 <code>NUMBER</code>数据类型及<code>NUMBER</code> 子类型对比的优点：<br>1) PLS_INTEGER 值需要较少的存储空间。<br>2) PLS_INTEGER操作使用硬件算术，因此它们比NUMBER使用库算法的操作快。<br>为了提高效率，请PLS_INTEGER在其范围内的所有计算中使用值。</td>
</tr>
<tr>
<td><code>BINARY_INTEGER</code></td>
<td>PL / SQL数据类型 <code>PLS_INTEGER</code>并且<code>BINARY_INTEGER</code>是相同的</td>
</tr>
<tr>
<td><code>REF</code> <code>CURSOR</code></td>
<td>游标变量<a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/static.htm#i7106">“Cursor Variables”</a></td>
</tr>
<tr>
<td><code>User-defined subtypes</code></td>
<td>子类型可以：<br>- 提供与ANSI / ISO数据类型的兼容性<br>- 显示该类型数据项的预期用途<br>- 检测超出范围的值</td>
</tr>
</tbody></table>
<h4 id="SQL数据类型" class="article-heading"><a href="#SQL数据类型" class="headerlink" title="SQL数据类型"></a>SQL数据类型<a class="article-anchor" href="#SQL数据类型" aria-hidden="true"></a></h4><table>
<thead>
<tr>
<th align="left">Data Type</th>
<th align="left">Maximum Size in PL/SQL</th>
<th align="left">Maximum Size in SQL</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>CHAR</code><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#CHDIEDJI">Foot 1 </a></td>
<td align="left">32,767 bytes</td>
<td align="left">2,000 bytes</td>
</tr>
<tr>
<td align="left"><code>NCHAR</code><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#sthref236">Footref 1</a></td>
<td align="left">32,767 bytes</td>
<td align="left">2,000 bytes</td>
</tr>
<tr>
<td align="left"><code>RAW</code><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#sthref237">Footref 1</a></td>
<td align="left">32,767 bytes</td>
<td align="left">2,000 bytes</td>
</tr>
<tr>
<td align="left"><code>VARCHAR2</code><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#sthref238">Footref 1</a></td>
<td align="left">32,767 bytes</td>
<td align="left">4,000 bytes</td>
</tr>
<tr>
<td align="left"><code>NVARCHAR2</code><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#sthref239">Footref 1</a></td>
<td align="left">32,767 bytes</td>
<td align="left">4,000 bytes</td>
</tr>
<tr>
<td align="left"><code>LONG</code><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#CHDECHII">Foot 2 </a></td>
<td align="left">32,760 bytes</td>
<td align="left">2 gigabytes (GB) - 1</td>
</tr>
<tr>
<td align="left"><code>LONG</code> <code>RAW</code><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#sthref240">Footref 2</a></td>
<td align="left">32,760 bytes</td>
<td align="left">2 GB</td>
</tr>
<tr>
<td align="left"><code>BLOB</code></td>
<td align="left">128 terabytes (TB)</td>
<td align="left">(4 GB - 1) * <code>database_block_size</code></td>
</tr>
<tr>
<td align="left"><code>CLOB</code></td>
<td align="left">128 TB</td>
<td align="left">(4 GB - 1) * <code>database_block_size</code></td>
</tr>
<tr>
<td align="left"><code>NCLOB</code></td>
<td align="left">128 TB</td>
<td align="left">(4 GB - 1) * <code>database_block_size</code></td>
</tr>
</tbody></table>
<h4 id="BOOLEAN" class="article-heading"><a href="#BOOLEAN" class="headerlink" title="BOOLEAN"></a><code>BOOLEAN</code><a class="article-anchor" href="#BOOLEAN" aria-hidden="true"></a></h4><p>TRUE or FALSE</p>
<h4 id="BINARY-INTEGER-和BINARY-INTEGER" class="article-heading"><a href="#BINARY-INTEGER-和BINARY-INTEGER" class="headerlink" title="BINARY_INTEGER 和BINARY_INTEGER"></a><code>BINARY_INTEGER</code> 和<code>BINARY_INTEGER</code><a class="article-anchor" href="#BINARY-INTEGER-和BINARY-INTEGER" aria-hidden="true"></a></h4><p>PL / SQL数据类型 <code>PLS_INTEGER</code>并且<code>BINARY_INTEGER</code>是相同的。为简单起见，本文档使用<code>PLS_INTEGER</code>表示<code>PLS_INTEGER</code>和<code>BINARY_INTEGER</code>。</p>
<p>该<code>PLS_INTEGER</code>数据类型存储范围为-2147483648到2,147,483,647符号整数，在32位表示。</p>
<p>该<code>PLS_INTEGER</code>数据类型有这些优点在<code>NUMBER</code>数据类型及<code>NUMBER</code>亚型：</p>
<ul>
<li><code>PLS_INTEGER</code> 值需要较少的存储空间。</li>
<li><code>PLS_INTEGER</code>操作使用硬件算术，因此它们比<code>NUMBER</code>使用库算法的操作快。</li>
</ul>
<p>为了提高效率，请<code>PLS_INTEGER</code>在其范围内的所有计算中使用值。</p>
<p>话题</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#CHDHGIGI">防止PLS_INTEGER溢出</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#CHDIBECH">预定义的PLS_INTEGER子类型</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#CIHGBFGB">PLS_INTEGER的SIMPLE_INTEGER子类型</a></li>
</ul>
<h4 id="REF-CURSOR" class="article-heading"><a href="#REF-CURSOR" class="headerlink" title="REF CURSOR"></a><code>REF CURSOR</code><a class="article-anchor" href="#REF-CURSOR" aria-hidden="true"></a></h4><p>游标变量<a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/static.htm#i7106">Cursor Variables</a></p>
<h4 id="Declaring-and-Defining-Explicit-Cursors" class="article-heading"><a href="#Declaring-and-Defining-Explicit-Cursors" class="headerlink" title="Declaring and Defining Explicit Cursors"></a>Declaring and Defining Explicit Cursors<a class="article-anchor" href="#Declaring-and-Defining-Explicit-Cursors" aria-hidden="true"></a></h4><p>You can either declare an explicit cursor first and then define it later in the same block, subprogram, or package, or declare and define it at the same time.</p>
<p>An explicit cursor declaration, which only declares a cursor, has this syntax:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">CURSOR cursor_name [ parameter_list ] RETURN return_type;</span><br></pre></td></tr></tbody></table></figure>

<p>An explicit cursor definition has this syntax:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">CURSOR cursor_name [ parameter_list ] [ RETURN return_type ]</span><br><span class="line">  IS select_statement;</span><br></pre></td></tr></tbody></table></figure>

<p>If you declared the cursor earlier, then the explicit cursor definition defines it; otherwise, it both declares and defines it.</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">  CURSOR c1 RETURN departments%ROWTYPE;    -- Declare c1</span><br><span class="line"></span><br><span class="line">  CURSOR c2 IS                             -- Declare and define c2</span><br><span class="line">    SELECT employee_id, job_id, salary FROM employees</span><br><span class="line">    WHERE salary &gt; 2000;</span><br><span class="line"></span><br><span class="line">  CURSOR c1 RETURN departments%ROWTYPE IS  -- Define c1,</span><br><span class="line">    SELECT * FROM departments              -- repeating return type</span><br><span class="line">    WHERE department_id = 110;</span><br><span class="line"></span><br><span class="line">  CURSOR c3 RETURN locations%ROWTYPE;      -- Declare c3</span><br><span class="line"></span><br><span class="line">  CURSOR c3 IS                             -- Define c3,</span><br><span class="line">    SELECT * FROM locations                -- omitting return type</span><br><span class="line">    WHERE country_id = 'JP';</span><br><span class="line">BEGIN</span><br><span class="line">  NULL;</span><br><span class="line">END;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<h4 id="User-defined-subtypes" class="article-heading"><a href="#User-defined-subtypes" class="headerlink" title="User-defined subtypes"></a><code>User-defined subtypes</code><a class="article-anchor" href="#User-defined-subtypes" aria-hidden="true"></a></h4><p>子类型可以：</p>
<ul>
<li>提供与ANSI / ISO数据类型的兼容性</li>
<li>显示该类型数据项的预期用途</li>
<li>检测超出范围的值</li>
</ul>
<p>话题</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#CHDEDEIG">无约束子类型</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#CHDBBCIE">约束子类型</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/datatypes.htm#CHDEEDIH">相同数据类型族中具有基本类型的子类型</a></li>
</ul>
<h3 id="composite-data-types组合数据类型" class="article-heading"><a href="#composite-data-types组合数据类型" class="headerlink" title="composite data types组合数据类型"></a>composite data types组合数据类型<a class="article-anchor" href="#composite-data-types组合数据类型" aria-hidden="true"></a></h3><p>一种 <strong>复合数据类型</strong> 存储具有内部组件的值。您可以将整个复合变量作为参数传递给子程序，并且可以访问以下组件的内部组件：分别组合变量。内部组件可以是标量或复合的。您可以在任何可以使用标量变量的地方使用标量组件。PL / SQL使您可以定义两种复合数据类型，即收集和记录。您可以在可以使用相同类型的复合变量的任何地方使用复合组件。</p>
<p>注意：</p>
<p>如果您将复合变量作为参数传递给 远程子程序，则必须创建一个冗余的loop-back <code>DATABASE</code> <code>LINK</code>，以便在编译远程子程序时，验证源的类型检查器使用与调用方相同的用户定义复合变量类型定义。有关该<code>CREATE</code> <code>DATABASE</code> <code>LINK</code>语句的信息，请参见《<a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/server.112/e41084/statements_5005.htm#SQLRF01205"><em>Oracle数据库SQL语言参考》</em></a>。</p>
<ul>
<li><p>在一个 <strong>collection</strong> ，内部组件始终具有相同的数据类型，并且被称为<strong>元素</strong>。您可以通过其唯一性来访问集合变量的每个元素索引，使用以下语法：<code>variable_name``(``index``)</code>。要创建集合变量，您可以定义一个集合类型，然后创建该类型的变量或使用<code>%TYPE</code>。</p>
</li>
<li><p>在一个 <strong>record</strong> ，内部组件可以具有不同的数据类型，并且被称为<code>Field</code>。您可以使用以下语法按其名称访问记录变量的每个字段：<code>variable_name.field_name</code>。要创建记录变量，您可以定义一个<code>RECORD</code>类型，然后创建该类型的变量，或者使用<code>%ROWTYPE</code>或<code>%TYPE</code>。</p>
</li>
</ul>
<p>您可以创建记录的集合以及包含集合的记录。</p>
<p>收藏主题</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CHDBHJEI">集合类型</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CHDEIDIC">关联数组</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CHDEIJHD">Varrays（可变大小数组）</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CHDHIGFH">嵌套表</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#i20453">集合构造器</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#i20985">将值分配给集合变量</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#i33997">多维集合</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#i36377">集合比较</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#i27396">收集方法</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CJAJEIBA">包装规格中定义的收集类型</a></li>
</ul>
<h2 id="复合变量" class="article-heading"><a href="#复合变量" class="headerlink" title="复合变量"></a>复合变量<a class="article-anchor" href="#复合变量" aria-hidden="true"></a></h2><p>Oracle 数据库中有两个引擎,<code>SQL 引擎</code>和 <code>PL\SQL 引擎</code>,我们在 pl/sql 的模块中调用了 sql 语句,数据库就要 在两个引擎中来回的切换，如果我们使用循环来处理SQL语句的话,就会造成频繁的在两个引擎中进行切换.。</p>
<p>为了避免这样的情况发生，我们最好是将要传递的值放入到复合变量中，一次传递更多的数据，这个技术叫 做<strong>批量绑定</strong>。</p>
<p><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#LNPLS005">PL/SQL Collections and Records</a></p>
<h3 id="PL-SQL-RECORDs" class="article-heading"><a href="#PL-SQL-RECORDs" class="headerlink" title="PL/SQL RECORDs"></a>PL/SQL RECORDs<a class="article-anchor" href="#PL-SQL-RECORDs" aria-hidden="true"></a></h3><p>在一个 <strong>record</strong>，内部组件可以具有不同的数据类型，并且被称为<strong>域Field</strong>。您可以使用以下语法按其名称访问记录变量的每个字段：<code>variable_name.field_name</code>。要创建记录变量，您可以定义一个<code>RECORD</code>类型，然后创建该类型的变量，或者使用<code>%ROWTYPE</code>或<code>%TYPE</code>。</p>
<p><code>%ROWTYPE</code> 属性可让您声明一个记录变量 表示数据库表或视图的全部或部分行。对于完整或部分行的每一列，记录都有一个具有相同名称和数据类型的字段。如果行的结构发生变化，那么记录的结构也会发生变化。</p>
<p>记录字段不继承相应列的约束或初始值（请参见<a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#BEIBGEFH">示例5-39</a>）。</p>
<p>话题</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CIHBIDGC">记录变量始终代表完整行</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CIHHHGAE">记录可以代表部分行的变量</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#BABGAHFI">％ROWTYPE属性和虚拟列</a></li>
</ul>
<h4 id="记录变量始终代表完整行" class="article-heading"><a href="#记录变量始终代表完整行" class="headerlink" title="记录变量始终代表完整行"></a>记录变量始终代表完整行<a class="article-anchor" href="#记录变量始终代表完整行" aria-hidden="true"></a></h4><p>要声明一个始终代表数据库表或视图的完整行的记录变量，请使用以下语法：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">variable_name  table_or_view_name％ROWTYPE;</span><br></pre></td></tr></tbody></table></figure>

<p>对于表或视图的每一列，记录都有一个具有相同名称和数据类型的字段</p>
<h4 id="记录可以代表部分行的变量" class="article-heading"><a href="#记录可以代表部分行的变量" class="headerlink" title="记录可以代表部分行的变量"></a>记录可以代表部分行的变量<a class="article-anchor" href="#记录可以代表部分行的变量" aria-hidden="true"></a></h4><p>要声明一个可以代表数据库表或视图的部分行的记录变量，请使用以下语法：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">variable_name cursor%ROWTYPE;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="％ROWTYPE属性和虚拟列" class="article-heading"><a href="#％ROWTYPE属性和虚拟列" class="headerlink" title="％ROWTYPE属性和虚拟列"></a>％ROWTYPE属性和虚拟列<a class="article-anchor" href="#％ROWTYPE属性和虚拟列" aria-hidden="true"></a></h4><p>如果您使用 <code>%ROWTYPE</code> 属性以定义一个记录变量，该记录变量表示具有 虚拟列，则无法将该记录插入表中。相反，您必须将各个记录字段插入到表中，但不包括虚拟列。</p>
<p><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#BABEHIII">例5-42</a>创建了一个记录变量，该变量代表具有虚拟列的表的完整行，填充该记录，并将该记录插入到表中，从而导致ORA-54013。</p>
<ul>
<li><p>前缀为表的名称</p>
</li>
<li><p>内部域的属性为表中列的数据类型</p>
</li>
<li><p>域的名称为列的名称</p>
</li>
<li><p>便于存储表的一行</p>
</li>
</ul>
<h3 id="PL-SQL-Collections" class="article-heading"><a href="#PL-SQL-Collections" class="headerlink" title="PL/SQL Collections"></a>PL/SQL Collections<a class="article-anchor" href="#PL-SQL-Collections" aria-hidden="true"></a></h3><p>在一个 <strong>collection</strong>，内部组件始终具有相同的数据类型，并且被称为<strong>元素</strong>。您可以通过其唯一性来访问集合变量的每个元素索引，使用以下语法：<code>variable_name(index)</code>。要创建集合变量，您可以定义一个集合类型，然后创建该类型的变量或使用<code>%TYPE</code>。</p>
<p>表面上看象数组，但不是，它更象一个带有主键的表，我们通过主键来访问数据。 含有两要素:</p>
<ul>
<li>主键，数据类型为 BINARY_INTEGER</li>
<li>成员，可以为简单变量，也可以为记录复合变量</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">TYPE type_name IS TABLE OF</span><br><span class="line">{column_type | variable%TYPE</span><br><span class="line">| table.column%TYPE} [NOT NULL]</span><br><span class="line">| table.%ROWTYPE</span><br><span class="line">[INDEX BY BINARY_INTEGER];</span><br><span class="line">identifier type_name;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="实践" class="article-heading"><a href="#实践" class="headerlink" title="实践"></a>实践<a class="article-anchor" href="#实践" aria-hidden="true"></a></h2><h3 id="实践1-书写一个最简单的块，运行并查看结果" class="article-heading"><a href="#实践1-书写一个最简单的块，运行并查看结果" class="headerlink" title="实践1-书写一个最简单的块，运行并查看结果"></a>实践1-书写一个最简单的块，运行并查看结果<a class="article-anchor" href="#实践1-书写一个最简单的块，运行并查看结果" aria-hidden="true"></a></h3><blockquote>
<p>先设定 SQLPLUS 的环境变量，如果不指定默认值为不输出，设定后用 <code>show</code> 来验证。</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">set serveroutput on</span><br><span class="line">show serveroutput</span><br></pre></td></tr></tbody></table></figure>

<p>该实验的目的是掌握简单的 pl/sql 语法，执行一个最简单的匿名块。</p>
<p>书写一个最简单的块，将字符串输出到屏幕。使用的是 <code>sqlplus</code> 输出 <code>Hello world</code>。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">begin</span><br><span class="line">dbms_output.put_line('-----------------Begin------------------');</span><br><span class="line">dbms_output.put_line('hello world');</span><br><span class="line">dbms_output.put_line('-----------------End------------------');</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<p>每句话以分号结束，最后加上 <code>/</code>。</p>
<h3 id="实践2-在块中操作变量" class="article-heading"><a href="#实践2-在块中操作变量" class="headerlink" title="实践2-在块中操作变量"></a>实践2-在块中操作变量<a class="article-anchor" href="#实践2-在块中操作变量" aria-hidden="true"></a></h3><p>该实验的目的是掌握在 pl/sql 块中操作变量。</p>
<p>说出一下变量定义的含义。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">v_hiredate DATE;</span><br><span class="line">v_deptno NUMBER(2) NOT NULL := 10;</span><br><span class="line">v_location VARCHAR2(13) := 'Atlanta';</span><br><span class="line">c_comm CONSTANT NUMBER := 1400;</span><br><span class="line">v_valid BOOLEAN NOT NULL := TRUE;</span><br><span class="line">begin</span><br><span class="line">dbms_output.put_line('-----------------Begin------------------');</span><br><span class="line">dbms_output.put_line('v_hiredate:' || v_hiredate );</span><br><span class="line">dbms_output.put_line('v_deptno' || v_deptno);</span><br><span class="line">dbms_output.put_line('v_location' || v_location);</span><br><span class="line">dbms_output.put_line('c_comm:' || c_comm );</span><br><span class="line">dbms_output.put_line('-----------------End------------------');</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<h3 id="实践3-在块中操作变量理解-TYPE属性" class="article-heading"><a href="#实践3-在块中操作变量理解-TYPE属性" class="headerlink" title="实践3-在块中操作变量理解%TYPE属性"></a>实践3-在块中操作变量理解<code>%TYPE</code>属性<a class="article-anchor" href="#实践3-在块中操作变量理解-TYPE属性" aria-hidden="true"></a></h3><p>该实验的目的是掌握参数定义时的<code>%TYPE</code>属性。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">v_sal NUMBER (9,2);</span><br><span class="line">g_monthly_sal v_sal%TYPE := 10;</span><br><span class="line">BEGIN</span><br><span class="line">/* Compute the annual salary based on the</span><br><span class="line">monthly salary input from the user */</span><br><span class="line">v_sal := g_monthly_sal * 12;</span><br><span class="line">dbms_output.put_line(v_sal);</span><br><span class="line">END; -- This is the end of the block</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<h3 id="实践4-在块中操作表的数据" class="article-heading"><a href="#实践4-在块中操作表的数据" class="headerlink" title="实践4-在块中操作表的数据"></a>实践4-在块中操作表的数据<a class="article-anchor" href="#实践4-在块中操作表的数据" aria-hidden="true"></a></h3><p>该实验的目的是掌握在 pl/sql 块中操作数据库中的表，通过<code>select..into..</code>将表中的数据放入到变量。</p>
<ol>
<li>取表中的数据</li>
</ol>
<ul>
<li>一定要有 into</li>
<li>一次只能操作一行，</li>
<li>操作多行得用循环</li>
<li>变量类型和个数要匹配</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">declare</span><br><span class="line">v1 emp.ename%type;</span><br><span class="line">v2 emp.sal%type;</span><br><span class="line">begin</span><br><span class="line">select ename,sal into v1,v2 from emp where empno=7900;</span><br><span class="line">dbms_output.put_line(v1);</span><br><span class="line">dbms_output.put_line(v2);</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>删除表中的数据并打印删除的行数</li>
</ol>
<p>DML 语句和 SQL 相同，使用隐式游标的属性来控制 DML，有四种隐式的游标：</p>
<ul>
<li><code>SQL%ROWCOUNT</code></li>
<li><code>SQL%FOUND</code></li>
<li><code>SQL%NOTFOUND</code></li>
<li><code>SQL%ISOPEN</code></li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">declare</span><br><span class="line">v1 emp.deptno%type :=20;</span><br><span class="line">v2 number;</span><br><span class="line">begin</span><br><span class="line">delete emp where deptno=v1;</span><br><span class="line">v2:=sql%rowcount;</span><br><span class="line">dbms_output.put_line('delete rows :');</span><br><span class="line">dbms_output.put_line(v2);</span><br><span class="line">rollback;</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<p>执行结果</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">SCOTT@testdb&gt;select * from emp where deptno=20;</span><br><span class="line"></span><br><span class="line">     EMPNO ENAME      JOB	       MGR HIREDATE	    SAL       COMM     DEPTNO</span><br><span class="line">---------- ---------- --------- ---------- --------- ---------- ---------- ----------</span><br><span class="line">      7369 SMITH      CLERK	      7902 17-DEC-80	    800 		   20</span><br><span class="line">      7566 JONES      MANAGER	      7839 02-APR-81	   2975 		   20</span><br><span class="line">      7788 SCOTT      ANALYST	      7566 19-APR-87	   3000 		   20</span><br><span class="line">      7876 ADAMS      CLERK	      7788 23-MAY-87	   1100 		   20</span><br><span class="line">      7902 FORD       ANALYST	      7566 03-DEC-81	   3000 		   20</span><br><span class="line"></span><br><span class="line">declare</span><br><span class="line">v1 emp.deptno%type :=20;</span><br><span class="line">v2 number;</span><br><span class="line">begin</span><br><span class="line">  5  delete emp where deptno=v1;</span><br><span class="line">v2:=sql%rowcount;</span><br><span class="line">dbms_output.put_line('delete rows :');</span><br><span class="line">dbms_output.put_line(v2);</span><br><span class="line">rollback;</span><br><span class="line">end;</span><br><span class="line"> 11  /</span><br><span class="line">delete rows :</span><br><span class="line">5</span><br><span class="line"></span><br><span class="line">PL/SQL procedure successfully completed.</span><br></pre></td></tr></tbody></table></figure>

<h3 id="实践5-在块中的分支操作IF语句" class="article-heading"><a href="#实践5-在块中的分支操作IF语句" class="headerlink" title="实践5-在块中的分支操作IF语句"></a>实践5-在块中的分支操作<code>IF</code>语句<a class="article-anchor" href="#实践5-在块中的分支操作IF语句" aria-hidden="true"></a></h3><p>该实验的目的是掌握在 pl/sql 块中使用 if 语句进行分支操作。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">v1 DATE := to_date('12-11-1990','mm-dd-yyyy');</span><br><span class="line">v2 BOOLEAN;</span><br><span class="line">BEGIN</span><br><span class="line">IF MONTHS_BETWEEN(SYSDATE,v1) &gt; 5 THEN</span><br><span class="line">v2 := TRUE;</span><br><span class="line">dbms_output.put_line('True');</span><br><span class="line">ELSE</span><br><span class="line">v2 := FALSE;</span><br><span class="line">dbms_output.put_line('False');</span><br><span class="line">END IF;</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<p>结果</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">True</span><br><span class="line"></span><br><span class="line">PL/SQL procedure successfully completed.</span><br></pre></td></tr></tbody></table></figure>

<h3 id="实践6-在块中的分支操作CASE语句" class="article-heading"><a href="#实践6-在块中的分支操作CASE语句" class="headerlink" title="实践6-在块中的分支操作CASE语句"></a>实践6-在块中的分支操作<code>CASE</code>语句<a class="article-anchor" href="#实践6-在块中的分支操作CASE语句" aria-hidden="true"></a></h3><p>该实验的目的是掌握在 pl/sql 块中使用 <code>CASE</code> 语句进行分支操作。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">v1 CHAR(1) := UPPER('&amp;v1');</span><br><span class="line">v2 VARCHAR2(20);</span><br><span class="line">BEGIN</span><br><span class="line">v2 :=CASE v1</span><br><span class="line">WHEN 'A' THEN 'Excellent'</span><br><span class="line">WHEN 'B' THEN 'Very Good'</span><br><span class="line">WHEN 'C' THEN 'Good'</span><br><span class="line">ELSE 'No such grade'</span><br><span class="line">END;</span><br><span class="line">DBMS_OUTPUT.PUT_LINE (v1 || ' is  ' || v2); END;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<p>Null 的逻辑运算真值表</p>
<ul>
<li><code>True and null</code> 结果为 <code>null</code></li>
<li><code>Flase and null</code> 结果为<code> flase</code></li>
</ul>
<h3 id="实践7-在块中使用三种循环for-while-loop" class="article-heading"><a href="#实践7-在块中使用三种循环for-while-loop" class="headerlink" title="实践7-在块中使用三种循环for.while.loop"></a>实践7-在块中使用三种循环<code>for.while.loop</code><a class="article-anchor" href="#实践7-在块中使用三种循环for-while-loop" aria-hidden="true"></a></h3><p>该实验的目的是掌握 pl/sql 块中使用 三种 循环的语法。</p>
<p>打印乘法口诀。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">-- for</span><br><span class="line">declare</span><br><span class="line">s varchar2(2000) := '';</span><br><span class="line">begin</span><br><span class="line">for i in 1..9 loop</span><br><span class="line">  s := '';</span><br><span class="line">	for j in 1..i loop</span><br><span class="line">			s := s || j || ' * ' || i || ' = ' || i*j || '    ';</span><br><span class="line">	end loop;</span><br><span class="line">	dbms_output.put_line(s);</span><br><span class="line">end loop;</span><br><span class="line">end;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line">-- while</span><br><span class="line">declare</span><br><span class="line">s varchar2(2000) := '';</span><br><span class="line">i number :=1;</span><br><span class="line">j number :=1;</span><br><span class="line">begin</span><br><span class="line">while i &lt;= 9 loop</span><br><span class="line">  s := '';</span><br><span class="line">	j := 1;</span><br><span class="line">	while j &lt;= i loop</span><br><span class="line">			s := s || j || ' * ' || i || ' = ' || i*j || '    ';</span><br><span class="line">			j := j + 1;</span><br><span class="line">	end loop;</span><br><span class="line">	dbms_output.put_line(s);</span><br><span class="line">	i := i + 1;</span><br><span class="line">end loop;</span><br><span class="line">end;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line">-- loop</span><br><span class="line">declare</span><br><span class="line">s varchar2(2000) := '';</span><br><span class="line">i number :=1;</span><br><span class="line">j number :=1;</span><br><span class="line">begin</span><br><span class="line">loop</span><br><span class="line">  s := '';</span><br><span class="line">	j := 1;</span><br><span class="line">	loop</span><br><span class="line">			s := s || j || ' * ' || i || ' = ' || i*j || '    ';</span><br><span class="line">			j := j + 1;</span><br><span class="line">  exit when j &gt; i;</span><br><span class="line">	end loop;</span><br><span class="line">	dbms_output.put_line(s);</span><br><span class="line">	i := i + 1;</span><br><span class="line">exit when i &gt; 9;</span><br><span class="line">end loop;</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">1 * 1 = 1</span><br><span class="line">1 * 2 = 2    2 * 2 = 4</span><br><span class="line">1 * 3 = 3    2 * 3 = 6    3 * 3 = 9</span><br><span class="line">1 * 4 = 4    2 * 4 = 8    3 * 4 = 12    4 * 4 = 16</span><br><span class="line">1 * 5 = 5    2 * 5 = 10    3 * 5 = 15    4 * 5 = 20    5 * 5 = 25</span><br><span class="line">1 * 6 = 6    2 * 6 = 12    3 * 6 = 18    4 * 6 = 24    5 * 6 = 30    6 * 6 = 36</span><br><span class="line">1 * 7 = 7    2 * 7 = 14    3 * 7 = 21    4 * 7 = 28    5 * 7 = 35    6 * 7 = 42    7 * 7 = 49</span><br><span class="line">1 * 8 = 8    2 * 8 = 16    3 * 8 = 24    4 * 8 = 32    5 * 8 = 40    6 * 8 = 48    7 * 8 = 56    8 * 8 = 64</span><br><span class="line">1 * 9 = 9    2 * 9 = 18    3 * 9 = 27    4 * 9 = 36    5 * 9 = 45    6 * 9 = 54    7 * 9 = 63    8 * 9 = 72    9 * 9 = 81</span><br></pre></td></tr></tbody></table></figure>

<p>三种循环，个人最喜欢for。^.^</p>
<h3 id="实践8-在块中自定义RECORD类型定义和变量声明" class="article-heading"><a href="#实践8-在块中自定义RECORD类型定义和变量声明" class="headerlink" title="实践8-在块中自定义RECORD类型定义和变量声明"></a>实践8-在块中自定义RECORD类型定义和变量声明<a class="article-anchor" href="#实践8-在块中自定义RECORD类型定义和变量声明" aria-hidden="true"></a></h3><p>自定义数据类型</p>
<ul>
<li>定义新的数据类型<code>DeptRecTyp</code></li>
<li>声明变量 <code>dept_rec</code>的数据类型为 <code>DeptRecTyp</code></li>
<li>声明变量 <code>dept_rec_2</code> 的数据类型与 <code>dept_rec</code>的类型相同</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">  TYPE DeptRecTyp IS RECORD (</span><br><span class="line">    dept_id    NUMBER(4) NOT NULL := 10,</span><br><span class="line">    dept_name  VARCHAR2(30) NOT NULL := 'Administration',</span><br><span class="line">    mgr_id     NUMBER(6) := 200,</span><br><span class="line">    loc_id     NUMBER(4)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  dept_rec DeptRecTyp;</span><br><span class="line">  dept_rec_2 dept_rec%TYPE;</span><br><span class="line">BEGIN</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('dept_rec:');</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('---------');</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('dept_id:   ' || dept_rec.dept_id);</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('dept_name: ' || dept_rec.dept_name);</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('mgr_id:    ' || dept_rec.mgr_id);</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('loc_id:    ' || dept_rec.loc_id);</span><br><span class="line"></span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('-----------');</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('dept_rec_2:');</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('-----------');</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('dept_id:   ' || dept_rec_2.dept_id);</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('dept_name: ' || dept_rec_2.dept_name);</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('mgr_id:    ' || dept_rec_2.mgr_id);</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('loc_id:    ' || dept_rec_2.loc_id);</span><br><span class="line">END;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">dept_rec:</span><br><span class="line">---------</span><br><span class="line">dept_id:   10</span><br><span class="line">dept_name: Administration</span><br><span class="line">mgr_id:    200</span><br><span class="line">loc_id:</span><br><span class="line">-----------</span><br><span class="line">dept_rec_2:</span><br><span class="line">-----------</span><br><span class="line">dept_id:   10</span><br><span class="line">dept_name: Administration</span><br><span class="line">mgr_id:    200</span><br><span class="line">loc_id:</span><br></pre></td></tr></tbody></table></figure>

<h3 id="实践9-在块中自定义RECORD字段的RECORD类型（嵌套记录Nested-Record）" class="article-heading"><a href="#实践9-在块中自定义RECORD字段的RECORD类型（嵌套记录Nested-Record）" class="headerlink" title="实践9-在块中自定义RECORD字段的RECORD类型（嵌套记录Nested Record）"></a>实践9-在块中自定义RECORD字段的RECORD类型（嵌套记录Nested Record）<a class="article-anchor" href="#实践9-在块中自定义RECORD字段的RECORD类型（嵌套记录Nested-Record）" aria-hidden="true"></a></h3><p><code>record</code>类型可以理解为<code>python</code>中的字典<code>dict</code></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">friend = {</span><br><span class="line">  <span class="string">"name"</span> : {</span><br><span class="line">    <span class="string">"ename"</span>: <span class="string">"John"</span>,</span><br><span class="line">    <span class="string">"job"</span>: <span class="string">"salesman"</span>,</span><br><span class="line">  },</span><br><span class="line">  <span class="string">"sal"</span>: <span class="number">1000</span>,</span><br><span class="line">}</span><br><span class="line"><span class="built_in">print</span>(friend[<span class="string">'name'</span>][<span class="string">'ename'</span>],friend[<span class="string">'name'</span>][<span class="string">'job'</span>],friend[<span class="string">'sal'</span>])</span><br><span class="line"><span class="comment"># ('John', 'salesman', 1000)</span></span><br></pre></td></tr></tbody></table></figure>

<p>使用PLSQL实现：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">  TYPE name_rec IS RECORD (</span><br><span class="line">    ename  emp.ename%TYPE,</span><br><span class="line">    job   emp.job%TYPE</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  TYPE contact IS RECORD (</span><br><span class="line">    name  name_rec,                    -- nested record</span><br><span class="line">    sal emp.sal%TYPE</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  friend contact;</span><br><span class="line">BEGIN</span><br><span class="line">  friend.name.ename := 'John';</span><br><span class="line">  friend.name.job := 'salesman';</span><br><span class="line">  friend.sal := '1000';</span><br><span class="line"></span><br><span class="line">  DBMS_OUTPUT.PUT_LINE (</span><br><span class="line">    friend.name.ename  || ' ' ||</span><br><span class="line">    friend.name.job   || ', ' ||</span><br><span class="line">    friend.sal</span><br><span class="line">  );</span><br><span class="line">END;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<p>运行结果</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">John salesman, 1000</span><br></pre></td></tr></tbody></table></figure>

<h3 id="实践10-在块中自定义RECORD字段的RECORD类型（％ROWTYPE属性）" class="article-heading"><a href="#实践10-在块中自定义RECORD字段的RECORD类型（％ROWTYPE属性）" class="headerlink" title="实践10-在块中自定义RECORD字段的RECORD类型（％ROWTYPE属性）"></a>实践10-在块中自定义RECORD字段的RECORD类型（％ROWTYPE属性）<a class="article-anchor" href="#实践10-在块中自定义RECORD字段的RECORD类型（％ROWTYPE属性）" aria-hidden="true"></a></h3><ul>
<li>声明变量<code>dept_rec</code>的数据类型与 表<code>dept</code>相同</li>
<li>赋予变量<code>dept_rec</code>的每个<code>field</code>一个值，并打印。</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">  dept_rec dept%ROWTYPE;</span><br><span class="line">  dept_rec2 dept%ROWTYPE;</span><br><span class="line">BEGIN</span><br><span class="line">  -- Assign values to fields:</span><br><span class="line"></span><br><span class="line">  dept_rec.DEPTNO  := 10;</span><br><span class="line">  dept_rec.DNAME := 'Administration';</span><br><span class="line">  dept_rec.LOC    := 'New York';</span><br><span class="line">  select * into dept_rec2 from dept where rownum = 1;</span><br><span class="line"></span><br><span class="line">  -- Print fields:</span><br><span class="line"></span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('DEPTNO:   ' || dept_rec.DEPTNO);</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('DNAME: ' || dept_rec.DNAME);</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('LOC:    ' || dept_rec.LOC);</span><br><span class="line"></span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('DEPTNO:   ' || dept_rec2.DEPTNO);</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('DNAME: ' || dept_rec2.DNAME);</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE('LOC:    ' || dept_rec2.LOC);</span><br><span class="line">END;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<p>执行结果</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DEPTNO:   10</span><br><span class="line">DNAME: Administration</span><br><span class="line">LOC:	New York</span><br><span class="line">DEPTNO:   10</span><br><span class="line">DNAME: ACCOUNTING</span><br><span class="line">LOC:	NEW YORK</span><br></pre></td></tr></tbody></table></figure>

<h3 id="实践11-在块中自定义COLLECTIONS的类型" class="article-heading"><a href="#实践11-在块中自定义COLLECTIONS的类型" class="headerlink" title="实践11-在块中自定义COLLECTIONS的类型"></a>实践11-在块中自定义COLLECTIONS的类型<a class="article-anchor" href="#实践11-在块中自定义COLLECTIONS的类型" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">TYPE t1 IS TABLE OF emp.ename%TYPE</span><br><span class="line">INDEX BY BINARY_INTEGER;</span><br><span class="line">TYPE t2 IS TABLE OF DATE INDEX BY BINARY_INTEGER;</span><br><span class="line">v1 t1;</span><br><span class="line">v2 t2;</span><br><span class="line">BEGIN</span><br><span class="line">V1(0) := 'AA';</span><br><span class="line">v1(1) := 'CAMERON';</span><br><span class="line">v2(8) := SYSDATE + 7;</span><br><span class="line">select ename,hiredate into v1(7900),v2(7900) from emp where empno=7900; dbms_output.put_line(v1(1)||' '||v1(7900)); dbms_output.put_line(v2(8)||' '||v2(7900));</span><br><span class="line">dbms_output.put_line(v1(0));</span><br><span class="line">END;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DECLARE</span><br><span class="line">TYPE t1 IS TABLE OF emp.ename%TYPE</span><br><span class="line">INDEX BY BINARY_INTEGER;</span><br><span class="line">v1 t1;</span><br><span class="line">BEGIN</span><br><span class="line">V1(0) := 'AA';</span><br><span class="line">v1(1) := 'CAMERON';</span><br><span class="line">dbms_output.put_line(v1(1));</span><br><span class="line">END;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line">DECLARE</span><br><span class="line">TYPE t1 IS TABLE OF NUMBER;</span><br><span class="line">v1 t1 := t1(1,2,3);</span><br><span class="line">BEGIN</span><br><span class="line">dbms_output.put_line(v1(1));</span><br><span class="line">END;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<h3 id="实践12-使用集合的属性来操作集合的数据" class="article-heading"><a href="#实践12-使用集合的属性来操作集合的数据" class="headerlink" title="实践12-使用集合的属性来操作集合的数据"></a>实践12-使用集合的属性来操作集合的数据<a class="article-anchor" href="#实践12-使用集合的属性来操作集合的数据" aria-hidden="true"></a></h3><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>DELETE</code></td>
<td align="left">程序</td>
<td align="left">从集合中删除元素。</td>
</tr>
<tr>
<td align="left"><code>TRIM</code></td>
<td align="left">程序</td>
<td align="left">从varray或嵌套表的末尾删除元素。</td>
</tr>
<tr>
<td align="left"><code>EXTEND</code></td>
<td align="left">程序</td>
<td align="left">将元素添加到varray或嵌套表的末尾。</td>
</tr>
<tr>
<td align="left"><code>EXISTS</code></td>
<td align="left">功能</td>
<td align="left"><code>TRUE</code>当且仅当存在varray或嵌套表的指定元素时才返回。</td>
</tr>
<tr>
<td align="left"><code>FIRST</code></td>
<td align="left">功能</td>
<td align="left">返回集合中的第一个索引。</td>
</tr>
<tr>
<td align="left"><code>LAST</code></td>
<td align="left">功能</td>
<td align="left">返回集合中的最后一个索引。</td>
</tr>
<tr>
<td align="left"><code>COUNT</code></td>
<td align="left">功能</td>
<td align="left">返回集合中元素的数量。</td>
</tr>
<tr>
<td align="left"><code>LIMIT</code></td>
<td align="left">功能</td>
<td align="left">返回集合可以具有的最大元素数。</td>
</tr>
<tr>
<td align="left"><code>PRIOR</code></td>
<td align="left">功能</td>
<td align="left">返回指定索引之前的索引。</td>
</tr>
<tr>
<td align="left"><code>NEXT</code></td>
<td align="left">功能</td>
<td align="left">返回在指定索引之后的索引。</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">  type nt_type is  table of number;</span><br><span class="line">  nt nt_type := nt_type(11, 22, 33, 44, 55, 66);</span><br><span class="line">  PROCEDURE print_nt(nt nt_type) IS</span><br><span class="line">  	i number;</span><br><span class="line">  begin</span><br><span class="line">  	i := nt.FIRST;</span><br><span class="line">  	IF i IS NULL THEN</span><br><span class="line">    	DBMS_OUTPUT.PUT_LINE('nt is empty');</span><br><span class="line">  	ELSE</span><br><span class="line">    	WHILE i IS NOT NULL LOOP</span><br><span class="line">      	DBMS_OUTPUT.PUT('nt.(' || i || ') = ');</span><br><span class="line">        DBMS_OUTPUT.PUT(nt(i));</span><br><span class="line">        DBMS_OUTPUT.PUT_line('');</span><br><span class="line">      	i := nt.NEXT(i);</span><br><span class="line">    	END LOOP;</span><br><span class="line">    END IF;</span><br><span class="line">    DBMS_OUTPUT.PUT_line('==========================');</span><br><span class="line">  END;</span><br><span class="line">BEGIN</span><br><span class="line">  print_nt(nt);</span><br><span class="line"></span><br><span class="line">  nt.DELETE(2);     -- Delete second element</span><br><span class="line">  print_nt(nt);</span><br><span class="line"></span><br><span class="line">  nt(2) := 2222;    -- Restore second element</span><br><span class="line">  print_nt(nt);</span><br><span class="line"></span><br><span class="line">  nt.DELETE(2, 4);  -- Delete range of elements</span><br><span class="line">  print_nt(nt);</span><br><span class="line"></span><br><span class="line">  nt(3) := 3333;    -- Restore third element</span><br><span class="line">  print_nt(nt);</span><br><span class="line"></span><br><span class="line">  nt.DELETE;        -- Delete all elements</span><br><span class="line">  print_nt(nt);</span><br><span class="line">END;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<p>结果</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">nt.(1) = 11</span><br><span class="line">nt.(2) = 22</span><br><span class="line">nt.(3) = 33</span><br><span class="line">nt.(4) = 44</span><br><span class="line">nt.(5) = 55</span><br><span class="line">nt.(6) = 66</span><br><span class="line">==========================</span><br><span class="line">nt.(1) = 11</span><br><span class="line">nt.(3) = 33</span><br><span class="line">nt.(4) = 44</span><br><span class="line">nt.(5) = 55</span><br><span class="line">nt.(6) = 66</span><br><span class="line">==========================</span><br><span class="line">nt.(1) = 11</span><br><span class="line">nt.(2) = 2222</span><br><span class="line">nt.(3) = 33</span><br><span class="line">nt.(4) = 44</span><br><span class="line">nt.(5) = 55</span><br><span class="line">nt.(6) = 66</span><br><span class="line">==========================</span><br><span class="line">nt.(1) = 11</span><br><span class="line">nt.(5) = 55</span><br><span class="line">nt.(6) = 66</span><br><span class="line">==========================</span><br><span class="line">nt.(1) = 11</span><br><span class="line">nt.(3) = 3333</span><br><span class="line">nt.(5) = 55</span><br><span class="line">nt.(6) = 66</span><br><span class="line">==========================</span><br><span class="line">nt is empty</span><br><span class="line">==========================</span><br></pre></td></tr></tbody></table></figure>

<h3 id="实践13-成员为复合变量，每个主键访问一行数据" class="article-heading"><a href="#实践13-成员为复合变量，每个主键访问一行数据" class="headerlink" title="实践13-成员为复合变量，每个主键访问一行数据"></a>实践13-成员为复合变量，每个主键访问一行数据<a class="article-anchor" href="#实践13-成员为复合变量，每个主键访问一行数据" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">TYPE t1 IS TABLE OF emp%rowtype INDEX BY BINARY_INTEGER;</span><br><span class="line">TYPE t2 IS TABLE OF dept%rowtype INDEX BY BINARY_INTEGER;</span><br><span class="line">v1 t1;</span><br><span class="line">v2 t2;</span><br><span class="line">BEGIN</span><br><span class="line">select * into v1(7900) from emp where empno=7900;</span><br><span class="line">select * into v2(10) from dept where deptno=10; dbms_output.put_line(v1(7900).empno||v1(7900).ename); dbms_output.put_line(v2(10).dname);</span><br><span class="line">END;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<h3 id="实践14-在块中使用自定义游标" class="article-heading"><a href="#实践14-在块中使用自定义游标" class="headerlink" title="实践14-在块中使用自定义游标"></a>实践14-在块中使用自定义游标<a class="article-anchor" href="#实践14-在块中使用自定义游标" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">CURSOR c1 is select ename,sal from emp order by sal desc;</span><br><span class="line">v1 c1%rowtype;</span><br><span class="line">BEGIN</span><br><span class="line">open c1;</span><br><span class="line">fetch c1 into v1;</span><br><span class="line">dbms_output.put_line(v1.ename || ': ' ||v1.sal);</span><br><span class="line">fetch c1 into v1;</span><br><span class="line">dbms_output.put_line(v1.ename || ': ' ||v1.sal);</span><br><span class="line">close c1;</span><br><span class="line">END;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<h3 id="实践15–在块中使用自定义游标和游标的属性" class="article-heading"><a href="#实践15–在块中使用自定义游标和游标的属性" class="headerlink" title="实践15–在块中使用自定义游标和游标的属性"></a>实践15–在块中使用自定义游标和游标的属性<a class="article-anchor" href="#实践15–在块中使用自定义游标和游标的属性" aria-hidden="true"></a></h3><p>游标的属性:</p>
<p>前缀为游标的名称</p>
<ul>
<li>%isopen，测试该游标是否打开，返回真或假</li>
<li>%rowcount，游标已经操作了多少行， 返回数值</li>
<li>%found，游标是否找到记录，返回真或假</li>
<li>%notfound，游标是否找到记录，返回真或假</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line">CURSOR c1 is select ename,sal from emp order by sal desc; v1 c1%rowtype;</span><br><span class="line">n1 number(2);</span><br><span class="line">BEGIN</span><br><span class="line">if not c1%isopen then</span><br><span class="line">open c1;</span><br><span class="line">end if;</span><br><span class="line">fetch c1 into v1;</span><br><span class="line">n1:=c1%rowcount;</span><br><span class="line">dbms_output.put_line(v1.ename||' '||v1.sal||' '||n1); close c1;</span><br><span class="line">END;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<h3 id="实践16-在块中使用自定义游标和循环控制" class="article-heading"><a href="#实践16-在块中使用自定义游标和循环控制" class="headerlink" title="实践16-在块中使用自定义游标和循环控制"></a>实践16-在块中使用自定义游标和循环控制<a class="article-anchor" href="#实践16-在块中使用自定义游标和循环控制" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line"> CURSOR c1 is select ename,sal from emp order by sal desc;</span><br><span class="line"> v1 c1%rowtype;</span><br><span class="line"> n1 number(2);</span><br><span class="line">BEGIN</span><br><span class="line"> open c1;</span><br><span class="line"> loop fetch c1 into v1;</span><br><span class="line"> 	exit when c1%notfound;</span><br><span class="line"> 	dbms_output.put_line(v1.ename||' '||v1.sal);</span><br><span class="line"> 	n1:=c1%rowcount;</span><br><span class="line"> 	end loop;</span><br><span class="line"> close c1;</span><br><span class="line"> dbms_output.put_line(n1);</span><br><span class="line">END;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line">-- For 循环</span><br><span class="line">DECLARE</span><br><span class="line"> CURSOR c1 is select ename,sal from emp order by sal desc;</span><br><span class="line"> n1 number(2);</span><br><span class="line">BEGIN</span><br><span class="line"> for v1 in c1 loop</span><br><span class="line">   dbms_output.put_line(v1.ename||' '||v1.sal);</span><br><span class="line">   n1:=c1%rowcount;</span><br><span class="line"> end loop;</span><br><span class="line"> dbms_output.put_line(n1);</span><br><span class="line"> END;</span><br><span class="line"> /</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><code>v1</code> 的数据类型为 <code>c1%rowtype</code></li>
<li><code>c1</code> 自动 <code>open</code>,自动<code> fetch</code>,自动 <code>close</code></li>
<li><code>for</code> 循环和<code>游标</code>的结合可以很方便的 处理游标内的每一行。</li>
</ul>
<h3 id="实践18-在块中使用自定义游标之带变量的游标" class="article-heading"><a href="#实践18-在块中使用自定义游标之带变量的游标" class="headerlink" title="实践18-在块中使用自定义游标之带变量的游标"></a>实践18-在块中使用自定义游标之带变量的游标<a class="article-anchor" href="#实践18-在块中使用自定义游标之带变量的游标" aria-hidden="true"></a></h3><ul>
<li><p>带变量的游标，每次打开游标的时候需要给定变量。</p>
</li>
<li><p>根据变量的不同，游标的内容将不同。</p>
</li>
<li><p>一般用于多层循环中内层循环的游标控制。</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line"> CURSOR c1(n1 number) is select ename,sal from emp where empno=n1;</span><br><span class="line"> v1 c1%rowtype;</span><br><span class="line">BEGIN</span><br><span class="line"> open c1(7900);</span><br><span class="line"> fetch c1 into v1;</span><br><span class="line"> dbms_output.put_line(v1.ename||' '||v1.sal);</span><br><span class="line"> close c1;</span><br><span class="line">END;</span><br><span class="line">/</span><br></pre></td></tr></tbody></table></figure>

<h2 id="课后练习" class="article-heading"><a href="#课后练习" class="headerlink" title="课后练习"></a>课后练习<a class="article-anchor" href="#课后练习" aria-hidden="true"></a></h2><p>准备实验环境，建立一个表，其中一个列是空的，我们要将空列的值赋予相对应的部门名称。</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">conn scott<span class="operator">/</span>tiger</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> t1 purge;</span><br><span class="line"><span class="keyword">create table</span> t1 <span class="keyword">as</span> <span class="keyword">select</span> ename,deptno <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">alter table</span> t1 <span class="keyword">add</span>(dname varchar2(<span class="number">18</span>));</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t1;</span><br></pre></td></tr></tbody></table></figure>

<p>执行结果</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">SCOTT<span class="variable">@testdb</span><span class="operator">&gt;</span><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t1;</span><br><span class="line"></span><br><span class="line">ENAME	       DEPTNO DNAME</span><br><span class="line"><span class="comment">---------- ---------- ------------------</span></span><br><span class="line">test1		   <span class="number">50</span></span><br><span class="line">test		   <span class="number">50</span></span><br><span class="line">SMITH		   <span class="number">20</span></span><br><span class="line">ALLEN		   <span class="number">30</span></span><br><span class="line">WARD		   <span class="number">30</span></span><br><span class="line">JONES		   <span class="number">20</span></span><br><span class="line">MARTIN		   <span class="number">30</span></span><br><span class="line">BLAKE		   <span class="number">30</span></span><br><span class="line">CLARK		   <span class="number">10</span></span><br><span class="line">SCOTT		   <span class="number">20</span></span><br><span class="line">KING		   <span class="number">10</span></span><br><span class="line">TURNER		   <span class="number">30</span></span><br><span class="line">ADAMS		   <span class="number">20</span></span><br><span class="line">JAMES		   <span class="number">30</span></span><br><span class="line">FORD		   <span class="number">20</span></span><br><span class="line">MILLER		   <span class="number">10</span></span><br><span class="line">booboo		   <span class="number">50</span></span><br><span class="line"></span><br><span class="line"><span class="number">17</span> <span class="keyword">rows</span> selected.</span><br></pre></td></tr></tbody></table></figure>

<p>答案：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">DECLARE</span><br><span class="line"> CURSOR c1 is select * from t1 for update;</span><br><span class="line"> v1 dept.dname%type;</span><br><span class="line"></span><br><span class="line">BEGIN</span><br><span class="line"> for n1 in c1 loop</span><br><span class="line">   select dname into v1 from dept where deptno=n1.deptno;</span><br><span class="line">   update t1 set dname=v1 WHERE CURRENT OF C1;</span><br><span class="line"> end loop;</span><br><span class="line"> END;</span><br><span class="line"> /</span><br></pre></td></tr></tbody></table></figure>

<p>检查</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line">SCOTT<span class="variable">@testdb</span><span class="operator">&gt;</span><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t1;</span><br><span class="line"></span><br><span class="line">ENAME	       DEPTNO DNAME</span><br><span class="line"><span class="comment">---------- ---------- ------------------</span></span><br><span class="line">test1		   <span class="number">50</span> test</span><br><span class="line">test		   <span class="number">50</span> test</span><br><span class="line">SMITH		   <span class="number">20</span> RESEARCH</span><br><span class="line">ALLEN		   <span class="number">30</span> SALES</span><br><span class="line">WARD		   <span class="number">30</span> SALES</span><br><span class="line">JONES		   <span class="number">20</span> RESEARCH</span><br><span class="line">MARTIN		   <span class="number">30</span> SALES</span><br><span class="line">BLAKE		   <span class="number">30</span> SALES</span><br><span class="line">CLARK		   <span class="number">10</span> ACCOUNTING</span><br><span class="line">SCOTT		   <span class="number">20</span> RESEARCH</span><br><span class="line">KING		   <span class="number">10</span> ACCOUNTING</span><br><span class="line">TURNER		   <span class="number">30</span> SALES</span><br><span class="line">ADAMS		   <span class="number">20</span> RESEARCH</span><br><span class="line">JAMES		   <span class="number">30</span> SALES</span><br><span class="line">FORD		   <span class="number">20</span> RESEARCH</span><br><span class="line">MILLER		   <span class="number">10</span> ACCOUNTING</span><br><span class="line">booboo		   <span class="number">50</span> test</span><br><span class="line"></span><br><span class="line"><span class="number">17</span> <span class="keyword">rows</span> selected.</span><br></pre></td></tr></tbody></table></figure>
</body></html>
              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2025-10-22T08:49:44.988Z" itemprop="dateModified">Last updated: 2025-10-22</time>
                <a href="/database/mysql/index.html" class="article-footer-next" title="概览"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <div id="carbonads" class="carbonads" style="text-align:center;font-family:'Noto Sans SC',sans-serif;">
  <span class="carbon-wrap">
    <a href="https://github.com/booboowei"
       class="carbon-img"
       target="_blank"
       rel="noopener sponsored">
      <img
        src="https://avatars2.githubusercontent.com/u/21328020?s=460&u=88cf6127c32932188f936d05636b7b0d36783ee1&v=4"
        alt="ads via Carbon"
        border="0"
        style="width:80px;height:80px;border-radius:50%;max-width:130px;"
      />
    </a>
    <a href="/about/"
       class="carbon-text"
       target="_blank"
       rel="noopener sponsored"
       style="display:block;margin-top:4px;">
      欢迎光临
    </a>
  </span>

  <!-- 日期显示 -->
  <div id="today-date" style="margin-top:12px;background:#f5f5f5;border-radius:12px;padding:10px 0;">
    <div id="weekday" style="font-size:14px;color:#555;"></div>
    <div id="day" style="font-size:36px;font-weight:bold;color:#000;"></div>
    <div id="ym" style="font-size:14px;color:#555;"></div>
    <div id="lunar" style="font-size:13px;color:#888;margin-top:4px;"></div>
  </div>

<script>
(function(){
  const now = new Date();
  const weekdays = ["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];
  const year = now.getFullYear();
  const month = now.getMonth() + 1;
  const day = now.getDate();

  function toChineseNumber(num) {
    const map = {0:'〇',1:'一',2:'二',3:'三',4:'四',5:'五',6:'六',7:'七',8:'八',9:'九'};
    return String(num).split('').map(n=>map[n]).join('');
  }

  // 优先使用 Intl (现代浏览器支持农历/中国传统历)
  function getLunarByIntl(date) {
    try {
      // 获取农历的月（长格式，如 "九月" 或 "闰八月"），和日（数字）
      const monthFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { month: 'long' });
      const dayFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { day: 'numeric' });
      const lunarMonthText = monthFormatter.format(date); // 例如 "九月" 或 "闰八月"
      const lunarDayText = dayFormatter.format(date);     // 例如 "三十" 或 "初一"
      // 有的浏览器返回的 month 会包含 "闰" 字样，也可能返回汉字月份，需要适配
      return `农历${lunarMonthText}${lunarDayText}`;
    } catch (e) {
      return null; // 表示不支持 Intl 农历
    }
  }

  // 回退：简易本地农历算法（仅作兼容，适用于1900-2049范围）
  const lunarInfo = [0x04bd8,0x04ae0,0x0a570,0x054d5,0x0d260,0x0d950,0x16554,0x056a0,0x09ad0,0x055d2,
                     0x04ae0,0x0a5b6,0x0a4d0,0x0d250,0x1d255,0x0b540,0x0d6a0,0x0ada2,0x095b0,0x14977,
                     0x04970,0x0a4b0,0x0b4b5,0x06a50,0x06d40,0x1ab54,0x02b60,0x09570,0x052f2,0x04970,
                     0x06566,0x0d4a0,0x0ea50,0x06e95,0x05ad0,0x02b60,0x186e3,0x092e0,0x1c8d7,0x0c950,
                     0x0d4a0,0x1d8a6,0x0b550,0x056a0,0x1a5b4,0x025d0,0x092d0,0x0d2b2,0x0a950,0x0b557,
                     0x06ca0,0x0b550,0x15355,0x04da0,0x0a5b0,0x14573,0x052b0,0x0a9a8,0x0e950,0x06aa0,
                     0x0aea6,0x0ab50,0x04b60,0x0aae4,0x0a570,0x05260,0x0f263,0x0d950,0x05b57,0x056a0,
                     0x096d0,0x04dd5,0x04ad0,0x0a4d0,0x0d4d4,0x0d250,0x0d558,0x0b540,0x0b5a0,0x195a6,
                     0x095b0,0x049b0,0x0a974,0x0a4b0,0x0b27a,0x06a50,0x06d40,0x0af46,0x0ab60,0x09570,
                     0x04af5,0x04970,0x064b0,0x074a3,0x0ea50,0x06b58,0x05ac0,0x0ab60,0x096d5,0x092e0];

  function lYearDays(y){let i,sum=348;for(i=0x8000;i>0x8;i>>=1)sum+=(lunarInfo[y-1900]&i)?1:0;return sum+leapDays(y);}
  function leapDays(y){if(leapMonth(y))return(lunarInfo[y-1900]&0x10000)?30:29;else return 0;}
  function leapMonth(y){return lunarInfo[y-1900]&0xf;}
  function monthDays(y,m){return(lunarInfo[y-1900]&(0x10000>>m))?30:29;}

  function LunarFallback(objDate){
    let i, leap=0, temp=0;
    const baseDate = new Date(1900,0,31);
    let offset = Math.floor((objDate - baseDate) / 86400000);
    let year = 1900;
    // 年循环
    for (i = 1900; i < 2050 && offset > 0; i++) {
      temp = lYearDays(i);
      offset -= temp;
      year = i;
    }
    if (offset < 0) { offset += temp; year--; }
    leap = leapMonth(year);
    let isLeap = false;
    let month = 1;
    // 月循环
    for (i = 1; i <= 12 && offset > 0; i++) {
      if (leap > 0 && i === (leap + 1) && !isLeap) {
        // 进入闰月
        temp = leapDays(year);
        isLeap = true;
        i--; // stay on same month number but mark leap
      } else {
        temp = monthDays(year, i);
      }
      offset -= temp;
      if (isLeap && i === leap) { isLeap = false; }
      if (!isLeap) month++; // 非闰月时才推进月份计数
    }
    if (offset === 0 && leap > 0 && month === leap + 1) {
      // 特殊：当正好落在闰月第一天
      // month 保持，isLeap = true
    }
    if (offset < 0) { offset += temp; month--; }
    const day = offset + 1;
    // 修正 month 边界
    if (month <= 0) month = 1;
    return { year, month, day, isLeap: !!isLeap };
  }

  function getLunarDateStringFallback(y,m,d){
    const cDay=["","初一","初二","初三","初四","初五","初六","初七","初八","初九","初十",
                "十一","十二","十三","十四","十五","十六","十七","十八","十九","二十",
                "廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"];
    const cMon=["","正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","冬月","腊月"];
    const lunar = LunarFallback(new Date(y, m-1, d));
    return `农历${lunar.isLeap ? '闰' : ''}${cMon[lunar.month]}${cDay[lunar.day]}`;
  }

  // 先尝试 Intl 方法
  let lunarText = getLunarByIntl(now);
  if (!lunarText) {
    // 回退本地算法
    lunarText = getLunarDateStringFallback(year, month, day);
  }

  // 输出到页面（公历 + 农历）
  document.getElementById("weekday").textContent = weekdays[now.getDay()];
  document.getElementById("day").textContent = day;
  document.getElementById("ym").textContent = `${toChineseNumber(year)}年${toChineseNumber(month)}月`;
  document.getElementById("lunar").textContent = lunarText;
})();
</script>


              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8-pl-sql"><span class="toc-text">为什么要使用 pl&#x2F;sql</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%97%E7%9A%84%E7%BB%93%E6%9E%84%E5%92%8C%E5%A3%B0%E6%98%8E%E5%8F%98%E9%87%8F"><span class="toc-text">块的结构和声明变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F"><span class="toc-text">使用变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-text">变量的优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%8F%98%E9%87%8F%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-text">设置变量的语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99"><span class="toc-text">变量的命名规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%9C%E7%94%A8%E8%8C%83%E5%9B%B4"><span class="toc-text">变量的作用范围</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TYPE%E5%B1%9E%E6%80%A7"><span class="toc-text">%TYPE属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-text">流程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="toc-text">条件判断</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#IF%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="toc-text">IF条件判断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CASE%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="toc-text">CASE条件判断</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF"><span class="toc-text">循环</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Loop%E5%BE%AA%E7%8E%AF"><span class="toc-text">Loop循环</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#While-%E5%BE%AA%E7%8E%AF"><span class="toc-text">While 循环</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#For%E5%BE%AA%E7%8E%AF"><span class="toc-text">For循环</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#scalar-data-types%E6%A0%87%E9%87%8F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">scalar data types标量数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">SQL数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BOOLEAN"><span class="toc-text">BOOLEAN</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BINARY-INTEGER-%E5%92%8CBINARY-INTEGER"><span class="toc-text">BINARY_INTEGER 和BINARY_INTEGER</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#REF-CURSOR"><span class="toc-text">REF CURSOR</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Declaring-and-Defining-Explicit-Cursors"><span class="toc-text">Declaring and Defining Explicit Cursors</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#User-defined-subtypes"><span class="toc-text">User-defined subtypes</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#composite-data-types%E7%BB%84%E5%90%88%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">composite data types组合数据类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%90%88%E5%8F%98%E9%87%8F"><span class="toc-text">复合变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PL-SQL-RECORDs"><span class="toc-text">PL&#x2F;SQL RECORDs</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%B0%E5%BD%95%E5%8F%98%E9%87%8F%E5%A7%8B%E7%BB%88%E4%BB%A3%E8%A1%A8%E5%AE%8C%E6%95%B4%E8%A1%8C"><span class="toc-text">记录变量始终代表完整行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%B0%E5%BD%95%E5%8F%AF%E4%BB%A5%E4%BB%A3%E8%A1%A8%E9%83%A8%E5%88%86%E8%A1%8C%E7%9A%84%E5%8F%98%E9%87%8F"><span class="toc-text">记录可以代表部分行的变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%85ROWTYPE%E5%B1%9E%E6%80%A7%E5%92%8C%E8%99%9A%E6%8B%9F%E5%88%97"><span class="toc-text">％ROWTYPE属性和虚拟列</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PL-SQL-Collections"><span class="toc-text">PL&#x2F;SQL Collections</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B5"><span class="toc-text">实践</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B51-%E4%B9%A6%E5%86%99%E4%B8%80%E4%B8%AA%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E5%9D%97%EF%BC%8C%E8%BF%90%E8%A1%8C%E5%B9%B6%E6%9F%A5%E7%9C%8B%E7%BB%93%E6%9E%9C"><span class="toc-text">实践1-书写一个最简单的块，运行并查看结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B52-%E5%9C%A8%E5%9D%97%E4%B8%AD%E6%93%8D%E4%BD%9C%E5%8F%98%E9%87%8F"><span class="toc-text">实践2-在块中操作变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B53-%E5%9C%A8%E5%9D%97%E4%B8%AD%E6%93%8D%E4%BD%9C%E5%8F%98%E9%87%8F%E7%90%86%E8%A7%A3-TYPE%E5%B1%9E%E6%80%A7"><span class="toc-text">实践3-在块中操作变量理解%TYPE属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B54-%E5%9C%A8%E5%9D%97%E4%B8%AD%E6%93%8D%E4%BD%9C%E8%A1%A8%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-text">实践4-在块中操作表的数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B55-%E5%9C%A8%E5%9D%97%E4%B8%AD%E7%9A%84%E5%88%86%E6%94%AF%E6%93%8D%E4%BD%9CIF%E8%AF%AD%E5%8F%A5"><span class="toc-text">实践5-在块中的分支操作IF语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B56-%E5%9C%A8%E5%9D%97%E4%B8%AD%E7%9A%84%E5%88%86%E6%94%AF%E6%93%8D%E4%BD%9CCASE%E8%AF%AD%E5%8F%A5"><span class="toc-text">实践6-在块中的分支操作CASE语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B57-%E5%9C%A8%E5%9D%97%E4%B8%AD%E4%BD%BF%E7%94%A8%E4%B8%89%E7%A7%8D%E5%BE%AA%E7%8E%AFfor-while-loop"><span class="toc-text">实践7-在块中使用三种循环for.while.loop</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B58-%E5%9C%A8%E5%9D%97%E4%B8%AD%E8%87%AA%E5%AE%9A%E4%B9%89RECORD%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%E5%92%8C%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E"><span class="toc-text">实践8-在块中自定义RECORD类型定义和变量声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B59-%E5%9C%A8%E5%9D%97%E4%B8%AD%E8%87%AA%E5%AE%9A%E4%B9%89RECORD%E5%AD%97%E6%AE%B5%E7%9A%84RECORD%E7%B1%BB%E5%9E%8B%EF%BC%88%E5%B5%8C%E5%A5%97%E8%AE%B0%E5%BD%95Nested-Record%EF%BC%89"><span class="toc-text">实践9-在块中自定义RECORD字段的RECORD类型（嵌套记录Nested Record）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B510-%E5%9C%A8%E5%9D%97%E4%B8%AD%E8%87%AA%E5%AE%9A%E4%B9%89RECORD%E5%AD%97%E6%AE%B5%E7%9A%84RECORD%E7%B1%BB%E5%9E%8B%EF%BC%88%EF%BC%85ROWTYPE%E5%B1%9E%E6%80%A7%EF%BC%89"><span class="toc-text">实践10-在块中自定义RECORD字段的RECORD类型（％ROWTYPE属性）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B511-%E5%9C%A8%E5%9D%97%E4%B8%AD%E8%87%AA%E5%AE%9A%E4%B9%89COLLECTIONS%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-text">实践11-在块中自定义COLLECTIONS的类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B512-%E4%BD%BF%E7%94%A8%E9%9B%86%E5%90%88%E7%9A%84%E5%B1%9E%E6%80%A7%E6%9D%A5%E6%93%8D%E4%BD%9C%E9%9B%86%E5%90%88%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-text">实践12-使用集合的属性来操作集合的数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B513-%E6%88%90%E5%91%98%E4%B8%BA%E5%A4%8D%E5%90%88%E5%8F%98%E9%87%8F%EF%BC%8C%E6%AF%8F%E4%B8%AA%E4%B8%BB%E9%94%AE%E8%AE%BF%E9%97%AE%E4%B8%80%E8%A1%8C%E6%95%B0%E6%8D%AE"><span class="toc-text">实践13-成员为复合变量，每个主键访问一行数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B514-%E5%9C%A8%E5%9D%97%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%B8%E6%A0%87"><span class="toc-text">实践14-在块中使用自定义游标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B515%E2%80%93%E5%9C%A8%E5%9D%97%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%B8%E6%A0%87%E5%92%8C%E6%B8%B8%E6%A0%87%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-text">实践15–在块中使用自定义游标和游标的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B516-%E5%9C%A8%E5%9D%97%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%B8%E6%A0%87%E5%92%8C%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6"><span class="toc-text">实践16-在块中使用自定义游标和循环控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E8%B7%B518-%E5%9C%A8%E5%9D%97%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%B8%E6%A0%87%E4%B9%8B%E5%B8%A6%E5%8F%98%E9%87%8F%E7%9A%84%E6%B8%B8%E6%A0%87"><span class="toc-text">实践18-在块中使用自定义游标之带变量的游标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BE%E5%90%8E%E7%BB%83%E4%B9%A0"><span class="toc-text">课后练习</span></a></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">MySQL</strong><a href="/database/mysql/index.html" class="sidebar-link">概览</a><a href="/database/mysql/booboo_mysql/index.html" class="sidebar-link">MySQL 基础</a><a href="/database/mysql/dba_mysql/index.html" class="sidebar-link">MySQL 运维实践</a><a href="/database/mysql/rds_mysql/index.html" class="sidebar-link">RDS 性能调优</a><a href="/database/mysql/security/index.html" class="sidebar-link">安全篇</a><a href="/database/mysql/awesome-tools/index.html" class="sidebar-link">工具篇</a><strong class="sidebar-title">Oracle</strong><a href="/database/oracle/index.html" class="sidebar-link">概览</a><a href="/database/oracle/ocp/index.html" class="sidebar-link">Oracle12C OCP</a><a href="/database/oracle/oracle-12c/index.html" class="sidebar-link">Oracle 12c 学习笔记</a><a href="/database/oracle/oracle-11g/index.html" class="sidebar-link">Oracle 11g 学习笔记</a><strong class="sidebar-title">NoSQL</strong><a href="/database/nosql/index.html" class="sidebar-link">概览</a><a href="/database/nosql/booboo_redis/index.html" class="sidebar-link">Redis 基础</a><a href="/database/nosql/dba_redis/index.html" class="sidebar-link">Redis 进阶</a><a href="/database/nosql/booboo_mongodb/index.html" class="sidebar-link">MongoDB 基础</a><a href="/database/nosql/hadoop/index.html" class="sidebar-link">Hadoop 基础</a><strong class="sidebar-title">TiDB</strong><a href="/database/tidb/index.html" class="sidebar-link">概览</a><a href="/database/tidb/00_tidb入门指南.html" class="sidebar-link">TiDB 入门指南</a><a href="/database/tidb/01_raft协议理解.html" class="sidebar-link">Raft协议理解</a><a href="/database/tidb/tidb_courses/index.html" class="sidebar-link">TiDB 21天课程</a>
  </div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2025 <a href="https://github.com/BoobooWei" target="_blank">魏亚萍</a><br>
      Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>.<br>
      备案号：沪ICP备2020026043号
    </div>
    <div id="footer-links">
      <a href="https://www.youtube.com/@amyreading2023" class="footer-link" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" 
            alt="YouTube"
            style="height:24px; margin-bottom:-6px;">
      </a>
      <a href="https://github.com/BoobooWei" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="../../../docs/" class="mobile-nav-link">Hexo</a><a href="../../../news/" class="mobile-nav-link">News</a><a href="../../../api/" class="mobile-nav-link">MySQL8.0</a><a href="../../../database/" class="mobile-nav-link">Database</a><a href="../../../linux/" class="mobile-nav-link">Linux</a><a href="../../../cloud/" class="mobile-nav-link">Cloud</a><a href="../../../singapore/" class="mobile-nav-link">Singapore</a><a href="../../../amy/" class="mobile-nav-link">AMY</a><a href="../../../about/" class="mobile-nav-link">About</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/BoobooWei" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">MySQL</strong><a href="/database/mysql/index.html" class="mobile-nav-link">概览</a><a href="/database/mysql/booboo_mysql/index.html" class="mobile-nav-link">MySQL 基础</a><a href="/database/mysql/dba_mysql/index.html" class="mobile-nav-link">MySQL 运维实践</a><a href="/database/mysql/rds_mysql/index.html" class="mobile-nav-link">RDS 性能调优</a><a href="/database/mysql/security/index.html" class="mobile-nav-link">安全篇</a><a href="/database/mysql/awesome-tools/index.html" class="mobile-nav-link">工具篇</a><strong class="mobile-nav-title">Oracle</strong><a href="/database/oracle/index.html" class="mobile-nav-link">概览</a><a href="/database/oracle/ocp/index.html" class="mobile-nav-link">Oracle12C OCP</a><a href="/database/oracle/oracle-12c/index.html" class="mobile-nav-link">Oracle 12c 学习笔记</a><a href="/database/oracle/oracle-11g/index.html" class="mobile-nav-link">Oracle 11g 学习笔记</a><strong class="mobile-nav-title">NoSQL</strong><a href="/database/nosql/index.html" class="mobile-nav-link">概览</a><a href="/database/nosql/booboo_redis/index.html" class="mobile-nav-link">Redis 基础</a><a href="/database/nosql/dba_redis/index.html" class="mobile-nav-link">Redis 进阶</a><a href="/database/nosql/booboo_mongodb/index.html" class="mobile-nav-link">MongoDB 基础</a><a href="/database/nosql/hadoop/index.html" class="mobile-nav-link">Hadoop 基础</a><strong class="mobile-nav-title">TiDB</strong><a href="/database/tidb/index.html" class="mobile-nav-link">概览</a><a href="/database/tidb/00_tidb入门指南.html" class="mobile-nav-link">TiDB 入门指南</a><a href="/database/tidb/01_raft协议理解.html" class="mobile-nav-link">Raft协议理解</a><a href="/database/tidb/tidb_courses/index.html" class="mobile-nav-link">TiDB 21天课程</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- Cookie -->
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<!-- build:js build/js/main.js -->

<script src="../../../js/lang_select.js"></script>


<script src="../../../js/mobile_nav.js"></script>

<!-- endbuild -->

<!-- Algolia -->
<!--   backup
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript">
docsearch({
  appId: '',
  apiKey: '',
  indexName: '',
  insights: true,
  container: '#docsearch',
  debug: false,
  searchParameters: {
    facetFilters: ['lang:en']
  }
});
</script>
-->

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
document.getElementById('search-input-wrap').classList.add('on');
docsearch({
    apiKey: '',
    indexName: '',
    inputSelector: '#search-input'
});
</script>
</body>
</html>